<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="alternate icon" href="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAzMiAzMiI+PGNpcmNsZSBjeD0iMTYiIGN5PSIxNiIgcj0iMTUiIGZpbGw9IiMzNDk4ZGIiIHN0cm9rZT0iIzJjM2U1MCIgc3Ryb2tlLXdpZHRoPSIyIi8+PGcgZmlsbD0id2hpdGUiIGZvbnQtZmFtaWx5PSJUaW1lcyxzZXJpZiIgZm9udC13ZWlnaHQ9ImJvbGQiPjx0ZXh0IHg9IjE2IiB5PSIxMyIgdGV4dC1hbmNob3I9Im1pZGRsZSIgZm9udC1zaXplPSIxMiI+ZDwvdGV4dD48bGluZSB4MT0iOCIgeTE9IjE2IiB4Mj0iMjQiIHkyPSIxNiIgc3Ryb2tlPSJ3aGl0ZSIgc3Ryb2tlLXdpZHRoPSIxLjUiLz48dGV4dCB4PSIxNiIgeT0iMjUiIHRleHQtYW5jaG9yPSJtaWRkbGUiIGZvbnQtc2l6ZT0iMTAiPmR4PC90ZXh0PjwvZz48L3N2Zz4=">
    <title>6.2 定积分在几何学上的应用 - 高等数学复习</title>
    <script>
        window.MathJax = {
            tex: {
                inlineMath: [['$', '$']],
                displayMath: [['$$', '$$']]
            },
            chtml: {
                fontURL: 'https://cdn.jsdelivr.net/npm/mathjax@3/es5/output/chtml/fonts/woff-v2'
            }
        };
    </script>
    <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    <script src="https://cdn.plot.ly/plotly-2.26.0.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/gsap@3.12.2/dist/gsap.min.js"></script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Microsoft YaHei', 'Segoe UI', Arial, sans-serif;
            line-height: 1.6;
            color: #333;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
        }
        
        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }
        
        .back-link {
            display: inline-flex;
            align-items: center;
            margin-bottom: 20px;
            color: #3498db;
            text-decoration: none;
            font-weight: 500;
            transition: all 0.3s ease;
            background: rgba(255, 255, 255, 0.9);
            padding: 10px 15px;
            border-radius: 25px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }
        
        .back-link:hover {
            color: #2980b9;
            transform: translateX(-5px);
            box-shadow: 0 4px 15px rgba(0,0,0,0.15);
        }
        
        .back-link::before {
            content: '←';
            margin-right: 8px;
            font-size: 1.2em;
        }
        
        header {
            background: linear-gradient(135deg, #e74c3c 0%, #c0392b 100%);
            color: white;
            padding: 40px 0;
            text-align: center;
            border-radius: 15px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.2);
            margin-bottom: 30px;
        }
        
        h1 {
            font-size: 2.5em;
            margin: 0;
            text-shadow: 0 2px 4px rgba(0,0,0,0.3);
            font-weight: 300;
        }
        
        .subtitle {
            font-size: 1.1em;
            margin-top: 10px;
            opacity: 0.9;
        }
        
        .content-section {
            background: white;
            margin: 25px 0;
            border-radius: 15px;
            overflow: hidden;
            box-shadow: 0 5px 20px rgba(0,0,0,0.1);
            transition: transform 0.3s ease, box-shadow 0.3s ease;
        }
        
        .content-section:hover {
            transform: translateY(-3px);
            box-shadow: 0 8px 25px rgba(0,0,0,0.15);
        }
        
        .section-header {
            padding: 20px 30px;
            background: linear-gradient(45deg, #e74c3c, #c0392b);
            color: white;
        }
        
        .section-header h2 {
            margin: 0;
            font-size: 1.6em;
            font-weight: 400;
        }
        
        .section-content {
            padding: 30px;
        }
        
        .definition {
            background: linear-gradient(135deg, #f4f0f8, #ece2f0);
            border-left: 5px solid #e74c3c;
            padding: 25px;
            margin: 20px 0;
            border-radius: 0 10px 10px 0;
            box-shadow: 0 3px 15px rgba(231, 76, 60, 0.1);
        }
        
        .definition h4 {
            margin: 0 0 15px 0;
            color: #e74c3c;
            font-size: 1.3em;
            font-weight: 600;
        }
        
        .theorem {
            background: linear-gradient(135deg, #fef9e7, #fcf4dd);
            border-left: 5px solid #f39c12;
            padding: 25px;
            margin: 20px 0;
            border-radius: 0 10px 10px 0;
            box-shadow: 0 3px 15px rgba(243, 156, 18, 0.1);
        }
        
        .theorem h4 {
            margin: 0 0 15px 0;
            color: #f39c12;
            font-size: 1.3em;
            font-weight: 600;
        }
        
        .example {
            background: linear-gradient(135deg, #ebf3fd, #d6e9f8);
            border-left: 5px solid #3498db;
            padding: 25px;
            margin: 20px 0;
            border-radius: 0 10px 10px 0;
            box-shadow: 0 3px 15px rgba(52, 152, 219, 0.1);
        }
        
        .example h4 {
            margin: 0 0 15px 0;
            color: #3498db;
            font-size: 1.3em;
            font-weight: 600;
        }
        
        .practice-problem {
            background: linear-gradient(135deg, #fdf2e9, #fbeee0);
            border-left: 5px solid #e67e22;
            padding: 25px;
            margin: 20px 0;
            border-radius: 0 10px 10px 0;
            box-shadow: 0 3px 15px rgba(230, 126, 34, 0.1);
        }
        
        .practice-problem h4 {
            margin: 0 0 15px 0;
            color: #e67e22;
            font-size: 1.3em;
            font-weight: 600;
        }
        
        .difficulty {
            display: inline-block;
            padding: 3px 10px;
            border-radius: 15px;
            font-size: 0.85em;
            font-weight: 500;
            margin-left: 10px;
        }
        
        .difficulty.medium {
            background: #f39c12;
            color: white;
        }
        
        .difficulty.hard {
            background: #e74c3c;
            color: white;
        }
        
        .difficulty.very-hard {
            background: #8e44ad;
            color: white;
        }
        
        .solution {
            margin-top: 20px;
            padding-top: 20px;
            border-top: 2px dashed #bdc3c7;
        }
        
        .solution-header {
            font-weight: 600;
            color: #2c3e50;
            margin-bottom: 15px;
            font-size: 1.1em;
        }
        
        .viz-container {
            width: 100%;
            height: 400px;
            margin: 25px 0;
            background: white;
            border-radius: 10px;
            box-shadow: 0 3px 15px rgba(0,0,0,0.1);
            overflow: hidden;
        }
        
        .interactive-demo {
            width: 100%;
            height: auto;
            min-height: 480px;
            margin: 25px 0;
            background: #f8f9fa;
            border-radius: 10px;
            box-shadow: 0 3px 15px rgba(0,0,0,0.1);
            padding: 20px;
            position: relative;
        }
        
        .controls {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            margin-bottom: 20px;
            padding: 15px;
            background: white;
            border-radius: 8px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }
        
        .controls.compact {
            grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
            gap: 15px;
        }
        
        .control-group {
            display: flex;
            flex-direction: column;
            gap: 10px;
        }
        
        .controls label {
            display: block;
            margin-bottom: 5px;
            font-weight: 500;
            color: #e74c3c;
        }
        
        .controls input, .controls select {
            width: 100%;
            padding: 8px;
            border: 1px solid #ddd;
            border-radius: 4px;
            font-size: 14px;
        }
        
        .nav-buttons {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-top: 40px;
            padding: 20px 0;
        }
        
        .btn {
            display: inline-flex;
            align-items: center;
            padding: 12px 25px;
            background: linear-gradient(45deg, #e74c3c, #c0392b);
            color: white;
            text-decoration: none;
            border-radius: 25px;
            font-weight: 500;
            transition: all 0.3s ease;
            box-shadow: 0 3px 15px rgba(231, 76, 60, 0.3);
        }
        
        .btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 20px rgba(231, 76, 60, 0.4);
        }
        
        .btn.prev::before {
            content: '←';
            margin-right: 8px;
            font-size: 1.1em;
        }
        
        .btn.next::after {
            content: '→';
            margin-left: 8px;
            font-size: 1.1em;
        }
        
        footer {
            text-align: center;
            color: white;
            padding: 30px 0;
            opacity: 0.9;
            margin-top: 50px;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 15px;
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.1);
        }
        
        footer p {
            text-align: center;
            margin: 0;
        }
        
        .math-expression {
            text-align: center;
            margin: 15px 0;
            font-size: 1.1em;
        }
        
        ul, ol {
            margin-left: 20px;
            margin-bottom: 15px;
        }
        
        li {
            margin-bottom: 8px;
        }
        
        p {
            margin-bottom: 15px;
            text-align: justify;
        }
        
        .highlight {
            background: linear-gradient(135deg, #fff3cd, #fce4a0);
            padding: 15px;
            border-left: 4px solid #ffc107;
            border-radius: 0 8px 8px 0;
            margin: 15px 0;
        }
        
        .coordinate-systems {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(350px, 1fr));
            gap: 20px;
            margin: 20px 0;
        }
        
        .coordinate-card {
            background: linear-gradient(135deg, #a8edea 0%, #fed6e3 100%);
            padding: 20px;
            border-radius: 15px;
            box-shadow: 0 5px 15px rgba(168, 237, 234, 0.3);
            text-align: center;
        }
        
        .coordinate-card h5 {
            color: #c0392b;
            font-size: 1.2em;
            margin-bottom: 15px;
        }
        
        .formula-box {
            background: rgba(255, 255, 255, 0.9);
            padding: 15px;
            border-radius: 10px;
            margin: 15px 0;
            border: 2px solid #3498db;
        }
        
        .volume-types {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
            margin: 20px 0;
        }
        
        .volume-card {
            background: linear-gradient(135deg, #ff9a9e 0%, #fecfef 50%, #fecfef 100%);
            padding: 20px;
            border-radius: 15px;
            box-shadow: 0 5px 15px rgba(255, 154, 158, 0.3);
            text-align: center;
        }
        
        .volume-card h5 {
            color: #c0392b;
            font-size: 1.2em;
            margin-bottom: 15px;
        }
        
        .method-comparison {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 20px;
            margin: 20px 0;
        }
        
        .method-card {
            background: linear-gradient(135deg, #a8edea 0%, #fed6e3 100%);
            padding: 20px;
            border-radius: 15px;
            box-shadow: 0 5px 15px rgba(168, 237, 234, 0.3);
        }
        
        .method-card h5 {
            color: #c0392b;
            font-size: 1.2em;
            margin-bottom: 15px;
            text-align: center;
        }
        
        .volume-display {
            text-align: center;
            margin: 15px 0;
            font-size: 1.2em;
            color: #e74c3c;
            font-weight: bold;
        }

        /* AI提示方块样式 */
        .ai-warning {
            position: fixed;
            top: 20px;
            left: 20px;
            width: 40px;
            height: 40px;
            background: white;
            border-radius: 8px;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            z-index: 1000;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.2);
            transition: all 0.3s ease;
            border: 2px solid #e0e0e0;
        }
        
        .ai-warning:hover {
            transform: scale(1.1);
            box-shadow: 0 6px 20px rgba(0, 0, 0, 0.3);
            border-color: #ff4444;
        }
        
        .ai-warning::before {
            content: '!';
            color: #e74c3c;
            font-size: 20px;
            font-weight: bold;
            font-family: Arial, sans-serif;
        }
        
        .ai-warning-tooltip {
            position: absolute;
            top: 50px;
            left: 0;
            background: rgba(0, 0, 0, 0.9);
            color: white;
            padding: 16px 20px;
            border-radius: 8px;
            font-size: 14px;
            line-height: 1.5;
            opacity: 0;
            visibility: hidden;
            transform: translateY(-10px);
            transition: all 0.3s ease;
            z-index: 1001;
            width: 250px;
            box-shadow: 0 4px 20px rgba(0, 0, 0, 0.3);
        }
        
        .ai-warning-tooltip::before {
            content: '';
            position: absolute;
            top: -8px;
            left: 20px;
            width: 0;
            height: 0;
            border-left: 8px solid transparent;
            border-right: 8px solid transparent;
            border-bottom: 8px solid rgba(0, 0, 0, 0.9);
        }
        
        .ai-warning:hover .ai-warning-tooltip {
            opacity: 1;
            visibility: visible;
            transform: translateY(0);
        }
        
        @media (max-width: 1024px) and (min-width: 769px) {
            .method-comparison {
                grid-template-columns: repeat(2, 1fr);
            }
        }
        
        @media (max-width: 768px) {
            .container {
                padding: 10px;
            }
            
            h1 {
                font-size: 2em;
            }
            
            .section-content {
                padding: 20px;
            }
            
            .definition, .theorem, .example, .practice-problem {
                padding: 20px;
            }
            
            .nav-buttons {
                flex-direction: column;
                gap: 15px;
            }
            
            .controls {
                grid-template-columns: 1fr;
            }
            
            .coordinate-systems {
                grid-template-columns: 1fr;
            }
            
            .volume-types, .method-comparison {
                grid-template-columns: 1fr;
            }

            .ai-warning {
                width: 35px;
                height: 35px;
                top: 15px;
                left: 15px;
            }
            
            .ai-warning::before {
                font-size: 18px;
            }
            
            .ai-warning-tooltip {
                width: 280px;
                font-size: 13px;
                padding: 14px 18px;
            }
        }
    </style>
</head>
<body>
    <!-- AI内容提示 -->
    <div class="ai-warning">
        <div class="ai-warning-tooltip">
            页面内容由AI生成，请谨慎对待。<br>如发现错误，<a href="https://github.com/learn-advanced-math/learn-advanced-math.github.io/issues" target="_blank" style="color: #ff0000">欢迎反馈</a>。
        </div>
    </div>
    
    <div class="container">
        <a href="../index.html" class="back-link">返回章节概览</a>
        
        <header>
            <h1>6.2 平面图形的面积和旋转体的体积</h1>
            <div class="subtitle">Area of Plane Figures and Volume of Solids of Revolution</div>
        </header>
        
        <!-- 直角坐标系下的面积计算 -->
        <div class="content-section">
            <div class="section-header">
                <h2>6.2.1 直角坐标系下的面积计算</h2>
            </div>
            <div class="section-content">
                <div class="definition">
                    <h4>基本面积公式</h4>
                    <p>设曲线 $y = f(x)$ 在区间 $[a, b]$ 上连续且 $f(x) \geq 0$，则由曲线 $y = f(x)$、直线 $x = a$、$x = b$ 和 $x$ 轴所围成的曲边梯形面积为：</p>
                    
                    <div class="math-expression">
                        $$S = \int_a^b f(x) \, dx$$
                    </div>
                    
                    <div class="highlight">
                        <p><strong>注意：</strong>当 $f(x) < 0$ 时，积分值为负，面积应取绝对值。</p>
                    </div>
                </div>
                
                <div class="theorem">
                    <h4>不同情况下的面积公式</h4>
                    
                    <ol>
                        <li><strong>曲线在 $x$ 轴上方：</strong> $S = \int_a^b f(x) \, dx$</li>
                        <li><strong>曲线在 $x$ 轴下方：</strong> $S = -\int_a^b f(x) \, dx = \int_a^b |f(x)| \, dx$</li>
                        <li><strong>曲线跨越 $x$ 轴：</strong> $S = \int_a^b |f(x)| \, dx$</li>
                        <li><strong>两曲线之间的面积：</strong> $S = \int_a^b |f(x) - g(x)| \, dx$</li>
                        <li><strong>参数方程形式：</strong> $S = \int_{\alpha}^{\beta} |y(t) \cdot x'(t)| \, dt$</li>
                    </ol>
                    
                    <div class="formula-box">
                        <p><strong>当积分关于 $y$ 进行时：</strong></p>
                        <div class="math-expression">
                            $$S = \int_c^d |x(y)| \, dy$$
                        </div>
                        <p>其中曲线由 $x = g(y)$ 给出，$y$ 从 $c$ 到 $d$。</p>
                    </div>
                </div>
                
                <div class="interactive-demo">
                    <div class="controls">
                        <div class="control-group">
                            <label for="function-type">选择函数类型：</label>
                            <select id="function-type">
                                <option value="quadratic">二次函数 y = ax² + bx + c</option>
                                <option value="sine">正弦函数 y = a sin(bx + C)</option>
                                <option value="exponential">指数函数 y = ae^(bx)</option>
                                <option value="rational">有理函数 y = 1/(x² + 1)</option>
                            </select>
                        </div>
                        <div class="control-group">
                            <label for="param-a">参数 $a$：</label>
                            <input type="range" id="param-a" min="-2" max="2" value="1" step="0.1">
                            <span id="param-a-value">1</span>
                        </div>
                        <div class="control-group">
                            <label for="param-b">参数 $b$：</label>
                            <input type="range" id="param-b" min="-2" max="2" value="0" step="0.1">
                            <span id="param-b-value">0</span>
                        </div>
                        <div class="control-group">
                            <label for="integration-range">积分区间：</label>
                            <input type="range" id="integration-range" min="1" max="5" value="2" step="0.5">
                            <span id="range-value">[-2, 2]</span>
                        </div>
                    </div>
                    
                    <div style="text-align: center; margin-top: 15px; font-size: 1.2em; color: #e74c3c;">
                        <span>计算得到的面积：<span id="calculated-area">0</span></span>
                    </div>

                    <div class="viz-container" id="rectangular-area-plot"></div>
                </div>
                
                <div class="example">
                    <h4>例1：求抛物线与直线围成的面积</h4>
                    <p>求由抛物线 $y = x^2$ 和直线 $y = 2x$ 所围成的平面图形面积。</p>
                    
                    <div class="solution">
                        <div class="solution-header">解：</div>
                        <p><strong>步骤1：求交点</strong></p>
                        <p>联立方程：$x^2 = 2x$，解得 $x = 0$ 或 $x = 2$</p>
                        <p>交点为 $(0, 0)$ 和 $(2, 4)$</p>
                        
                        <p><strong>步骤2：确定被积函数</strong></p>
                        <p>在区间 $[0, 2]$ 上，$2x \geq x^2$，所以面积为：</p>
                        
                        <div class="math-expression">
                            $$S = \int_0^2 (2x - x^2) \, dx$$
                        </div>
                        
                        <p><strong>步骤3：计算积分</strong></p>
                        $$S = \int_0^2 (2x - x^2) \, dx = \left[x^2 - \frac{x^3}{3}\right]_0^2$$
                        $$= \left(4 - \frac{8}{3}\right) - 0 = \frac{12 - 8}{3} = \frac{4}{3}$$
                    </div>
                </div>
                
                <div class="example">
                    <h4>例2：参数方程表示的曲线面积</h4>
                    <p>求由摆线 $x = a(t - \sin t)$，$y = a(1 - \cos t)$ ($0 \leq t \leq 2\pi$) 与 $x$ 轴所围成的面积。</p>
                    
                    <div class="solution">
                        <div class="solution-header">解：</div>
                        <p>由于 $x'(t) = a(1 - \cos t)$，$y(t) = a(1 - \cos t)$，所以：</p>
                        
                        $$S = \int_0^{2\pi} y(t) \cdot x'(t) \, dt = \int_0^{2\pi} a(1 - \cos t) \cdot a(1 - \cos t) \, dt$$
                        
                        $$= a^2 \int_0^{2\pi} (1 - \cos t)^2 \, dt$$
                        
                        $$= a^2 \int_0^{2\pi} (1 - 2\cos t + \cos^2 t) \, dt$$
                        
                        <p>利用 $\cos^2 t = \frac{1 + \cos 2t}{2}$：</p>
                        
                        $$= a^2 \int_0^{2\pi} \left(1 - 2\cos t + \frac{1 + \cos 2t}{2}\right) dt$$
                        
                        $$= a^2 \int_0^{2\pi} \left(\frac{3}{2} - 2\cos t + \frac{\cos 2t}{2}\right) dt$$
                        
                        $$= a^2 \left[\frac{3t}{2} - 2\sin t + \frac{\sin 2t}{4}\right]_0^{2\pi} = 3\pi a^2$$
                    </div>
                </div>
            </div>
        </div>
        
        <!-- 极坐标系下的面积计算 -->
        <div class="content-section">
            <div class="section-header">
                <h2>6.2.2 极坐标系下的面积计算</h2>
            </div>
            <div class="section-content">
                <div class="definition">
                    <h4>极坐标系中的面积元素</h4>
                    <p>在极坐标系中，考虑极径为 $\rho = f(\theta)$ 的曲线，从 $\theta = \alpha$ 到 $\theta = \beta$ 围成的扇形区域。</p>
                    
                    <div class="highlight">
                        <p><strong>面积元素：</strong>在极坐标系中，微小扇形的面积元素为：</p>
                        <div class="math-expression">
                            $$dS = \frac{1}{2}\rho^2 d\theta$$
                        </div>
                    </div>
                    
                    <p>因此，由极曲线 $\rho = f(\theta)$ 在角度区间 $[\alpha, \beta]$ 内围成的面积为：</p>
                    
                    <div class="math-expression">
                        $$S = \int_\alpha^\beta \frac{1}{2}[\rho(\theta)]^2 d\theta = \frac{1}{2}\int_\alpha^\beta [f(\theta)]^2 d\theta$$
                    </div>
                </div>
                
                <div class="theorem">
                    <h4>常见极坐标图形的面积公式</h4>
                    
                    <div class="coordinate-systems">
                        <div class="coordinate-card">
                            <h5>圆心在原点的圆</h5>
                            <p>$\rho = R$</p>
                            <div class="math-expression">$$S = \pi R^2$$</div>
                        </div>
                        
                        <div class="coordinate-card">
                            <h5>心形线</h5>
                            <p>$\rho = a(1 + \cos\theta)$</p>
                            <div class="math-expression">$$S = \frac{3\pi a^2}{2}$$</div>
                        </div>
                        
                        <div class="coordinate-card">
                            <h5>三叶玫瑰线</h5>
                            <p>$\rho = a\cos(3\theta)$</p>
                            <div class="math-expression">$$S = \frac{\pi a^2}{4}$$</div>
                        </div>
                        
                        <div class="coordinate-card">
                            <h5>阿基米德螺线</h5>
                            <p>$\rho = a\theta$ （一圈）</p>
                            <div class="math-expression">$$S = \frac{4\pi^3 a^2}{3}$$</div>
                        </div>
                    </div>
                    
                    <div class="formula-box">
                        <p><strong>两曲线间的面积：</strong></p>
                        <p>当有两条极曲线 $\rho_1 = f_1(\theta)$ 和 $\rho_2 = f_2(\theta)$ 且 $\rho_2 \geq \rho_1 \geq 0$ 时：</p>
                        <div class="math-expression">
                            $$S = \frac{1}{2}\int_\alpha^\beta [\rho_2^2(\theta) - \rho_1^2(\theta)] d\theta$$
                        </div>
                    </div>
                </div>
                
                <div class="interactive-demo">
                    <div class="controls">
                        <div class="control-group">
                            <label for="polar-curve-type">选择极坐标曲线：</label>
                            <select id="polar-curve-type">
                                <option value="circle">圆 ρ = R</option>
                                <option value="cardioid">心形线 ρ = a(1 + cos θ)</option>
                                <option value="rose3">三叶玫瑰 ρ = a cos(3θ)</option>
                                <option value="rose4">四叶玫瑰 ρ = a cos(2θ)</option>
                                <option value="spiral">螺线 ρ = aθ</option>
                                <option value="lemniscate">双纽线 ρ² = a²cos(2θ)</option>
                            </select>
                        </div>
                        <div class="control-group">
                            <label for="polar-param-a">参数 $a$：</label>
                            <input type="range" id="polar-param-a" min="0.5" max="3" value="1" step="0.1">
                            <span id="polar-param-a-value">1</span>
                        </div>
                        <div class="control-group">
                            <label for="theta-range">角度范围（圈数）：</label>
                            <input type="range" id="theta-range" min="0" max="1" value="1" step="0.01">
                            <span id="theta-range-value">2π</span>
                        </div>
                        <div class="control-group">
                            <label for="show-area">显示面积填充：</label>
                            <input type="checkbox" id="show-area" checked>
                        </div>
                    </div>
                    
                    <div style="text-align: center; margin-top: 15px; font-size: 1.2em; color: #e74c3c;">
                        <span>计算得到的面积：<span id="polar-calculated-area">0</span></span>
                    </div>

                    <div class="viz-container" id="polar-area-plot"></div>
                </div>
                
                <div class="example">
                    <h4>例3：心形线的面积</h4>
                    <p>求心形线 $\rho = a(1 + \cos\theta)$ 所围成的面积。</p>
                    
                    <div class="solution">
                        <div class="solution-header">解：</div>
                        <p>心形线是一个完整的闭合曲线，$\theta$ 从 $0$ 到 $2\pi$：</p>
                        
                        $$S = \frac{1}{2}\int_0^{2\pi} [a(1 + \cos\theta)]^2 d\theta$$
                        
                        $$= \frac{a^2}{2}\int_0^{2\pi} (1 + \cos\theta)^2 d\theta$$
                        
                        $$= \frac{a^2}{2}\int_0^{2\pi} (1 + 2\cos\theta + \cos^2\theta) d\theta$$
                        
                        <p>利用 $\cos^2\theta = \frac{1 + \cos(2\theta)}{2}$：</p>
                        
                        $$= \frac{a^2}{2}\int_0^{2\pi} \left(1 + 2\cos\theta + \frac{1 + \cos(2\theta)}{2}\right) d\theta$$
                        
                        $$= \frac{a^2}{2}\int_0^{2\pi} \left(\frac{3}{2} + 2\cos\theta + \frac{\cos(2\theta)}{2}\right) d\theta$$
                        
                        $$= \frac{a^2}{2}\left[\frac{3\theta}{2} + 2\sin\theta + \frac{\sin(2\theta)}{4}\right]_0^{2\pi}$$
                        
                        $$= \frac{a^2}{2} \cdot \frac{3 \cdot 2\pi}{2} = \frac{3\pi a^2}{2}$$
                    </div>
                </div>
            </div>
        </div>
        
        <!-- 旋转体的体积计算 -->
        <div class="content-section">
            <div class="section-header">
                <h2>6.2.3 旋转体的体积计算</h2>
            </div>
            <div class="section-content">
                <div class="definition">
                    <h4>旋转体的定义</h4>
                    <p>将平面图形绕该平面内的一条直线旋转一周所形成的立体称为<strong>旋转体</strong>，这条直线称为<strong>旋转轴</strong>。</p>
                    
                    <div class="highlight">
                        <p><strong>体积元素：</strong>旋转体的体积可以用定积分来计算，关键是找到体积元素。</p>
                    </div>
                </div>
                
                <div class="theorem">
                    <h4>旋转体体积的计算公式</h4>
                    
                    <div class="method-comparison">
                        <div class="method-card">
                            <h5>圆盘法（垂直截面法）</h5>
                            <p>当区域绕 $x$ 轴旋转时，横截面为圆形：</p>
                            <div class="math-expression">
                                $$V = \pi \int_a^b [f(x)]^2 dx$$
                            </div>
                            <p>当区域绕 $y$ 轴旋转时：</p>
                            <div class="math-expression">
                                $$V = \pi \int_c^d [g(y)]^2 dy$$
                            </div>
                        </div>
                        
                        <div class="method-card">
                            <h5>圆环法（环状截面法）</h5>
                            <p>当区域被两条曲线围成并绕轴旋转时：</p>
                            <div class="math-expression">
                                $$V = \pi \int_a^b [R(x)]^2 - [r(x)]^2 dx$$
                            </div>
                            <p>其中 $R(x)$ 为外半径，$r(x)$ 为内半径。</p>
                        </div>
                        
                        <div class="method-card">
                            <h5>柱壳法（旋转壳法）</h5>
                            <p>当绕平行于函数轴的直线旋转时：</p>
                            <div class="math-expression">
                                $$V = 2\pi \int_a^b x \cdot f(x) dx$$
                            </div>
                            <p>（绕 $y$ 轴旋转）</p>
                        </div>
                    </div>
                    
                    <div class="formula-box">
                        <p><strong>参数方程情况：</strong></p>
                        <p>当曲线由参数方程 $x = x(t)$，$y = y(t)$ 给出时（绕 $x$ 轴旋转）：</p>
                        <div class="math-expression">
                            $$V = \pi \int_{\alpha}^{\beta} [y(t)]^2 \cdot |x'(t)| dt$$
                        </div>
                    </div>
                </div>
                
                <div class="definition">
                    <h4>截面法的基本思想</h4>
                    <p>如果一个立体在垂直于某一坐标轴的平面上的截面面积是该坐标的已知函数，则可以用定积分求出立体的体积。</p>
                    
                    <div class="highlight">
                        <p><strong>基本公式：</strong>设立体在垂直于 $x$ 轴、坐标为 $x$ 的平面上的截面面积为 $S(x)$，则立体在区间 $[a, b]$ 上的体积为：</p>
                        <div class="math-expression">
                            $$V = \int_a^b S(x) dx$$
                        </div>
                    </div>
                </div>
                
                <div class="theorem">
                    <h4>常见的截面形状</h4>
                    
                    <div class="volume-types">
                        <div class="volume-card">
                            <h5>矩形截面</h5>
                            <p>截面为矩形，长为 $l(x)$，宽为 $w(x)$</p>
                            <div class="math-expression">$$S(x) = l(x) \cdot w(x)$$</div>
                        </div>
                        
                        <div class="volume-card">
                            <h5>三角形截面</h5>
                            <p>截面为三角形，底为 $b(x)$，高为 $h(x)$</p>
                            <div class="math-expression">$$S(x) = \frac{1}{2}b(x) \cdot h(x)$$</div>
                        </div>
                        
                        <div class="volume-card">
                            <h5>圆形截面</h5>
                            <p>截面为圆形，半径为 $r(x)$</p>
                            <div class="math-expression">$$S(x) = \pi [r(x)]^2$$</div>
                        </div>
                        
                        <div class="volume-card">
                            <h5>半圆形截面</h5>
                            <p>截面为半圆，半径为 $r(x)$</p>
                            <div class="math-expression">$$S(x) = \frac{\pi}{2}[r(x)]^2$$</div>
                        </div>
                        
                        <div class="volume-card">
                            <h5>等腰直角三角形</h5>
                            <p>截面为等腰直角三角形，直角边长为 $a(x)$</p>
                            <div class="math-expression">$$S(x) = \frac{1}{2}[a(x)]^2$$</div>
                        </div>
                        
                        <div class="volume-card">
                            <h5>正方形截面</h5>
                            <p>截面为正方形，边长为 $a(x)$</p>
                        </div>
                    </div>
                </div>
                
                <div class="interactive-demo">
                    <div class="controls compact">
                        <div class="control-group">
                            <label for="function-type-vol">选择函数类型：</label>
                            <select id="function-type-vol">
                                <option value="linear">直线 y = ax + b</option>
                                <option value="parabola">抛物线 y = ax²</option>
                                <option value="sine">正弦曲线 y = a sin(x)</option>
                                <option value="exponential">指数曲线 y = ae^x</option>
                                <option value="sqrt">根号函数 y = a√x</option>
                            </select>
                        </div>
                        <div class="control-group">
                            <label for="param-a-vol">参数 $a$：</label>
                            <input type="range" id="param-a-vol" min="0.5" max="3" value="1" step="0.1">
                            <span id="param-a-value-vol">1</span>
                        </div>
                        <div class="control-group">
                            <label for="param-b-vol">参数 $b$：</label>
                            <input type="range" id="param-b-vol" min="-1" max="2" value="0" step="0.1">
                            <span id="param-b-value-vol">0</span>
                        </div>
                        <div class="control-group">
                            <label for="rotation-axis">旋转轴：</label>
                            <select id="rotation-axis">
                                <option value="x-axis">x轴</option>
                                <option value="y-axis">y轴</option>
                            </select>
                        </div>
                        <div class="control-group">
                            <label for="integration-bounds-vol">积分区间：</label>
                            <input type="range" id="integration-bounds-vol" min="1" max="4" value="2" step="0.5">
                            <span id="bounds-value-vol">[0, 2]</span>
                        </div>
                    </div>
                    
                    <div class="viz-container" id="rotation-volume-plot"></div>
                </div>
                
                <div class="example">
                    <h4>例4：抛物线绕x轴旋转的体积</h4>
                    <p>求由抛物线 $y = x^2$、直线 $x = 0$、$x = 2$ 和 $x$ 轴围成的图形绕 $x$ 轴旋转一周所得旋转体的体积。</p>
                    
                    <div class="solution">
                        <div class="solution-header">解：</div>
                        <p>使用圆盘法，旋转体在 $x$ 处的截面是半径为 $y = x^2$ 的圆。</p>
                        
                        <div class="math-expression">
                            $$V = \pi \int_0^2 (x^2)^2 dx = \pi \int_0^2 x^4 dx$$
                        </div>
                        
                        $$= \pi \left[\frac{x^5}{5}\right]_0^2 = \pi \cdot \frac{2^5}{5} = \frac{32\pi}{5}$$
                    </div>
                </div>
                
                <div class="example">
                    <h4>例5：柱壳法计算体积</h4>
                    <p>求由曲线 $y = x^2$、$x = 0$、$x = 1$、$y = 0$ 围成的区域绕 $y$ 轴旋转所得旋转体的体积。</p>
                    
                    <div class="solution">
                        <div class="solution-header">解：</div>
                        <p>使用柱壳法，在距离 $y$ 轴 $x$ 处取厚度为 $dx$ 的薄片。</p>
                        <p>薄片旋转后形成半径为 $x$，高为 $x^2$ 的圆柱壳。</p>
                        
                        <div class="math-expression">
                            $$V = 2\pi \int_0^1 x \cdot x^2 dx = 2\pi \int_0^1 x^3 dx$$
                        </div>
                        
                        $$= 2\pi \left[\frac{x^4}{4}\right]_0^1 = 2\pi \cdot \frac{1}{4} = \frac{\pi}{2}$$
                    </div>
                </div>
                
                <div class="example">
                    <h4>例6：楔形立体的体积</h4>
                    <p>一个立体的底面是半径为 $a$ 的圆，所有垂直于某一直径的截面都是等边三角形，求此立体的体积。</p>
                    
                    <div class="solution">
                        <div class="solution-header">解：</div>
                        <p>以圆心为原点，垂直截面所对应的直径为 $x$ 轴建立坐标系。</p>
                        <p>圆的方程为 $x^2 + y^2 = a^2$，在 $x = t$（$-a \leq t \leq a$）处：</p>
                        <p>截面是底边长为 $2\sqrt{a^2 - t^2}$ 的等边三角形。</p>
                        
                        <p>等边三角形的面积为：</p>
                        <div class="math-expression">
                            $$S(t) = \frac{\sqrt{3}}{4} \cdot [2\sqrt{a^2 - t^2}]^2 = \sqrt{3}(a^2 - t^2)$$
                        </div>
                        
                        <p>因此立体体积为：</p>
                        $$V = \int_{-a}^a \sqrt{3}(a^2 - t^2) dt = \sqrt{3} \int_{-a}^a (a^2 - t^2) dt$$
                        
                        $$= \sqrt{3} \left[a^2 t - \frac{t^3}{3}\right]_{-a}^a = \sqrt{3} \cdot \frac{4a^3}{3} = \frac{4\sqrt{3}a^3}{3}$$
                    </div>
                </div>
            </div>
        </div>
        
        <!-- 平面曲线的弧长 -->
        <div class="content-section">
            <div class="section-header">
                <h2>6.2.4 平面曲线的弧长</h2>
            </div>
            <div class="section-content">
                <div class="definition">
                    <h4>弧长的概念</h4>
                    <p>平面曲线的<strong>弧长</strong>是指曲线段的长度。对于光滑曲线，可以用定积分来精确计算其弧长。</p>
                    
                    <div class="highlight">
                        <p><strong>弧长元素：</strong>弧长的计算基于微分弧长元素的概念，通过积分求和得到整条曲线的长度。</p>
                    </div>
                </div>
                
                <div class="theorem">
                    <h4>弧长的计算公式</h4>
                    
                    <div class="method-comparison">
                        <div class="method-card">
                            <h5>直角坐标形式</h5>
                            <p>当曲线由 $y = f(x)$ 给出，在区间 $[a, b]$ 上：</p>
                            <div class="math-expression">
                                $$s = \int_a^b \sqrt{1 + [f'(x)]^2} \, dx$$
                            </div>
                            <p>或当曲线由 $x = g(y)$ 给出，在区间 $[c, d]$ 上：</p>
                            <div class="math-expression">
                                $$s = \int_c^d \sqrt{1 + [g'(y)]^2} \, dy$$
                            </div>
                        </div>
                        
                        <div class="method-card">
                            <h5>参数方程形式</h5>
                            <p>当曲线由参数方程给出：$x = x(t)$，$y = y(t)$，$t \in [\alpha, \beta]$</p>
                            <div class="math-expression">
                                $$s = \int_{\alpha}^{\beta} \sqrt{[x'(t)]^2 + [y'(t)]^2} \, dt$$
                            </div>
                            <p>其中 $x'(t)$ 和 $y'(t)$ 连续且不同时为零。</p>
                        </div>
                        
                        <div class="method-card">
                            <h5>极坐标形式</h5>
                            <p>当曲线由极坐标方程 $r = r(\theta)$ 给出，$\theta \in [\alpha, \beta]$：</p>
                            <div class="math-expression">
                                $$s = \int_{\alpha}^{\beta} \sqrt{[r(\theta)]^2 + [r'(\theta)]^2} \, d\theta$$
                            </div>
                        </div>
                    </div>
                    
                    <div class="formula-box">
                        <p><strong>微分弧长公式：</strong></p>
                        <div class="math-expression">
                            $$ds = \sqrt{(dx)^2 + (dy)^2} = \sqrt{1 + (y')^2} \, dx$$
                        </div>
                        <p>这是弧长积分公式的基础。</p>
                    </div>
                </div>
                
                <div class="definition">
                    <h4>弧长积分的推导</h4>
                    <p>考虑曲线上相邻两点 $(x, y)$ 和 $(x + \Delta x, y + \Delta y)$，它们之间的弦长近似为：</p>
                    
                    <div class="math-expression">
                        $$\Delta s \approx \sqrt{(\Delta x)^2 + (\Delta y)^2}$$
                    </div>
                    
                    <p>当 $\Delta x \to 0$ 时，有 $\Delta y \approx y' \Delta x$，因此：</p>
                    
                    <div class="math-expression">
                        $$ds = \lim_{\Delta x \to 0} \sqrt{(\Delta x)^2 + (\Delta y)^2} = \sqrt{1 + (y')^2} \, dx$$
                    </div>
                </div>
                
                <div class="example">
                    <h4>例7：抛物线的弧长</h4>
                    <p>求抛物线 $y = x^2$ 从 $x = 0$ 到 $x = 1$ 这一段的弧长。</p>
                    
                    <div class="solution">
                        <div class="solution-header">解：</div>
                        <p>由弧长公式，$y = x^2$，$y' = 2x$</p>
                        
                        <div class="math-expression">
                            $$s = \int_0^1 \sqrt{1 + (2x)^2} \, dx = \int_0^1 \sqrt{1 + 4x^2} \, dx$$
                        </div>
                        
                        <p>令 $x = \frac{1}{2}\tan t$，则 $dx = \frac{1}{2}\sec^2 t \, dt$，当 $x = 0$ 时 $t = 0$，当 $x = 1$ 时 $t = \arctan 2$</p>
                        
                        $$s = \int_0^{\arctan 2} \sqrt{1 + \tan^2 t} \cdot \frac{1}{2}\sec^2 t \, dt = \frac{1}{2} \int_0^{\arctan 2} \sec^3 t \, dt$$
                        
                        <p>使用分部积分计算 $\int \sec^3 t \, dt$：</p>
                        
                        $$s = \frac{1}{4}[\sec t \tan t + \ln|\sec t + \tan t|]_0^{\arctan 2}$$
                        
                        $$= \frac{1}{4}[\sqrt{5} \cdot 2 + \ln(\sqrt{5} + 2)] = \frac{\sqrt{5}}{2} + \frac{1}{4}\ln(\sqrt{5} + 2)$$
                    </div>
                </div>
                
                <div class="example">
                    <h4>例8：参数方程曲线的弧长</h4>
                    <p>求由参数方程 $x = a(t - \sin t)$，$y = a(1 - \cos t)$（$0 \leq t \leq 2\pi$，$a > 0$）确定的摆线的弧长。</p>
                    
                    <div class="solution">
                        <div class="solution-header">解：</div>
                        <p>计算参数方程的导数：</p>
                        $$x'(t) = a(1 - \cos t), \quad y'(t) = a \sin t$$
                        
                        <p>弧长微元为：</p>
                        <div class="math-expression">
                            $$ds = \sqrt{[x'(t)]^2 + [y'(t)]^2} \, dt$$
                        </div>
                        
                        $$= \sqrt{a^2(1 - \cos t)^2 + a^2 \sin^2 t} \, dt$$
                        
                        $$= a\sqrt{(1 - \cos t)^2 + \sin^2 t} \, dt$$
                        
                        $$= a\sqrt{1 - 2\cos t + \cos^2 t + \sin^2 t} \, dt = a\sqrt{2 - 2\cos t} \, dt$$
                        
                        <p>使用三角恒等式 $1 - \cos t = 2\sin^2(t/2)$：</p>
                        
                        $$ds = a\sqrt{4\sin^2(t/2)} \, dt = 2a\sin(t/2) \, dt \quad (0 \leq t \leq 2\pi)$$
                        
                        <p>因此弧长为：</p>
                        $$s = \int_0^{2\pi} 2a\sin(t/2) \, dt = 2a \cdot 2 \left[-\cos(t/2)\right]_0^{2\pi} = 4a[1 - (-1)] = 8a$$
                    </div>
                </div>
                
                <div class="example">
                    <h4>例9：极坐标曲线的弧长</h4>
                    <p>求心形线 $r = a(1 + \cos\theta)$（$a > 0$）的全长。</p>
                    
                    <div class="solution">
                        <div class="solution-header">解：</div>
                        <p>对于极坐标曲线 $r = a(1 + \cos\theta)$，有：</p>
                        $$r'(\theta) = -a\sin\theta$$
                        
                        <p>使用极坐标弧长公式：</p>
                        <div class="math-expression">
                            $$s = \int_0^{2\pi} \sqrt{r^2 + (r')^2} \, d\theta$$
                        </div>
                        
                        $$= \int_0^{2\pi} \sqrt{a^2(1 + \cos\theta)^2 + a^2\sin^2\theta} \, d\theta$$
                        
                        $$= a\int_0^{2\pi} \sqrt{(1 + \cos\theta)^2 + \sin^2\theta} \, d\theta$$
                        
                        $$= a\int_0^{2\pi} \sqrt{1 + 2\cos\theta + \cos^2\theta + \sin^2\theta} \, d\theta$$
                        
                        $$= a\int_0^{2\pi} \sqrt{2 + 2\cos\theta} \, d\theta = a\sqrt{2}\int_0^{2\pi} \sqrt{1 + \cos\theta} \, d\theta$$
                        
                        <p>使用 $1 + \cos\theta = 2\cos^2(\theta/2)$：</p>
                        
                        $$s = a\sqrt{2}\int_0^{2\pi} \sqrt{2\cos^2(\theta/2)} \, d\theta = a\sqrt{2}\int_0^{2\pi} \sqrt{2}|\cos(\theta/2)| \, d\theta$$
                        
                        <p>由于在 $[0, \pi]$ 内 $\cos(\theta/2) \geq 0$，在 $[\pi, 2\pi]$ 内 $\cos(\theta/2) \leq 0$：</p>
                        
                        $$s = 2a\left[\int_0^{\pi} \cos(\theta/2) \, d\theta + \int_{\pi}^{2\pi} (-\cos(\theta/2)) \, d\theta\right]$$
                        
                        $$= 2a\left[2\sin(\theta/2)\Big|_0^{\pi} - 2\sin(\theta/2)\Big|_{\pi}^{2\pi}\right]$$
                        
                        $$= 2a\left[2(\sin(\pi/2) - \sin(0)) - 2(\sin(\pi) - \sin(\pi/2))\right]$$
                        
                        $$= 2a\left[2(1 - 0) - 2(0 - 1)\right] = 2a[2 + 2] = 8a$$
                        
                        <p>注意：由于心形线关于极轴对称，也可以计算上半部分然后乘以2。</p>
                    </div>
                </div>
                
                <div class="theorem">
                    <h4>常见曲线的弧长公式</h4>
                    
                    <div class="formula-collection">
                        <div class="formula-card">
                            <h5>圆弧</h5>
                            <p>半径为 $r$ 的圆弧，圆心角为 $\theta$（弧度）</p>
                            <div class="math-expression">$$s = r\theta$$</div>
                        </div>
                        
                        <div class="formula-card">
                            <h5>直线段</h5>
                            <p>从点 $(x_1, y_1)$ 到点 $(x_2, y_2)$ 的直线段</p>
                            <div class="math-expression">$$s = \sqrt{(x_2-x_1)^2 + (y_2-y_1)^2}$$</div>
                        </div>
                        
                        <div class="formula-card">
                            <h5>悬链线</h5>
                            <p>$y = a\cosh(x/a)$，从 $x = -b$ 到 $x = b$</p>
                            <div class="math-expression">$$s = 2a\sinh(b/a)$$</div>
                        </div>
                        
                        <div class="formula-card">
                            <h5>摆线一拱</h5>
                            <p>$x = a(t - \sin t)$，$y = a(1 - \cos t)$，$0 \leq t \leq 2\pi$</p>
                            <div class="math-expression">$$s = 8a$$</div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        
        <div class="nav-buttons">
            <a href="6.1.html" class="btn prev">上一节：6.1 定积分的元素法</a>
            <a href="6.3.html" class="btn next">下一节：6.3 定积分在物理学上的应用</a>
        </div>
        
        <footer>
            <p>&copy; 2025 高等数学复习指南 - 6.2 定积分在几何学上的应用</p>
        </footer>
    </div>

    <script>
        // 直角坐标系面积可视化
        function updateRectangularAreaPlot() {
            const functionType = document.getElementById('function-type').value;
            const paramA = parseFloat(document.getElementById('param-a').value);
            const paramB = parseFloat(document.getElementById('param-b').value);
            const range = parseFloat(document.getElementById('integration-range').value);
            
            // 更新参数显示
            document.getElementById('param-a-value').textContent = paramA;
            document.getElementById('param-b-value').textContent = paramB;
            document.getElementById('range-value').textContent = `[-${range}, ${range}]`;
            
            // 生成数据点
            const x = [];
            const y = [];
            const xFill = [];
            const yFill = [];
            
            const step = 0.01;
            for (let xi = -range - 1; xi <= range + 1; xi += step) {
                let yi;
                switch(functionType) {
                    case 'quadratic':
                        yi = paramA * xi * xi + paramB * xi + 0.5;
                        break;
                    case 'sine':
                        yi = (paramA || 1) * Math.sin((paramB || 1) * xi);
                        break;
                    case 'exponential':
                        yi = (paramA || 0.5) * Math.exp((paramB || 0.5) * xi);
                        if (yi > 10) yi = 10; // 限制最大值
                        break;
                    case 'rational':
                        yi = 1 / (xi * xi + 1);
                        break;
                }
                x.push(xi);
                y.push(yi);
                
                // 填充区域
                if (xi >= -range && xi <= range) {
                    xFill.push(xi);
                    yFill.push(yi);
                }
            }
            
            // 计算面积（数值积分）
            let area = 0;
            for (let i = 0; i < xFill.length - 1; i++) {
                area += Math.abs(yFill[i]) * (xFill[i+1] - xFill[i]);
            }
            document.getElementById('calculated-area').textContent = area.toFixed(3);
            
            // 绘图
            const traces = [
                {
                    x: x,
                    y: y,
                    type: 'scatter',
                    mode: 'lines',
                    name: '函数曲线',
                    line: { color: '#e74c3c', width: 3 }
                },
                {
                    x: xFill.concat([range, -range]),
                    y: yFill.concat([0, 0]),
                    fill: 'toself',
                    type: 'scatter',
                    mode: 'none',
                    name: '面积',
                    fillcolor: 'rgba(52, 152, 219, 0.3)'
                }
            ];
            
            const layout = {
                title: '直角坐标系下的面积计算',
                xaxis: { title: 'x', zeroline: true },
                yaxis: { title: 'y', zeroline: true },
                showlegend: true,
                margin: { l: 50, r: 50, b: 50, t: 80 }
            };
            
            Plotly.newPlot('rectangular-area-plot', traces, layout, {responsive: true});
        }
        
        // 极坐标系面积可视化
        function updatePolarAreaPlot() {
            const curveType = document.getElementById('polar-curve-type').value;
            const paramA = parseFloat(document.getElementById('polar-param-a').value);
            const thetaRange = parseFloat(document.getElementById('theta-range').value);
            const showArea = document.getElementById('show-area').checked;
            
            // 更新参数显示
            document.getElementById('polar-param-a-value').textContent = paramA;
            
            // 更新角度范围显示
            document.getElementById('theta-range-value').textContent = `${thetaRange}×2π`;
            
            // 生成数据点
            const theta = [];
            const r = [];
            
            let thetaMax, step;
            
            thetaMax = thetaRange * 2 * Math.PI;
            step = 0.01;
            
            for (let t = 0; t <= thetaMax; t += step) {
                let rho;
                switch(curveType) {
                    case 'circle':
                        rho = paramA;
                        break;
                    case 'cardioid':
                        rho = paramA * (1 + Math.cos(t));
                        break;
                    case 'rose3':
                        rho = paramA * Math.cos(3 * t);
                        if (rho < 0) rho = 0; // 只显示正值部分
                        break;
                    case 'rose4':
                        rho = paramA * Math.abs(Math.cos(2 * t));
                        break;
                    case 'spiral':
                        rho = paramA * t;
                        break;
                    case 'lemniscate':
                        const cosValue = Math.cos(2 * t);
                        rho = cosValue >= 0 ? paramA * Math.sqrt(cosValue) : 0;
                        break;
                }
                
                if (rho >= 0) {
                    theta.push(t);
                    r.push(rho);
                }
            }
            
            // 计算面积
            let area = 0;
            for (let i = 0; i < r.length - 1; i++) {
                const deltaTheta = theta[i+1] - theta[i];
                area += 0.5 * r[i] * r[i] * deltaTheta;
            }
            document.getElementById('polar-calculated-area').textContent = area.toFixed(3);
            
            // 使用极坐标绘图
            const polarTrace = {
                type: 'scatterpolar',
                mode: 'lines',
                r: r,
                theta: theta.map(t => t * 180 / Math.PI), // 转换为度数
                name: '极坐标曲线',
                line: { color: '#e74c3c', width: 3 }
            };
            
            const traces = [polarTrace];
            
            // 添加填充面积
            if (showArea && r.length > 0) {
                const fillTrace = {
                    type: 'scatterpolar',
                    mode: 'none',
                    r: [0].concat(r).concat([0]),
                    theta: [0].concat(theta.map(t => t * 180 / Math.PI)).concat([0]),
                    fill: 'toself',
                    name: '面积',
                    fillcolor: 'rgba(52, 152, 219, 0.3)',
                    line: { color: 'rgba(52, 152, 219, 0)' }
                };
                traces.push(fillTrace);
            }
            
            const layout = {
                title: '极坐标系下的面积计算',
                polar: {
                    radialaxis: {
                        visible: true,
                        range: [0, Math.max(...r) * 1.1]
                    },
                    angularaxis: {
                        visible: true,
                        direction: 'counterclockwise',
                        rotation: 0
                    }
                },
                showlegend: true,
                margin: { l: 50, r: 50, b: 50, t: 80 }
            };
            
            Plotly.newPlot('polar-area-plot', traces, layout, {responsive: true});
        }
        
        // 旋转体体积可视化
        function updateRotationVolumeView() {
            const functionType = document.getElementById('function-type-vol').value;
            const paramA = parseFloat(document.getElementById('param-a-vol').value);
            const paramB = parseFloat(document.getElementById('param-b-vol').value);
            const rotationAxis = document.getElementById('rotation-axis').value;
            const bounds = parseFloat(document.getElementById('integration-bounds-vol').value);
            const showSolid = true; // 始终显示旋转体
            
            // 更新参数显示
            document.getElementById('param-a-value-vol').textContent = paramA;
            document.getElementById('param-b-value-vol').textContent = paramB;
            document.getElementById('bounds-value-vol').textContent = `[0, ${bounds}]`;
            
            // 生成原函数数据
            const x = [];
            const y = [];
            const step = 0.05;
            
            for (let xi = 0; xi <= bounds; xi += step) {
                let yi;
                switch(functionType) {
                    case 'linear':
                        yi = paramA * xi + paramB;
                        break;
                    case 'parabola':
                        yi = paramA * xi * xi;
                        break;
                    case 'sine':
                        yi = paramA * Math.sin(xi);
                        break;
                    case 'exponential':
                        yi = paramA * Math.exp(0.5 * xi);
                        if (yi > 10) yi = 10;
                        break;
                    case 'sqrt':
                        yi = paramA * Math.sqrt(xi);
                        break;
                }
                
                if (yi >= 0) {
                    x.push(xi);
                    y.push(yi);
                }
            }
            

            
            // 生成旋转体的3D数据
            const traces = [];
            
            // 原始曲线
            traces.push({
                x: x,
                y: y,
                z: Array(x.length).fill(0),
                type: 'scatter3d',
                mode: 'lines',
                name: '原曲线',
                line: { color: '#e74c3c', width: 5 }
            });
            
            if (showSolid) {
                // 生成旋转体表面
                const theta = [];
                const xSurf = [];
                const ySurf = [];
                const zSurf = [];
                
                const thetaStep = Math.PI / 20;
                for (let t = 0; t <= 2 * Math.PI; t += thetaStep) {
                    theta.push(t);
                }
                
                for (let i = 0; i < x.length; i++) {
                    const row_x = [];
                    const row_y = [];
                    const row_z = [];
                    
                    for (let j = 0; j < theta.length; j++) {
                        if (rotationAxis === 'x-axis') {
                            // 绕x轴旋转：y坐标作为半径，x坐标不变
                            row_x.push(x[i]);
                            row_y.push(y[i] * Math.cos(theta[j]));
                            row_z.push(y[i] * Math.sin(theta[j]));
                        } else {
                            // 绕y轴旋转：x坐标作为半径，y坐标不变
                            row_x.push(x[i] * Math.cos(theta[j]));
                            row_y.push(y[i]);
                            row_z.push(x[i] * Math.sin(theta[j]));
                        }
                    }
                    
                    xSurf.push(row_x);
                    ySurf.push(row_y);
                    zSurf.push(row_z);
                }
                
                traces.push({
                    x: xSurf,
                    y: ySurf,
                    z: zSurf,
                    type: 'surface',
                    name: '旋转体',
                    colorscale: [[0, 'rgba(52, 152, 219, 0.6)'], [1, 'rgba(52, 152, 219, 0.8)']],
                    showscale: false,
                    opacity: 0.7
                });
            }
            
            // 坐标轴
            const axisLength = Math.max(...x, ...y) * 1.2;
            
            // X轴
            traces.push({
                x: [0, axisLength],
                y: [0, 0],
                z: [0, 0],
                type: 'scatter3d',
                mode: 'lines',
                name: 'X轴',
                line: { color: 'red', width: 3 },
                showlegend: false
            });
            
            // Y轴
            traces.push({
                x: [0, 0],
                y: [0, axisLength],
                z: [0, 0],
                type: 'scatter3d',
                mode: 'lines',
                name: 'Y轴',
                line: { color: 'green', width: 3 },
                showlegend: false
            });
            
            // Z轴
            traces.push({
                x: [0, 0],
                y: [0, 0],
                z: [0, axisLength],
                type: 'scatter3d',
                mode: 'lines',
                name: 'Z轴',
                line: { color: 'blue', width: 3 },
                showlegend: false
            });
            
            const layout = {
                title: `旋转体体积可视化 - 绕${rotationAxis === 'x-axis' ? 'X' : 'Y'}轴旋转`,
                scene: {
                    xaxis: { title: 'X' },
                    yaxis: { title: 'Y' },
                    zaxis: { title: 'Z' },
                    aspectmode: 'cube'
                },
                margin: { l: 0, r: 0, b: 0, t: 50 }
            };
            
            Plotly.newPlot('rotation-volume-plot', traces, layout, {responsive: true});
        }
        
        // 初始化事件监听器
        document.addEventListener('DOMContentLoaded', function() {
            // 直角坐标系控件事件
            document.getElementById('function-type').addEventListener('change', updateRectangularAreaPlot);
            document.getElementById('param-a').addEventListener('input', updateRectangularAreaPlot);
            document.getElementById('param-b').addEventListener('input', updateRectangularAreaPlot);
            document.getElementById('integration-range').addEventListener('input', updateRectangularAreaPlot);
            
            // 极坐标系控件事件
            document.getElementById('polar-curve-type').addEventListener('change', updatePolarAreaPlot);
            document.getElementById('polar-param-a').addEventListener('input', updatePolarAreaPlot);
            document.getElementById('theta-range').addEventListener('input', updatePolarAreaPlot);
            document.getElementById('show-area').addEventListener('change', updatePolarAreaPlot);
            
            // 旋转体控件事件
            document.getElementById('function-type-vol').addEventListener('change', updateRotationVolumeView);
            document.getElementById('param-a-vol').addEventListener('input', updateRotationVolumeView);
            document.getElementById('param-b-vol').addEventListener('input', updateRotationVolumeView);
            document.getElementById('rotation-axis').addEventListener('change', updateRotationVolumeView);
            document.getElementById('integration-bounds-vol').addEventListener('input', updateRotationVolumeView);
            
            // 初始化图表
            updateRectangularAreaPlot();
            updatePolarAreaPlot();
            updateRotationVolumeView();
            
            // 页面加载动画
            gsap.from('.content-section', {
                duration: 0.8,
                y: 30,
                opacity: 0,
                stagger: 0.2,
                ease: 'power2.out'
            });
            
            gsap.from('header', {
                duration: 1,
                y: -50,
                opacity: 0,
                ease: 'power2.out'
            });
        });
    </script>
</body>
</html>
