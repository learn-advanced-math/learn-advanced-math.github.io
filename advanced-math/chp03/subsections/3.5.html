<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="alternate icon" href="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAzMiAzMiI+PGNpcmNsZSBjeD0iMTYiIGN5PSIxNiIgcj0iMTUiIGZpbGw9IiMzNDk4ZGIiIHN0cm9rZT0iIzJjM2U1MCIgc3Ryb2tlLXdpZHRoPSIyIi8+PGcgZmlsbD0id2hpdGUiIGZvbnQtZmFtaWx5PSJUaW1lcyxzZXJpZiIgZm9udC13ZWlnaHQ9ImJvbGQiPjx0ZXh0IHg9IjE2IiB5PSIxMyIgdGV4dC1hbmNob3I9Im1pZGRsZSIgZm9udC1zaXplPSIxMiI+ZDwvdGV4dD48bGluZSB4MT0iOCIgeTE9IjE2IiB4Mj0iMjQiIHkyPSIxNiIgc3Ryb2tlPSJ3aGl0ZSIgc3Ryb2tlLXdpZHRoPSIxLjUiLz48dGV4dCB4PSIxNiIgeT0iMjUiIHRleHQtYW5jaG9yPSJtaWRkbGUiIGZvbnQtc2l6ZT0iMTAiPmR4PC90ZXh0PjwvZz48L3N2Zz4=">
    <title>3.5 函数的极值与最值 - 高等数学复习</title>
    <script>
        window.MathJax = {
            tex: {
                inlineMath: [['$', '$']],
                displayMath: [['$$', '$$']]
            },
            chtml: {
                fontURL: 'https://cdn.jsdelivr.net/npm/mathjax@3/es5/output/chtml/fonts/woff-v2'
            }
        };
    </script>
    <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    <script src="https://cdn.plot.ly/plotly-2.26.0.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/gsap@3.12.2/dist/gsap.min.js"></script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Microsoft YaHei', 'Segoe UI', Arial, sans-serif;
            line-height: 1.6;
            color: #333;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
        }
        
        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }
        
        .back-link {
            display: inline-flex;
            align-items: center;
            margin-bottom: 20px;
            color: #3498db;
            text-decoration: none;
            font-weight: 500;
            transition: all 0.3s ease;
            background: rgba(255, 255, 255, 0.9);
            padding: 10px 15px;
            border-radius: 25px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }
        
        .back-link:hover {
            color: #2980b9;
            transform: translateX(-5px);
            box-shadow: 0 4px 15px rgba(0,0,0,0.15);
        }
        
        .back-link::before {
            content: '←';
            margin-right: 8px;
            font-size: 1.2em;
        }
        
        header {
            background: linear-gradient(135deg, #e74c3c 0%, #c0392b 100%);
            color: white;
            padding: 40px 0;
            text-align: center;
            border-radius: 15px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.2);
            margin-bottom: 30px;
        }
        
        h1 {
            font-size: 2.5em;
            margin: 0;
            text-shadow: 0 2px 4px rgba(0,0,0,0.3);
            font-weight: 300;
        }
        
        .subtitle {
            font-size: 1.1em;
            margin-top: 10px;
            opacity: 0.9;
        }
        
        .content-section {
            background: white;
            margin: 25px 0;
            border-radius: 15px;
            overflow: hidden;
            box-shadow: 0 5px 20px rgba(0,0,0,0.1);
            transition: transform 0.3s ease, box-shadow 0.3s ease;
        }
        
        .content-section:hover {
            transform: translateY(-3px);
            box-shadow: 0 8px 25px rgba(0,0,0,0.15);
        }
        
        .section-header {
            padding: 20px 30px;
            background: linear-gradient(45deg, #e74c3c, #c0392b);
            color: white;
        }
        
        .section-header h2 {
            margin: 0;
            font-size: 1.6em;
            font-weight: 400;
        }
        
        .section-content {
            padding: 30px;
        }
        
        .definition {
            background: linear-gradient(135deg, #f4f0f8, #ece2f0);
            border-left: 5px solid #e74c3c;
            padding: 25px;
            margin: 20px 0;
            border-radius: 0 10px 10px 0;
            box-shadow: 0 3px 15px rgba(231, 76, 60, 0.1);
        }
        
        .definition h4 {
            margin: 0 0 15px 0;
            color: #e74c3c;
            font-size: 1.3em;
            font-weight: 600;
        }
        
        .theorem {
            background: linear-gradient(135deg, #fef9e7, #fcf4dd);
            border-left: 5px solid #f39c12;
            padding: 25px;
            margin: 20px 0;
            border-radius: 0 10px 10px 0;
            box-shadow: 0 3px 15px rgba(243, 156, 18, 0.1);
        }
        
        .theorem h4 {
            margin: 0 0 15px 0;
            color: #f39c12;
            font-size: 1.3em;
            font-weight: 600;
        }
        
        .example {
            background: linear-gradient(135deg, #ebf3fd, #d6e9f8);
            border-left: 5px solid #3498db;
            padding: 25px;
            margin: 20px 0;
            border-radius: 0 10px 10px 0;
            box-shadow: 0 3px 15px rgba(52, 152, 219, 0.1);
        }
        
        .example h4 {
            margin: 0 0 15px 0;
            color: #3498db;
            font-size: 1.3em;
            font-weight: 600;
        }
        
        .practice-problem {
            background: linear-gradient(135deg, #fdf2e9, #fbeee0);
            border-left: 5px solid #e67e22;
            padding: 25px;
            margin: 20px 0;
            border-radius: 0 10px 10px 0;
            box-shadow: 0 3px 15px rgba(230, 126, 34, 0.1);
        }
        
        .practice-problem h4 {
            margin: 0 0 15px 0;
            color: #e67e22;
            font-size: 1.3em;
            font-weight: 600;
        }
        
        .difficulty {
            display: inline-block;
            padding: 3px 10px;
            border-radius: 15px;
            font-size: 0.85em;
            font-weight: 500;
            margin-left: 10px;
        }
        
        .difficulty.medium {
            background: #f39c12;
            color: white;
        }
        
        .difficulty.hard {
            background: #e74c3c;
            color: white;
        }
        
        .difficulty.very-hard {
            background: #8e44ad;
            color: white;
        }
        
        .solution {
            margin-top: 20px;
            padding-top: 20px;
            border-top: 2px dashed #bdc3c7;
        }
        
        .solution-header {
            font-weight: 600;
            color: #2c3e50;
            margin-bottom: 15px;
            font-size: 1.1em;
        }
        
        .viz-container {
            width: 100%;
            height: 400px;
            margin: 25px 0;
            background: white;
            border-radius: 10px;
            box-shadow: 0 3px 15px rgba(0,0,0,0.1);
            overflow: hidden;
        }
        
        .interactive-demo {
            width: 100%;
            height: auto;
            min-height: 480px;
            margin: 25px 0;
            background: #f8f9fa;
            border-radius: 10px;
            box-shadow: 0 3px 15px rgba(0,0,0,0.1);
            padding: 20px;
            position: relative;
        }
        
        .controls {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            margin-bottom: 20px;
            padding: 15px;
            background: white;
            border-radius: 8px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }
        
        .control-group {
            display: flex;
            flex-direction: column;
            gap: 10px;
        }
        
        .controls label {
            display: block;
            margin-bottom: 5px;
            font-weight: 500;
            color: #e74c3c;
        }
        
        .controls input, .controls select {
            width: 100%;
            padding: 8px;
            border: 1px solid #ddd;
            border-radius: 4px;
            font-size: 14px;
        }
        
        .nav-buttons {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-top: 40px;
            padding: 20px 0;
        }
        
        .btn {
            display: inline-flex;
            align-items: center;
            padding: 12px 25px;
            background: linear-gradient(45deg, #e74c3c, #c0392b);
            color: white;
            text-decoration: none;
            border-radius: 25px;
            font-weight: 500;
            transition: all 0.3s ease;
            box-shadow: 0 3px 15px rgba(231, 76, 60, 0.3);
        }
        
        .btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 20px rgba(231, 76, 60, 0.4);
        }
        
        .btn.prev::before {
            content: '←';
            margin-right: 8px;
            font-size: 1.1em;
        }
        
        .btn.next::after {
            content: '→';
            margin-left: 8px;
            font-size: 1.1em;
        }
        
        footer {
            text-align: center;
            color: white;
            padding: 30px 0;
            opacity: 0.9;
            margin-top: 50px;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 15px;
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.1);
        }
        
        footer p {
            text-align: center;
            margin: 0;
        }
        
        .math-expression {
            text-align: center;
            margin: 15px 0;
            font-size: 1.1em;
        }
        
        ul, ol {
            margin-left: 20px;
            margin-bottom: 15px;
        }
        
        li {
            margin-bottom: 8px;
        }
        
        p {
            margin-bottom: 15px;
            text-align: justify;
        }
        
        .highlight {
            background: linear-gradient(135deg, #fff3cd, #fce4a0);
            padding: 15px;
            border-left: 4px solid #ffc107;
            border-radius: 0 8px 8px 0;
            margin: 15px 0;
        }
        
        .extrema-visualization {
            width: 100%;
            height: 360px;
            margin: 15px 0;
            background: white;
            border-radius: 10px;
            box-shadow: 0 3px 15px rgba(0,0,0,0.1);
            position: relative;
            overflow: hidden;
        }
        
        .extrema-demo {
            width: 100%;
            height: 400px;
            margin: 25px 0;
            background: white;
            border-radius: 10px;
            box-shadow: 0 3px 15px rgba(0,0,0,0.1);
            overflow: hidden;
        }
        
        .method-cards {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
            margin: 20px 0;
        }
        
        .method-card {
            background: linear-gradient(135deg, #a8e6cf 0%, #dcedc1 100%);
            padding: 20px;
            border-radius: 15px;
            box-shadow: 0 5px 15px rgba(168, 230, 207, 0.3);
            text-align: center;
        }
        
        .method-card h5 {
            color: #27ae60;
            font-size: 1.2em;
            margin-bottom: 15px;
        }
        
        .method-card .method-steps {
            text-align: left;
            margin-top: 15px;
        }
        
        .application-card {
            background: linear-gradient(135deg, #ffb3ba 0%, #ffdfba 100%);
            padding: 20px;
            border-radius: 15px;
            box-shadow: 0 5px 15px rgba(255, 179, 186, 0.3);
            margin: 20px 0;
        }
        
        .application-card h5 {
            color: #e74c3c;
            font-size: 1.2em;
            margin-bottom: 15px;
            text-align: center;
        }

        /* AI提示方块样式 */
        .ai-warning {
            position: fixed;
            top: 20px;
            left: 20px;
            width: 40px;
            height: 40px;
            background: white;
            border-radius: 8px;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            z-index: 1000;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.2);
            transition: all 0.3s ease;
            border: 2px solid #e0e0e0;
        }
        
        .ai-warning:hover {
            transform: scale(1.1);
            box-shadow: 0 6px 20px rgba(0, 0, 0, 0.3);
            border-color: #ff4444;
        }
        
        .ai-warning::before {
            content: '!';
            color: #e74c3c;
            font-size: 20px;
            font-weight: bold;
            font-family: Arial, sans-serif;
        }
        
        .ai-warning-tooltip {
            position: absolute;
            top: 50px;
            left: 0;
            background: rgba(0, 0, 0, 0.9);
            color: white;
            padding: 16px 20px;
            border-radius: 8px;
            font-size: 14px;
            line-height: 1.5;
            opacity: 0;
            visibility: hidden;
            transform: translateY(-10px);
            transition: all 0.3s ease;
            z-index: 1001;
            width: 250px;
            box-shadow: 0 4px 20px rgba(0, 0, 0, 0.3);
        }
        
        .ai-warning-tooltip::before {
            content: '';
            position: absolute;
            top: -8px;
            left: 20px;
            width: 0;
            height: 0;
            border-left: 8px solid transparent;
            border-right: 8px solid transparent;
            border-bottom: 8px solid rgba(0, 0, 0, 0.9);
        }
        
        .ai-warning:hover .ai-warning-tooltip {
            opacity: 1;
            visibility: visible;
            transform: translateY(0);
        }
        
        @media (max-width: 768px) {
            .container {
                padding: 10px;
            }
            
            h1 {
                font-size: 2em;
            }
            
            .section-content {
                padding: 20px;
            }
            
            .definition, .theorem, .example, .practice-problem {
                padding: 20px;
            }
            
            .nav-buttons {
                flex-direction: column;
                gap: 15px;
            }
            
            .controls {
                grid-template-columns: 1fr;
            }

            .ai-warning {
                width: 35px;
                height: 35px;
                top: 15px;
                left: 15px;
            }
            
            .ai-warning::before {
                font-size: 18px;
            }
            
            .ai-warning-tooltip {
                width: 280px;
                font-size: 13px;
                padding: 14px 18px;
            }
        }
    </style>
</head>
<body>
    <!-- AI内容提示 -->
    <div class="ai-warning">
        <div class="ai-warning-tooltip">
            页面内容由AI生成，请谨慎对待。<br>如发现错误，<a href="https://github.com/learn-advanced-math/learn-advanced-math.github.io/issues" target="_blank" style="color: #ff0000">欢迎反馈</a>。
        </div>
    </div>
    
    <div class="container">
        <a href="../index.html" class="back-link">返回章节概览</a>
        
        <header>
            <h1>3.5 函数的极值与最值</h1>
            <div class="subtitle">Extrema and Maximum/Minimum Values of Functions</div>
        </header>
        
        <!-- 3.5.1 函数的极值及其求法 -->
        <div class="content-section">
            <div class="section-header">
                <h2>3.5.1 函数的极值及其求法</h2>
            </div>
            <div class="section-content">
                <div class="definition">
                    <h4>函数极值的定义</h4>
                    <p>设函数 $f(x)$ 在点 $x_0$ 的某个邻域内有定义。</p>
                    <ul>
                        <li><strong>极大值：</strong>如果存在 $\delta > 0$，使得对于 $|x - x_0| < \delta$ 的所有 $x$，都有 $f(x) \leq f(x_0)$，则称 $f(x_0)$ 为函数 $f(x)$ 的<strong>极大值</strong>，$x_0$ 为<strong>极大值点</strong>。</li>
                        <li><strong>极小值：</strong>如果存在 $\delta > 0$，使得对于 $|x - x_0| < \delta$ 的所有 $x$，都有 $f(x) \geq f(x_0)$，则称 $f(x_0)$ 为函数 $f(x)$ 的<strong>极小值</strong>，$x_0$ 为<strong>极小值点</strong>。</li>
                    </ul>
                    
                    <div class="highlight">
                        <p><strong>注意：</strong>极值是函数的局部性质，极大值不一定是最大值，极小值不一定是最小值。</p>
                    </div>
                </div>
                
                <div class="theorem">
                    <h4>费马定理（Fermat定理）</h4>
                    <p>设函数 $f(x)$ 在点 $x_0$ 处可导，且 $x_0$ 是 $f(x)$ 的极值点，则 $f'(x_0) = 0$。</p>
                    
                    <div class="highlight">
                        <p><strong>重要概念：</strong>使得 $f'(x) = 0$ 的点称为函数的<strong>驻点</strong>或<strong>稳定点</strong>。</p>
                        <p><strong>驻点的性质：</strong>可导函数的极值点必是驻点，但驻点不一定是极值点。</p>
                    </div>
                </div>
                
                <div class="method-cards">
                    <div class="method-card">
                        <h5>第一充分条件</h5>
                        <p>设函数 $f(x)$ 在 $x_0$ 处连续，在 $x_0$ 的某去心邻域内可导，且 $f'(x_0) = 0$。</p>
                        <div class="method-steps">
                            <p><strong>判定准则：</strong></p>
                            <ul>
                                <li>若 $x$ 经过 $x_0$ 时，$f'(x)$ 由正变负，则 $x_0$ 是极大值点</li>
                                <li>若 $x$ 经过 $x_0$ 时，$f'(x)$ 由负变正，则 $x_0$ 是极小值点</li>
                                <li>若 $x$ 经过 $x_0$ 时，$f'(x)$ 不变号，则 $x_0$ 不是极值点</li>
                            </ul>
                        </div>
                    </div>
                    
                    <div class="method-card">
                        <h5>第二充分条件</h5>
                        <p>设函数 $f(x)$ 在 $x_0$ 处二阶可导，且 $f'(x_0) = 0$，$f''(x_0) \neq 0$。</p>
                        <div class="method-steps">
                            <p><strong>判定准则：</strong></p>
                            <ul>
                                <li>若 $f''(x_0) < 0$，则 $x_0$ 是极大值点</li>
                                <li>若 $f''(x_0) > 0$，则 $x_0$ 是极小值点</li>
                                <li>若 $f''(x_0) = 0$，则此方法失效，需用第一充分条件</li>
                            </ul>
                        </div>
                    </div>
                </div>
                
                <div class="extrema-demo" id="extrema-plot"></div>
                
                <div class="example">
                    <h4>例1：求函数的极值</h4>
                    <p>求函数 $f(x) = x^3 - 3x^2 - 9x + 2$ 的极值。</p>
                    
                    <div class="solution">
                        <div class="solution-header">解：</div>
                        <p><strong>第一步：</strong>求导数</p>
                        $$f'(x) = 3x^2 - 6x - 9 = 3(x^2 - 2x - 3) = 3(x-3)(x+1)$$
                        
                        <p><strong>第二步：</strong>求驻点</p>
                        <p>令 $f'(x) = 0$，得到 $x = 3$ 或 $x = -1$</p>
                        
                        <p><strong>第三步：</strong>判断极值性质（用第一充分条件）</p>
                        <ul>
                            <li>当 $x < -1$ 时，$f'(x) = 3(-)(−) = 3(+) > 0$</li>
                            <li>当 $-1 < x < 3$ 时，$f'(x) = 3(−)(+) = 3(−) < 0$</li>
                            <li>当 $x > 3$ 时，$f'(x) = 3(+)(+) = 3(+) > 0$</li>
                        </ul>
                        
                        <p><strong>第四步：</strong>计算极值</p>
                        <ul>
                            <li>$x = -1$ 是极大值点，$f(-1) = (-1)^3 - 3(-1)^2 - 9(-1) + 2 = 7$</li>
                            <li>$x = 3$ 是极小值点，$f(3) = 3^3 - 3 \cdot 3^2 - 9 \cdot 3 + 2 = -25$</li>
                        </ul>
                    </div>
                </div>
                
                <div class="example">
                    <h4>例2：用第二充分条件判断极值</h4>
                    <p>求函数 $f(x) = x^4 - 4x^3 + 6x^2 - 4x + 1$ 的极值。</p>
                    
                    <div class="solution">
                        <div class="solution-header">解：</div>
                        <p><strong>第一步：</strong>求一阶和二阶导数</p>
                        $$f'(x) = 4x^3 - 12x^2 + 12x - 4 = 4(x-1)^3$$
                        $$f''(x) = 12x^2 - 24x + 12 = 12(x-1)^2$$
                        
                        <p><strong>第二步：</strong>求驻点</p>
                        <p>令 $f'(x) = 0$，得到 $x = 1$（三重根）</p>
                        
                        <p><strong>第三步：</strong>应用第二充分条件</p>
                        <p>$f''(1) = 12(1-1)^2 = 0$，第二充分条件失效</p>
                        
                        <p><strong>第四步：</strong>用第一充分条件判断</p>
                        <p>由于 $f'(x) = 4(x-1)^3$：</p>
                        <ul>
                            <li>当 $x < 1$ 时，$f'(x) < 0$</li>
                            <li>当 $x > 1$ 时，$f'(x) > 0$</li>
                        </ul>
                        <p>因此 $x = 1$ 是极小值点，$f(1) = 0$</p>
                    </div>
                </div>
                
                <div class="interactive-demo">
                    <div class="controls">
                        <div class="control-group">
                            <label for="func-select">选择函数：</label>
                            <select id="func-select">
                                <option value="cubic">f(x) = x³ - 3x² - 9x + 2</option>
                                <option value="sincos">f(x) = x + sin(2x)</option>
                                <option value="exponential">f(x) = xe^(-x²)</option>
                            </select>
                        </div>
                        <div class="control-group">
                            <label for="range-slider">x轴范围：</label>
                            <input type="range" id="range-slider" min="2" max="10" value="5" step="1">
                            <span id="range-display">±5</span>
                        </div>
                    </div>
                    
                    <div class="extrema-visualization" id="function-extrema-plot"></div>
                </div>
            </div>
        </div>
        
        <!-- 3.5.2 函数的最值问题及其应用 -->
        <div class="content-section">
            <div class="section-header">
                <h2>3.5.2 函数的最值问题及其应用</h2>
            </div>
            <div class="section-content">
                <div class="definition">
                    <h4>函数的最大值和最小值</h4>
                    <p>设函数 $f(x)$ 在区间 $I$ 上有定义。</p>
                    <ul>
                        <li><strong>最大值：</strong>如果存在 $x_0 \in I$，使得对于任意 $x \in I$，都有 $f(x) \leq f(x_0)$，则称 $f(x_0)$ 为函数 $f(x)$ 在区间 $I$ 上的<strong>最大值</strong>。</li>
                        <li><strong>最小值：</strong>如果存在 $x_0 \in I$，使得对于任意 $x \in I$，都有 $f(x) \geq f(x_0)$，则称 $f(x_0)$ 为函数 $f(x)$ 在区间 $I$ 上的<strong>最小值</strong>。</li>
                    </ul>
                    
                    <div class="highlight">
                        <p><strong>最值存在定理：</strong>在闭区间上连续的函数必定存在最大值和最小值。</p>
                    </div>
                </div>
                
                <div class="theorem">
                    <h4>闭区间上函数最值的求法</h4>
                    <p>设函数 $f(x)$ 在闭区间 $[a,b]$ 上连续，在开区间 $(a,b)$ 内可导，求 $f(x)$ 在 $[a,b]$ 上的最值的步骤：</p>
                    <ol>
                        <li>求出 $f(x)$ 在 $(a,b)$ 内的所有驻点 $x_1, x_2, \ldots, x_n$</li>
                        <li>计算 $f(a)$、$f(b)$ 以及各驻点处的函数值 $f(x_1), f(x_2), \ldots, f(x_n)$</li>
                        <li>比较这些函数值，其中最大者为最大值，最小者为最小值</li>
                    </ol>
                </div>
                
                <div class="application-card">
                    <h5>实际应用问题的一般步骤</h5>
                    <ol>
                        <li><strong>建立数学模型：</strong>根据题意设未知数，建立目标函数</li>
                        <li><strong>确定定义域：</strong>根据实际意义确定自变量的取值范围</li>
                        <li><strong>求导求驻点：</strong>对目标函数求导，找出驻点</li>
                        <li><strong>判断最值：</strong>比较驻点和端点处的函数值</li>
                        <li><strong>回答实际问题：</strong>将数学结果转化为实际问题的答案</li>
                    </ol>
                </div>
                
                <div class="example">
                    <h4>例3：几何最值问题</h4>
                    <p>用长为 $l$ 的铁丝围成一个矩形，问矩形的长和宽各为多少时，矩形的面积最大？</p>
                    
                    <div class="solution">
                        <div class="solution-header">解：</div>
                        <p><strong>第一步：</strong>建立数学模型</p>
                        <p>设矩形的长为 $x$，宽为 $y$，则周长约束为：$2x + 2y = l$，即 $y = \frac{l-2x}{2}$</p>
                        <p>面积函数为：$S = xy = x \cdot \frac{l-2x}{2} = \frac{lx - 2x^2}{2}$</p>
                        
                        <p><strong>第二步：</strong>确定定义域</p>
                        <p>由于 $x > 0$ 且 $y > 0$，所以 $0 < x < \frac{l}{2}$</p>
                        
                        <p><strong>第三步：</strong>求导求驻点</p>
                        $$S'(x) = \frac{l - 4x}{2}$$
                        <p>令 $S'(x) = 0$，得到 $x = \frac{l}{4}$</p>
                        
                        <p><strong>第四步：</strong>判断最值</p>
                        <p>由于 $S''(x) = -2 < 0$，所以 $x = \frac{l}{4}$ 是极大值点，也是最大值点</p>
                        
                        <p><strong>第五步：</strong>求解结果</p>
                        <p>当 $x = \frac{l}{4}$ 时，$y = \frac{l-2 \cdot \frac{l}{4}}{2} = \frac{l}{4}$</p>
                        <p>因此，当矩形为正方形（边长为 $\frac{l}{4}$）时，面积最大，最大面积为 $\frac{l^2}{16}$</p>
                    </div>
                </div>
                
                <div class="example">
                    <h4>例4：经济应用问题</h4>
                    <p>某公司生产某产品的成本函数为 $C(x) = 100 + 2x + 0.01x^2$（元），价格函数为 $P(x) = 10 - 0.02x$（元），其中 $x$ 为产量。求利润最大时的产量和最大利润。</p>
                    
                    <div class="solution">
                        <div class="solution-header">解：</div>
                        <p><strong>第一步：</strong>建立利润函数</p>
                        <p>收入函数：$R(x) = xP(x) = x(10 - 0.02x) = 10x - 0.02x^2$</p>
                        <p>利润函数：$L(x) = R(x) - C(x) = (10x - 0.02x^2) - (100 + 2x + 0.01x^2)$</p>
                        $$L(x) = 8x - 0.03x^2 - 100$$
                        
                        <p><strong>第二步：</strong>求导求驻点</p>
                        $$L'(x) = 8 - 0.06x$$
                        <p>令 $L'(x) = 0$，得到 $x = \frac{8}{0.06} = \frac{400}{3} \approx 133.33$</p>
                        
                        <p><strong>第三步：</strong>判断最值</p>
                        <p>$L''(x) = -0.06 < 0$，所以 $x = \frac{400}{3}$ 是极大值点</p>
                        
                        <p><strong>第四步：</strong>计算最大利润</p>
                        <p>取 $x = 133$（实际产量为整数）：</p>
                        $$L(133) = 8 \cdot 133 - 0.03 \cdot 133^2 - 100 = 1064 - 529.47 - 100 = 434.53$$
                        <p>因此，当产量为 $133$ 件时，利润最大，约为 $434.53$ 元</p>
                    </div>
                </div>
                
                <div class="practice-problem">
                    <h4>习题1 <span class="difficulty medium">中等难度</span></h4>
                    <p>求函数 $f(x) = \frac{x^2}{x^2 + 1}$ 在区间 $[-2, 3]$ 上的最大值和最小值。</p>
                    
                    <div class="solution">
                        <div class="solution-header">解：</div>
                        <p><strong>第一步：</strong>求导数</p>
                        $$f'(x) = \frac{2x(x^2 + 1) - x^2 \cdot 2x}{(x^2 + 1)^2} = \frac{2x}{(x^2 + 1)^2}$$
                        
                        <p><strong>第二步：</strong>求驻点</p>
                        <p>令 $f'(x) = 0$，得到 $x = 0$</p>
                        
                        <p><strong>第三步：</strong>计算关键点的函数值</p>
                        <ul>
                            <li>$f(-2) = \frac{4}{5} = 0.8$</li>
                            <li>$f(0) = 0$</li>
                            <li>$f(3) = \frac{9}{10} = 0.9$</li>
                        </ul>
                        
                        <p><strong>结论：</strong>最大值为 $f(3) = 0.9$，最小值为 $f(0) = 0$</p>
                    </div>
                </div>
                
                <div class="practice-problem">
                    <h4>习题2 <span class="difficulty hard">较难</span></h4>
                    <p>在所有面积为定值 $S$ 的矩形中，求周长最小的矩形的尺寸。</p>
                    
                    <div class="solution">
                        <div class="solution-header">解：</div>
                        <p><strong>第一步：</strong>建立数学模型</p>
                        <p>设矩形的长为 $x$，宽为 $y$，则面积约束为：$xy = S$，即 $y = \frac{S}{x}$</p>
                        <p>周长函数为：$P = 2x + 2y = 2x + \frac{2S}{x}$</p>
                        
                        <p><strong>第二步：</strong>确定定义域</p>
                        <p>由于 $x > 0$，定义域为 $(0, +\infty)$</p>
                        
                        <p><strong>第三步：</strong>求导求驻点</p>
                        $$P'(x) = 2 - \frac{2S}{x^2}$$
                        <p>令 $P'(x) = 0$，得到 $2 = \frac{2S}{x^2}$，解得 $x = \sqrt{S}$</p>
                        
                        <p><strong>第四步：</strong>判断最值</p>
                        $$P''(x) = \frac{4S}{x^3}$$
                        <p>当 $x = \sqrt{S}$ 时，$P''(\sqrt{S}) = \frac{4S}{S\sqrt{S}} = \frac{4}{\sqrt{S}} > 0$</p>
                        <p>所以 $x = \sqrt{S}$ 是极小值点</p>
                        
                        <p><strong>第五步：</strong>求解结果</p>
                        <p>当 $x = \sqrt{S}$ 时，$y = \frac{S}{\sqrt{S}} = \sqrt{S}$</p>
                        <p>因此，当矩形为正方形（边长为 $\sqrt{S}$）时，周长最小，最小周长为 $4\sqrt{S}$</p>
                    </div>
                </div>
                
                <div class="practice-problem">
                    <h4>习题3 <span class="difficulty very-hard">很难</span></h4>
                    <p>某工厂要制造容积为 $V$ 的圆柱形无盖容器，已知底面材料每单位面积的成本为 $a$ 元，侧面材料每单位面积的成本为 $b$ 元，求使总成本最小的底面半径。</p>
                    
                    <div class="solution">
                        <div class="solution-header">解：</div>
                        <p><strong>第一步：</strong>建立数学模型</p>
                        <p>设圆柱的底面半径为 $r$，高为 $h$，则体积约束为：$\pi r^2 h = V$，即 $h = \frac{V}{\pi r^2}$</p>
                        
                        <p><strong>第二步：</strong>建立成本函数</p>
                        <p>底面成本：$a \cdot \pi r^2$</p>
                        <p>侧面成本：$b \cdot 2\pi r h = b \cdot 2\pi r \cdot \frac{V}{\pi r^2} = \frac{2bV}{r}$</p>
                        <p>总成本函数：$C(r) = a\pi r^2 + \frac{2bV}{r}$</p>
                        
                        <p><strong>第三步：</strong>求导求驻点</p>
                        $$C'(r) = 2a\pi r - \frac{2bV}{r^2}$$
                        <p>令 $C'(r) = 0$，得到：$2a\pi r = \frac{2bV}{r^2}$</p>
                        <p>解得：$a\pi r^3 = bV$，即 $r = \sqrt[3]{\frac{bV}{a\pi}}$</p>
                        
                        <p><strong>第四步：</strong>判断最值</p>
                        $$C''(r) = 2a\pi + \frac{4bV}{r^3}$$
                        <p>显然 $C''(r) > 0$，所以这是极小值点</p>
                        
                        <p><strong>结论：</strong>当底面半径 $r = \sqrt[3]{\frac{bV}{a\pi}}$ 时，总成本最小</p>
                    </div>
                </div>
            </div>
        </div>
        
        <div class="nav-buttons">
            <a href="3.4.html" class="btn prev">上一节：3.4 函数的单调性与曲线的凹凸性</a>
            <a href="3.6.html" class="btn next">下一节：3.6 函数图形的描绘</a>
        </div>
        
        <footer>
            <p>&copy; 2025 高等数学复习系统 - 函数的极值与最值</p>
        </footer>
    </div>

    <script>
        // 极值演示函数
        function createExtremaDemo() {
            const plotDiv = document.getElementById('extrema-plot');
            
            // 生成函数 f(x) = x³ - 3x² - 9x + 2 的数据
            const x = [];
            const y = [];
            const derivative = [];
            
            for (let i = -30; i <= 50; i++) {
                const xi = i * 0.1;
                x.push(xi);
                y.push(Math.pow(xi, 3) - 3 * Math.pow(xi, 2) - 9 * xi + 2);
                derivative.push(3 * Math.pow(xi, 2) - 6 * xi - 9);
            }
            
            const traces = [
                {
                    x: x,
                    y: y,
                    type: 'scatter',
                    mode: 'lines',
                    name: 'f(x) = x³ - 3x² - 9x + 2',
                    line: { color: '#e74c3c', width: 3 }
                },
                {
                    x: [-1, 3],
                    y: [7, -25],
                    type: 'scatter',
                    mode: 'markers',
                    name: '极值点',
                    marker: { 
                        color: '#f39c12', 
                        size: 12,
                        symbol: 'circle',
                        line: { color: '#d35400', width: 2 }
                    }
                },
                {
                    x: x,
                    y: derivative.map(d => d * 2), // 缩放导数以便显示
                    type: 'scatter',
                    mode: 'lines',
                    name: "f'(x) × 2",
                    line: { color: '#3498db', width: 2, dash: 'dash' }
                }
            ];
            
            const layout = {
                title: '函数极值演示：f(x) = x³ - 3x² - 9x + 2',
                xaxis: {
                    title: 'x',
                    range: [-3, 5],
                    zeroline: true
                },
                yaxis: {
                    title: 'y',
                    zeroline: true
                },
                showlegend: true,
                plot_bgcolor: 'rgba(0,0,0,0)',
                paper_bgcolor: 'rgba(0,0,0,0)',
                font: { family: 'Microsoft YaHei', size: 12 },
                annotations: [
                    {
                        x: -1,
                        y: 7,
                        text: '极大值点(-1, 7)',
                        showarrow: true,
                        arrowhead: 2,
                        ax: -30,
                        ay: -30
                    },
                    {
                        x: 3,
                        y: -25,
                        text: '极小值点(3, -25)',
                        showarrow: true,
                        arrowhead: 2,
                        ax: 30,
                        ay: 30
                    }
                ]
            };
            
            Plotly.newPlot(plotDiv, traces, layout, {responsive: true});
        }
        
        // 交互式函数极值可视化
        function createInteractiveFunctionVisualization() {
            const plotDiv = document.getElementById('function-extrema-plot');
            const funcSelect = document.getElementById('func-select');
            const rangeSlider = document.getElementById('range-slider');
            const rangeDisplay = document.getElementById('range-display');
            
            function updatePlot() {
                const funcType = funcSelect.value;
                const range = parseFloat(rangeSlider.value);
                
                const x = [];
                const y = [];
                const derivative = [];
                const secondDerivative = [];
                let extremaPoints = [];
                let title = '';
                
                // 生成x值
                for (let i = -range * 20; i <= range * 20; i++) {
                    x.push(i * 0.1);
                }
                
                switch(funcType) {
                    case 'cubic':
                        title = 'f(x) = x³ - 3x² - 9x + 2';
                        extremaPoints = [[-1, 7], [3, -25]];
                        x.forEach(xi => {
                            y.push(Math.pow(xi, 3) - 3 * Math.pow(xi, 2) - 9 * xi + 2);
                            derivative.push(3 * Math.pow(xi, 2) - 6 * xi - 9);
                            secondDerivative.push(6 * xi - 6);
                        });
                        break;
                        
                    case 'sincos':
                        title = 'f(x) = x + sin(2x)';
                        extremaPoints = [];
                        // 找到驻点（更精确的计算）
                        // f'(x) = 1 + 2cos(2x) = 0 => cos(2x) = -1/2 => 2x = 2π/3 + 2nπ 或 2x = 4π/3 + 2nπ
                        for (let n = -Math.floor(range * 3 / Math.PI); n <= Math.floor(range * 3 / Math.PI); n++) {
                            const x1 = (2*Math.PI/3 + 2*n*Math.PI) / 2;  // π/3 + nπ
                            const x2 = (4*Math.PI/3 + 2*n*Math.PI) / 2;  // 2π/3 + nπ
                            if (x1 >= -range && x1 <= range) {
                                extremaPoints.push([x1, x1 + Math.sin(2*x1)]);
                            }
                            if (x2 >= -range && x2 <= range) {
                                extremaPoints.push([x2, x2 + Math.sin(2*x2)]);
                            }
                        }
                        x.forEach(xi => {
                            y.push(xi + Math.sin(2 * xi));
                            derivative.push(1 + 2 * Math.cos(2 * xi));
                            secondDerivative.push(-4 * Math.sin(2 * xi));
                        });
                        break;
                        
                    case 'exponential':
                        title = 'f(x) = xe^(-x²)';
                        // f'(x) = e^(-x²) + x(-2x)e^(-x²) = e^(-x²)(1 - 2x²) = 0 => x = ±1/√2
                        const criticalX1 = -1/Math.sqrt(2);
                        const criticalX2 = 1/Math.sqrt(2);
                        extremaPoints = [
                            [criticalX1, criticalX1 * Math.exp(-criticalX1*criticalX1)],
                            [criticalX2, criticalX2 * Math.exp(-criticalX2*criticalX2)]
                        ];
                        x.forEach(xi => {
                            y.push(xi * Math.exp(-xi * xi));
                            derivative.push(Math.exp(-xi * xi) * (1 - 2 * xi * xi));
                            // f''(x) = d/dx[e^(-x²)(1 - 2x²)] = e^(-x²)(-2x)(1 - 2x²) + e^(-x²)(-4x) = e^(-x²)[-2x(1 - 2x²) - 4x] = e^(-x²)[-2x + 4x³ - 4x] = e^(-x²)(-6x + 4x³) = e^(-x²) * 2x(2x² - 3)
                            secondDerivative.push(Math.exp(-xi * xi) * 2 * xi * (2 * xi * xi - 3));
                        });
                        break;
                }
                
                const traces = [
                    {
                        x: x,
                        y: y,
                        type: 'scatter',
                        mode: 'lines',
                        name: title,
                        line: { color: '#e74c3c', width: 3 }
                    }
                ];
                
                // 添加极值点
                if (extremaPoints.length > 0) {
                    traces.push({
                        x: extremaPoints.map(p => p[0]),
                        y: extremaPoints.map(p => p[1]),
                        type: 'scatter',
                        mode: 'markers',
                        name: '极值点',
                        marker: { 
                            color: '#f39c12', 
                            size: 10,
                            symbol: 'circle',
                            line: { color: '#d35400', width: 2 }
                        }
                    });
                }
                
                // 添加导数图像
                traces.push({
                    x: x,
                    y: derivative,
                    type: 'scatter',
                    mode: 'lines',
                    name: "f'(x)",
                    line: { color: '#3498db', width: 2, dash: 'dash' }
                });
                
                // 添加二阶导数图像
                traces.push({
                    x: x,
                    y: secondDerivative,
                    type: 'scatter',
                    mode: 'lines',
                    name: "f''(x)",
                    line: { color: '#9b59b6', width: 2, dash: 'dot' }
                });
                
                const layout = {
                    title: title,
                    xaxis: {
                        title: 'x',
                        range: [-range, range],
                        zeroline: true
                    },
                    yaxis: {
                        title: 'y',
                        zeroline: true
                    },
                    showlegend: true,
                    plot_bgcolor: 'rgba(0,0,0,0)',
                    paper_bgcolor: 'rgba(0,0,0,0)',
                    font: { family: 'Microsoft YaHei', size: 12 }
                };
                
                Plotly.newPlot(plotDiv, traces, layout, {responsive: true});
            }
            
            // 事件监听器
            funcSelect.addEventListener('change', updatePlot);
            rangeSlider.addEventListener('input', function() {
                rangeDisplay.textContent = `±${this.value}`;
                updatePlot();
            });
            
            // 初始化
            updatePlot();
        }
        
        // 页面加载动画
        function initializeAnimations() {
            const contentSections = document.querySelectorAll('.content-section');
            if (contentSections.length > 0 && typeof gsap !== 'undefined') {
                gsap.from('.content-section', {
                    duration: 0.8,
                    y: 30,
                    opacity: 0,
                    stagger: 0.2,
                    ease: "power2.out"
                });
            }
            
            const methodCards = document.querySelectorAll('.method-card');
            if (methodCards.length > 0 && typeof gsap !== 'undefined') {
                gsap.from('.method-card', {
                    duration: 0.6,
                    scale: 0.8,
                    opacity: 0,
                    stagger: 0.15,
                    delay: 1,
                    ease: "back.out(1.7)"
                });
            }
        }
        
        // 滚动触发动画
        function setupScrollAnimations() {
            const observer = new IntersectionObserver((entries) => {
                entries.forEach(entry => {
                    if (entry.isIntersecting && typeof gsap !== 'undefined') {
                        gsap.from(entry.target.querySelectorAll('.definition, .theorem, .example, .application-card'), {
                            duration: 0.6,
                            y: 20,
                            opacity: 0,
                            stagger: 0.1,
                            ease: "power2.out"
                        });
                    }
                });
            }, { threshold: 0.2 });
            
            document.querySelectorAll('.content-section').forEach(section => {
                observer.observe(section);
            });
        }
        
        // 页面加载时初始化
        document.addEventListener('DOMContentLoaded', function() {
            // 延迟执行以确保DOM完全加载
            setTimeout(() => {
                createExtremaDemo();
                createInteractiveFunctionVisualization();
                initializeAnimations();
                setupScrollAnimations();
            }, 500);
            
            // MathJax 加载完成后的回调
            if (typeof MathJax !== 'undefined') {
                MathJax.startup.promise.then(() => {
                    console.log('MathJax loaded successfully');
                });
            }
        });
    </script>
</body>
</html>
