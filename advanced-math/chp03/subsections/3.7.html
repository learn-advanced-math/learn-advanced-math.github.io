<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="alternate icon" href="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAzMiAzMiI+PGNpcmNsZSBjeD0iMTYiIGN5PSIxNiIgcj0iMTUiIGZpbGw9IiMzNDk4ZGIiIHN0cm9rZT0iIzJjM2U1MCIgc3Ryb2tlLXdpZHRoPSIyIi8+PGcgZmlsbD0id2hpdGUiIGZvbnQtZmFtaWx5PSJUaW1lcyxzZXJpZiIgZm9udC13ZWlnaHQ9ImJvbGQiPjx0ZXh0IHg9IjE2IiB5PSIxMyIgdGV4dC1hbmNob3I9Im1pZGRsZSIgZm9udC1zaXplPSIxMiI+ZDwvdGV4dD48bGluZSB4MT0iOCIgeTE9IjE2IiB4Mj0iMjQiIHkyPSIxNiIgc3Ryb2tlPSJ3aGl0ZSIgc3Ryb2tlLXdpZHRoPSIxLjUiLz48dGV4dCB4PSIxNiIgeT0iMjUiIHRleHQtYW5jaG9yPSJtaWRkbGUiIGZvbnQtc2l6ZT0iMTAiPmR4PC90ZXh0PjwvZz48L3N2Zz4=">
    <title>3.7 曲率 - 高等数学复习</title>
    <script>
        window.MathJax = {
            tex: {
                inlineMath: [['$', '$']],
                displayMath: [['$$', '$$']]
            },
            chtml: {
                fontURL: 'https://cdn.jsdelivr.net/npm/mathjax@3/es5/output/chtml/fonts/woff-v2'
            }
        };
    </script>
    <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    <script src="https://cdn.plot.ly/plotly-2.26.0.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/gsap@3.12.2/dist/gsap.min.js"></script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Microsoft YaHei', 'Segoe UI', Arial, sans-serif;
            line-height: 1.6;
            color: #333;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
        }
        
        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }
        
        .back-link {
            display: inline-flex;
            align-items: center;
            margin-bottom: 20px;
            color: #3498db;
            text-decoration: none;
            font-weight: 500;
            transition: all 0.3s ease;
            background: rgba(255, 255, 255, 0.9);
            padding: 10px 15px;
            border-radius: 25px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }
        
        .back-link:hover {
            color: #2980b9;
            transform: translateX(-5px);
            box-shadow: 0 4px 15px rgba(0,0,0,0.15);
        }
        
        .back-link::before {
            content: '←';
            margin-right: 8px;
            font-size: 1.2em;
        }
        
        header {
            background: linear-gradient(135deg, #9b59b6 0%, #8e44ad 100%);
            color: white;
            padding: 40px 0;
            text-align: center;
            border-radius: 15px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.2);
            margin-bottom: 30px;
        }
        
        h1 {
            font-size: 2.5em;
            margin: 0;
            text-shadow: 0 2px 4px rgba(0,0,0,0.3);
            font-weight: 300;
        }
        
        .subtitle {
            font-size: 1.1em;
            margin-top: 10px;
            opacity: 0.9;
        }
        
        .content-section {
            background: white;
            margin: 25px 0;
            border-radius: 15px;
            overflow: hidden;
            box-shadow: 0 5px 20px rgba(0,0,0,0.1);
            transition: transform 0.3s ease, box-shadow 0.3s ease;
        }
        
        .content-section:hover {
            transform: translateY(-3px);
            box-shadow: 0 8px 25px rgba(0,0,0,0.15);
        }
        
        .section-header {
            padding: 20px 30px;
            background: linear-gradient(45deg, #9b59b6, #8e44ad);
            color: white;
        }
        
        .section-header h2 {
            margin: 0;
            font-size: 1.6em;
            font-weight: 400;
        }
        
        .section-content {
            padding: 30px;
        }
        
        .definition {
            background: linear-gradient(135deg, #f4f0f8, #ece2f0);
            border-left: 5px solid #9b59b6;
            padding: 25px;
            margin: 20px 0;
            border-radius: 0 10px 10px 0;
            box-shadow: 0 3px 15px rgba(155, 89, 182, 0.1);
        }
        
        .definition h4 {
            margin: 0 0 15px 0;
            color: #9b59b6;
            font-size: 1.3em;
            font-weight: 600;
        }
        
        .theorem {
            background: linear-gradient(135deg, #fef9e7, #fcf4dd);
            border-left: 5px solid #f39c12;
            padding: 25px;
            margin: 20px 0;
            border-radius: 0 10px 10px 0;
            box-shadow: 0 3px 15px rgba(243, 156, 18, 0.1);
        }
        
        .theorem h4 {
            margin: 0 0 15px 0;
            color: #f39c12;
            font-size: 1.3em;
            font-weight: 600;
        }
        
        .example {
            background: linear-gradient(135deg, #ebf3fd, #d6e9f8);
            border-left: 5px solid #3498db;
            padding: 25px;
            margin: 20px 0;
            border-radius: 0 10px 10px 0;
            box-shadow: 0 3px 15px rgba(52, 152, 219, 0.1);
        }
        
        .example h4 {
            margin: 0 0 15px 0;
            color: #3498db;
            font-size: 1.3em;
            font-weight: 600;
        }
        
        .practice-problem {
            background: linear-gradient(135deg, #fdf2e9, #fbeee0);
            border-left: 5px solid #e67e22;
            padding: 25px;
            margin: 20px 0;
            border-radius: 0 10px 10px 0;
            box-shadow: 0 3px 15px rgba(230, 126, 34, 0.1);
        }
        
        .practice-problem h4 {
            margin: 0 0 15px 0;
            color: #e67e22;
            font-size: 1.3em;
            font-weight: 600;
        }
        
        .difficulty {
            display: inline-block;
            padding: 3px 10px;
            border-radius: 15px;
            font-size: 0.85em;
            font-weight: 500;
            margin-left: 10px;
        }
        
        .difficulty.medium {
            background: #f39c12;
            color: white;
        }
        
        .difficulty.hard {
            background: #e74c3c;
            color: white;
        }
        
        .difficulty.very-hard {
            background: #8e44ad;
            color: white;
        }
        
        .solution {
            margin-top: 20px;
            padding-top: 20px;
            border-top: 2px dashed #bdc3c7;
        }
        
        .solution-header {
            font-weight: 600;
            color: #2c3e50;
            margin-bottom: 15px;
            font-size: 1.1em;
        }
        
        .viz-container {
            width: 100%;
            height: 400px;
            margin: 25px 0;
            background: white;
            border-radius: 10px;
            box-shadow: 0 3px 15px rgba(0,0,0,0.1);
            overflow: hidden;
        }
        
        .interactive-demo {
            width: 100%;
            height: auto;
            min-height: 480px;
            margin: 25px 0;
            background: #f8f9fa;
            border-radius: 10px;
            box-shadow: 0 3px 15px rgba(0,0,0,0.1);
            padding: 20px;
            position: relative;
        }
        
        .controls {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            margin-bottom: 20px;
            padding: 15px;
            background: white;
            border-radius: 8px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }
        
        .control-group {
            display: flex;
            flex-direction: column;
            gap: 10px;
        }
        
        .controls label {
            display: block;
            margin-bottom: 5px;
            font-weight: 500;
            color: #9b59b6;
        }
        
        .controls input, .controls select {
            width: 100%;
            padding: 8px;
            border: 1px solid #ddd;
            border-radius: 4px;
            font-size: 14px;
        }
        
        .controls input[type="checkbox"] {
            width: auto;
            transform: scale(1.2);
            margin-right: 8px;
            accent-color: #9b59b6;
        }
        
        .controls input[type="range"] {
            width: 100%;
            height: 6px;
            border-radius: 3px;
            background: #ddd;
            outline: none;
        }
        
        .controls input[type="range"]::-webkit-slider-thumb {
            appearance: none;
            width: 18px;
            height: 18px;
            border-radius: 50%;
            background: #9b59b6;
            cursor: pointer;
        }
        
        .controls input[type="range"]::-moz-range-thumb {
            width: 18px;
            height: 18px;
            border-radius: 50%;
            background: #9b59b6;
            cursor: pointer;
            border: none;
        }
        
        .nav-buttons {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-top: 40px;
            padding: 20px 0;
        }
        
        .btn {
            display: inline-flex;
            align-items: center;
            padding: 12px 25px;
            background: linear-gradient(45deg, #9b59b6, #8e44ad);
            color: white;
            text-decoration: none;
            border-radius: 25px;
            font-weight: 500;
            transition: all 0.3s ease;
            box-shadow: 0 3px 15px rgba(155, 89, 182, 0.3);
        }
        
        .btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 20px rgba(155, 89, 182, 0.4);
        }
        
        .btn.prev::before {
            content: '←';
            margin-right: 8px;
            font-size: 1.1em;
        }
        
        .btn.next::after {
            content: '→';
            margin-left: 8px;
            font-size: 1.1em;
        }
        
        footer {
            text-align: center;
            color: white;
            padding: 30px 0;
            opacity: 0.9;
            margin-top: 50px;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 15px;
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.1);
        }
        
        footer p {
            text-align: center;
            margin: 0;
        }
        
        .math-expression {
            text-align: center;
            margin: 15px 0;
            font-size: 1.1em;
        }
        
        ul, ol {
            margin-left: 20px;
            margin-bottom: 15px;
        }
        
        li {
            margin-bottom: 8px;
        }
        
        p {
            margin-bottom: 15px;
            text-align: justify;
        }
        
        .highlight {
            background: linear-gradient(135deg, #fff3cd, #fce4a0);
            padding: 15px;
            border-left: 4px solid #ffc107;
            border-radius: 0 8px 8px 0;
            margin: 15px 0;
        }
        
        .curvature-visualization {
            width: 100%;
            height: 400px;
            margin: 15px 0;
            background: white;
            border-radius: 10px;
            box-shadow: 0 3px 15px rgba(0,0,0,0.1);
            position: relative;
            overflow: hidden;
        }
        
        .curvature-demo {
            width: 100%;
            height: 450px;
            margin: 25px 0;
            background: white;
            border-radius: 10px;
            box-shadow: 0 3px 15px rgba(0,0,0,0.1);
            overflow: hidden;
        }
        
        .formula-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
            margin: 20px 0;
        }
        
        .formula-card {
            background: linear-gradient(135deg, #ff9a9e 0%, #fecfef 50%, #fecfef 100%);
            padding: 20px;
            border-radius: 15px;
            box-shadow: 0 5px 15px rgba(255, 154, 158, 0.3);
            text-align: center;
        }
        
        .formula-card h5 {
            color: #8e44ad;
            font-size: 1.2em;
            margin-bottom: 15px;
        }
        
        .formula-card .formula {
            font-size: 1.2em;
            margin: 15px 0;
            color: #2c3e50;
        }

        /* AI提示方块样式 */
        .ai-warning {
            position: fixed;
            top: 20px;
            left: 20px;
            width: 40px;
            height: 40px;
            background: white;
            border-radius: 8px;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            z-index: 1000;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.2);
            transition: all 0.3s ease;
            border: 2px solid #e0e0e0;
        }
        
        .ai-warning:hover {
            transform: scale(1.1);
            box-shadow: 0 6px 20px rgba(0, 0, 0, 0.3);
            border-color: #ff4444;
        }
        
        .ai-warning::before {
            content: '!';
            color: #e74c3c;
            font-size: 20px;
            font-weight: bold;
            font-family: Arial, sans-serif;
        }
        
        .ai-warning-tooltip {
            position: absolute;
            top: 50px;
            left: 0;
            background: rgba(0, 0, 0, 0.9);
            color: white;
            padding: 16px 20px;
            border-radius: 8px;
            font-size: 14px;
            line-height: 1.5;
            opacity: 0;
            visibility: hidden;
            transform: translateY(-10px);
            transition: all 0.3s ease;
            z-index: 1001;
            width: 250px;
            box-shadow: 0 4px 20px rgba(0, 0, 0, 0.3);
        }
        
        .ai-warning-tooltip::before {
            content: '';
            position: absolute;
            top: -8px;
            left: 20px;
            width: 0;
            height: 0;
            border-left: 8px solid transparent;
            border-right: 8px solid transparent;
            border-bottom: 8px solid rgba(0, 0, 0, 0.9);
        }
        
        .ai-warning:hover .ai-warning-tooltip {
            opacity: 1;
            visibility: visible;
            transform: translateY(0);
        }
        
        @media (max-width: 768px) {
            .container {
                padding: 10px;
            }
            
            h1 {
                font-size: 2em;
            }
            
            .section-content {
                padding: 20px;
            }
            
            .definition, .theorem, .example, .practice-problem {
                padding: 20px;
            }
            
            .nav-buttons {
                flex-direction: column;
                gap: 15px;
            }
            
            .controls {
                grid-template-columns: 1fr;
            }

            .ai-warning {
                width: 35px;
                height: 35px;
                top: 15px;
                left: 15px;
            }
            
            .ai-warning::before {
                font-size: 18px;
            }
            
            .ai-warning-tooltip {
                width: 280px;
                font-size: 13px;
                padding: 14px 18px;
            }
        }
    </style>
</head>
<body>
    <!-- AI内容提示 -->
    <div class="ai-warning">
        <div class="ai-warning-tooltip">
            页面内容由AI生成，请谨慎对待。<br>如发现错误，<a href="https://github.com/learn-advanced-math/learn-advanced-math.github.io/issues" target="_blank" style="color: #ff0000">欢迎反馈</a>。
        </div>
    </div>
    
    <div class="container">
        <a href="../index.html" class="back-link">返回章节概览</a>
        
        <header>
            <h1>3.7 曲率</h1>
            <div class="subtitle">Curvature</div>
        </header>
        
        <!-- 3.7.1 弧微分 -->
        <div class="content-section">
            <div class="section-header">
                <h2>3.7.1 弧微分</h2>
            </div>
            <div class="section-content">
                <div class="definition">
                    <h4>弧长与弧微分的定义</h4>
                    <p>设曲线 $y = f(x)$ 在区间 $[a, b]$ 上连续且有连续导数，则从点 $A(a, f(a))$ 到点 $B(b, f(b))$ 的<strong>弧长</strong>为：</p>
                    
                    <div class="math-expression">
                        $$s = \int_a^b \sqrt{1 + (y')^2} \, dx$$
                    </div>
                    
                    <p><strong>弧微分</strong>定义为弧长元素：</p>
                    <div class="math-expression">
                        $$ds = \sqrt{1 + (y')^2} \, dx = \sqrt{1 + \left(\frac{dy}{dx}\right)^2} \, dx$$
                    </div>
                    
                    <div class="highlight">
                        <p><strong>几何意义：</strong>弧微分 $ds$ 表示曲线上无穷小弧段的长度。</p>
                    </div>
                </div>
                
                <div class="theorem">
                    <h4>参数方程的弧微分</h4>
                    <p>若曲线由参数方程 $\begin{cases} x = \varphi(t) \\ y = \psi(t) \end{cases}$ 给出，则：</p>
                    
                    <div class="math-expression">
                        $$ds = \sqrt{\left(\frac{dx}{dt}\right)^2 + \left(\frac{dy}{dt}\right)^2} \, dt = \sqrt{(\varphi'(t))^2 + (\psi'(t))^2} \, dt$$
                    </div>
                    
                    <p><strong>极坐标形式：</strong>若曲线方程为 $r = r(\theta)$，则：</p>
                    <div class="math-expression">
                        $$ds = \sqrt{r^2 + \left(\frac{dr}{d\theta}\right)^2} \, d\theta$$
                    </div>
                </div>
                
                <div class="example">
                    <h4>例1：计算直线的弧长</h4>
                    <p>计算直线 $y = 2x + 1$ 从 $x = 0$ 到 $x = 3$ 的弧长。</p>
                    
                    <div class="solution">
                        <div class="solution-header">解：</div>
                        <p>对于直线 $y = 2x + 1$，有 $y' = 2$，所以：</p>
                        $$ds = \sqrt{1 + (y')^2} dx = \sqrt{1 + 4} dx = \sqrt{5} dx$$
                        <p>弧长为：</p>
                        $$s = \int_0^3 \sqrt{5} dx = \sqrt{5} \cdot 3 = 3\sqrt{5}$$
                    </div>
                </div>
                
                <div class="example">
                    <h4>例2：参数方程的弧长</h4>
                    <p>求圆的参数方程 $\begin{cases} x = a\cos t \\ y = a\sin t \end{cases}$ ($0 \leq t \leq 2\pi$) 的弧长。</p>
                    
                    <div class="solution">
                        <div class="solution-header">解：</div>
                        <p>计算导数：$\frac{dx}{dt} = -a\sin t$，$\frac{dy}{dt} = a\cos t$</p>
                        <p>弧微分：</p>
                        $$ds = \sqrt{(-a\sin t)^2 + (a\cos t)^2} dt = \sqrt{a^2(\sin^2 t + \cos^2 t)} dt = a \, dt$$
                        <p>整个圆的弧长为：</p>
                        $$s = \int_0^{2\pi} a \, dt = 2\pi a$$
                    </div>
                </div>
                
                <div class="curvature-visualization" id="arc-length-plot"></div>
            </div>
        </div>
        
        <!-- 3.7.2 曲率及其计算公式 -->
        <div class="content-section">
            <div class="section-header">
                <h2>3.7.2 曲率及其计算公式</h2>
            </div>
            <div class="section-content">
                <div class="definition">
                    <h4>曲率的定义</h4>
                    <p><strong>曲率</strong>是描述曲线弯曲程度的量。设曲线上一点 $M$，在该点附近取弧长为 $\Delta s$ 的弧段，其对应的转角为 $\Delta \alpha$，则该点的曲率定义为：</p>
                    
                    <div class="math-expression">
                        $$\kappa = \lim_{\Delta s \to 0} \left|\frac{\Delta \alpha}{\Delta s}\right| = \left|\frac{d\alpha}{ds}\right|$$
                    </div>
                    
                    <p>其中 $\alpha$ 是曲线在该点的切线与 $x$ 轴正方向的夹角。</p>
                </div>
                
                <div class="theorem">
                    <h4>曲率的计算公式</h4>
                    <p><strong>1. 参数方程形式</strong></p>
                    <p>设曲线由参数方程 $\begin{cases} x = \varphi(t) \\ y = \psi(t) \end{cases}$ 给出，则曲率为：</p>
                    <div class="math-expression">
                        $$\kappa = \frac{|\varphi'(t)\psi''(t) - \psi'(t)\varphi''(t)|}{[(\varphi'(t))^2 + (\psi'(t))^2]^{3/2}}$$
                    </div>
                    
                    <p><strong>2. 显式方程形式</strong></p>
                    <p>对于曲线 $y = f(x)$，曲率公式为：</p>
                    <div class="math-expression">
                        $$\kappa = \frac{|y''|}{(1 + (y')^2)^{3/2}}$$
                    </div>
                    
                    <p><strong>3. 极坐标形式</strong></p>
                    <p>对于极坐标方程 $r = r(\theta)$，曲率为：</p>
                    <div class="math-expression">
                        $$\kappa = \frac{|r^2 + 2(r')^2 - rr''|}{(r^2 + (r')^2)^{3/2}}$$
                    </div>
                </div>
                
                <div class="formula-grid">
                    <div class="formula-card">
                        <h5>直线的曲率</h5>
                        <div class="formula">$$\kappa = 0$$</div>
                        <p>直线不弯曲，曲率为零</p>
                    </div>
                    <div class="formula-card">
                        <h5>圆的曲率</h5>
                        <div class="formula">$$\kappa = \frac{1}{R}$$</div>
                        <p>半径为 $R$ 的圆，曲率为 $\frac{1}{R}$</p>
                    </div>
                </div>
                
                <div class="example">
                    <h4>例3：计算抛物线的曲率</h4>
                    <p>求抛物线 $y = x^2$ 在点 $(1, 1)$ 处的曲率。</p>
                    
                    <div class="solution">
                        <div class="solution-header">解：</div>
                        <p>对于 $y = x^2$，有：</p>
                        <ul>
                            <li>$y' = 2x$</li>
                            <li>$y'' = 2$</li>
                        </ul>
                        <p>在点 $(1, 1)$ 处：</p>
                        <ul>
                            <li>$y'(1) = 2$</li>
                            <li>$y''(1) = 2$</li>
                        </ul>
                        <p>应用曲率公式：</p>
                        $$\kappa = \frac{|y''|}{(1 + (y')^2)^{3/2}} = \frac{|2|}{(1 + 2^2)^{3/2}} = \frac{2}{5^{3/2}} = \frac{2}{5\sqrt{5}} = \frac{2\sqrt{5}}{25}$$
                    </div>
                </div>
                
                <div class="example">
                    <h4>例4：椭圆的曲率</h4>
                    <p>求椭圆 $\frac{x^2}{a^2} + \frac{y^2}{b^2} = 1$ 在顶点处的曲率。</p>
                    
                    <div class="solution">
                        <div class="solution-header">解：</div>
                        <p>椭圆的参数方程为：$\begin{cases} x = a\cos t \\ y = b\sin t \end{cases}$</p>
                        <p>计算导数：</p>
                        <ul>
                            <li>$x'(t) = -a\sin t$, $x''(t) = -a\cos t$</li>
                            <li>$y'(t) = b\cos t$, $y''(t) = -b\sin t$</li>
                        </ul>
                        <p>在点 $(a, 0)$（$t = 0$）处：</p>
                        $$\kappa = \frac{|(-a\sin 0)(-b\sin 0) - (b\cos 0)(-a\cos 0)|}{[(-a\sin 0)^2 + (b\cos 0)^2]^{3/2}} = \frac{ab}{b^3} = \frac{a}{b^2}$$
                        <p>类似地，在点 $(0, b)$（$t = \pi/2$）处：$\kappa = \frac{b}{a^2}$</p>
                    </div>
                </div>
                
                <div class="interactive-demo">
                    <div class="controls">
                        <div class="control-group">
                            <label for="curve-type">选择曲线类型：</label>
                            <select id="curve-type">
                                <option value="parabola">抛物线 y = x²</option>
                                <option value="sine">正弦函数 y = sin(x)</option>
                                <option value="circle">圆 x² + y² = 4</option>
                                <option value="cubic">三次函数 y = x³ - 3x</option>
                            </select>
                        </div>
                        <div class="control-group">
                            <label for="point-x">计算点的x坐标：</label>
                            <input type="range" id="point-x" value="1" step="0.1" min="-5" max="5">
                        </div>
                    </div>
                    
                    <div class="curvature-demo" id="curvature-demo-plot"></div>
                </div>
            </div>
        </div>
        
        <!-- 3.7.3 曲率圆与曲率半径 -->
        <div class="content-section">
            <div class="section-header">
                <h2>3.7.3 曲率圆与曲率半径</h2>
            </div>
            <div class="section-content">
                <div class="definition">
                    <h4>曲率半径</h4>
                    <p><strong>曲率半径</strong>定义为曲率的倒数：</p>
                    <div class="math-expression">
                        $$R = \frac{1}{\kappa}$$
                    </div>
                    <p>曲率半径表示曲线在该点处的"弯曲半径"。曲率越大，曲率半径越小，曲线越弯曲。</p>
                </div>
                
                <div class="definition">
                    <h4>曲率圆（密切圆）</h4>
                    <p><strong>曲率圆</strong>是过曲线上一点，与曲线在该点有相同的切线和曲率的圆。曲率圆具有以下性质：</p>
                    <ul>
                        <li>圆心位于曲线该点的法线上</li>
                        <li>半径等于该点的曲率半径 $R = \frac{1}{\kappa}$</li>
                        <li>与曲线在该点至少有二阶接触</li>
                    </ul>
                    
                    <div class="highlight">
                        <p><strong>几何意义：</strong>曲率圆是在该点处最接近原曲线的圆，它反映了曲线在该点附近的弯曲状况。</p>
                    </div>
                </div>
                
                <div class="theorem">
                    <h4>曲率圆圆心的坐标公式</h4>
                    <p>设曲线 $y = f(x)$ 在点 $(x_0, y_0)$ 处的曲率圆圆心坐标为 $(\xi, \eta)$，则：</p>
                    <div class="math-expression">
                        $$\begin{cases}
                        \xi = x_0 - \frac{y'_0(1 + (y'_0)^2)}{y''_0} \\
                        \eta = y_0 + \frac{1 + (y'_0)^2}{y''_0}
                        \end{cases}$$
                    </div>
                    <p>其中 $y'_0 = y'(x_0)$，$y''_0 = y''(x_0)$。</p>
                </div>
                
                <div class="example">
                    <h4>例5：抛物线的曲率圆</h4>
                    <p>求抛物线 $y = x^2$ 在原点 $(0, 0)$ 处的曲率圆方程。</p>
                    
                    <div class="solution">
                        <div class="solution-header">解：</div>
                        <p>对于 $y = x^2$：$y' = 2x$，$y'' = 2$</p>
                        <p>在原点 $(0, 0)$ 处：$y'(0) = 0$，$y''(0) = 2$</p>
                        <p>曲率：$\kappa = \frac{|2|}{(1 + 0^2)^{3/2}} = 2$</p>
                        <p>曲率半径：$R = \frac{1}{\kappa} = \frac{1}{2}$</p>
                        <p>曲率圆圆心坐标：</p>
                        $$\xi = 0 - \frac{0 \cdot (1 + 0^2)}{2} = 0$$
                        $$\eta = 0 + \frac{1 + 0^2}{2} = \frac{1}{2}$$
                        <p>曲率圆方程：$x^2 + \left(y - \frac{1}{2}\right)^2 = \frac{1}{4}$</p>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- 3.7.4 曲率中心的计算公式、渐屈线与渐伸线 -->
        <div class="content-section">
            <div class="section-header">
                <h2>3.7.4 曲率中心的计算公式、渐屈线与渐伸线</h2>
            </div>
            <div class="section-content">
                    <div class="definition">
                        <h4>重要提醒：渐屈线的几何意义</h4>
                        <p>渐屈线（evolute）是曲率圆圆心的轨迹，关键在于理解<strong>曲率圆圆心必须位于曲线弯曲的内侧</strong>：</p>
                        <ul>
                            <li><strong>摆线</strong>：曲线向上凸出，所以曲率中心在下方，渐屈线位于原摆线下方</li>
                            <li><strong>星形线</strong>：曲线向外凸出，曲率中心在内部，渐屈线是内部的一个缩小的星形线</li>
                            <li><strong>椭圆</strong>：曲线是闭合的凸曲线，曲率中心形成内部的四瓣玫瑰线</li>
                            <li><strong>抛物线</strong>：曲线向上开口，曲率中心在上方形成半立方抛物线</li>
                        </ul>
                        <p><strong>验证方法：</strong>曲率中心应该位于曲线上该点的法线上，距离等于曲率半径，且在曲线凹侧。</p>
                    </div>
                    
                    <div class="definition">
                        <h4>曲率中心</h4>
                        <p><strong>曲率中心</strong>就是曲率圆的圆心，也称为<strong>密切圆圆心</strong>。曲率中心的集合构成了原曲线的<strong>渐屈线</strong>（evolute）。</p>
                    </div>                <div class="theorem">
                    <h4>参数曲线的曲率中心公式</h4>
                    <p>设曲线由参数方程 $\begin{cases} x = \varphi(t) \\ y = \psi(t) \end{cases}$ 给出，则曲率中心坐标为：</p>
                    <div class="math-expression">
                        $$\begin{cases}
                        \xi = \varphi(t) - \frac{\psi'(t)[(\varphi'(t))^2 + (\psi'(t))^2]}{\varphi'(t)\psi''(t) - \psi'(t)\varphi''(t)} \\
                        \eta = \psi(t) + \frac{\varphi'(t)[(\varphi'(t))^2 + (\psi'(t))^2]}{\varphi'(t)\psi''(t) - \psi'(t)\varphi''(t)}
                        \end{cases}$$
                    </div>
                </div>
                
                <div class="definition">
                    <h4>渐屈线与渐伸线</h4>
                    <p><strong>渐屈线（Evolute）：</strong>原曲线上所有点的曲率中心的轨迹。</p>
                    <p><strong>渐伸线（Involute）：</strong>与渐屈线相对应，如果曲线 $C_1$ 是曲线 $C_2$ 的渐屈线，则 $C_2$ 是 $C_1$ 的渐伸线。</p>
                    
                    <div class="highlight">
                        <p><strong>性质：</strong></p>
                        <ul>
                            <li>渐屈线上每一点都是原曲线某点处法线上的曲率中心</li>
                            <li>原曲线是其渐屈线的渐伸线</li>
                            <li>从渐屈线上任一点到原曲线的切线长度等于该段渐屈线的弧长</li>
                        </ul>
                    </div>
                </div>
                
                <div class="example">
                    <h4>例6：椭圆的渐屈线</h4>
                    <p>求椭圆 $\frac{x^2}{a^2} + \frac{y^2}{b^2} = 1$ 的渐屈线方程。</p>
                    
                    <div class="solution">
                        <div class="solution-header">解：</div>
                        <p>椭圆的参数方程：$\begin{cases} x = a\cos t \\ y = b\sin t \end{cases}$</p>
                        <p>计算导数：</p>
                        <ul>
                            <li>$x'(t) = -a\sin t$, $x''(t) = -a\cos t$</li>
                            <li>$y'(t) = b\cos t$, $y''(t) = -b\sin t$</li>
                        </ul>
                        <p>应用曲率中心公式：</p>
                        <p>已知：$(x')^2 + (y')^2 = a^2\sin^2 t + b^2\cos^2 t$，$x'y'' - y'x'' = ab$</p>
                        
                        $$\xi = a\cos t - \frac{b\cos t(a^2\sin^2 t + b^2\cos^2 t)}{ab} = \cos t\left(a - \frac{a^2\sin^2 t + b^2\cos^2 t}{a}\right)$$
                        $$= \cos t\left(\frac{a^2\cos^2 t - b^2\cos^2 t}{a}\right) = \frac{(a^2-b^2)\cos^3 t}{a}$$
                        
                        <p>类似地：</p>
                        $$\eta = b\sin t + \frac{(-a\sin t)(a^2\sin^2 t + b^2\cos^2 t)}{ab} = \sin t\left(b - \frac{a^2\sin^2 t + b^2\cos^2 t}{b}\right)$$
                        $$= \sin t\left(\frac{b^2\sin^2 t - a^2\sin^2 t}{b}\right) = \frac{(b^2-a^2)\sin^3 t}{b}$$
                        
                        <p>椭圆的渐屈线参数方程为：$\begin{cases} \xi = \frac{(a^2-b^2)\cos^3 t}{a} \\ \eta = \frac{(b^2-a^2)\sin^3 t}{b} \end{cases}$</p>
                        
                        <p>消去参数 $t$，可得渐屈线的直角坐标方程：</p>
                        $$\left(\frac{a\xi}{a^2-b^2}\right)^{2/3} + \left(\frac{b\eta}{b^2-a^2}\right)^{2/3} = 1$$
                    </div>
                </div>
                
                <div class="example">
                    <h4>例7：摆线的渐屈线</h4>
                    <p>求摆线 $\begin{cases} x = a(t - \sin t) \\ y = a(1 - \cos t) \end{cases}$ 的渐屈线。</p>
                    
                    <div class="solution">
                        <div class="solution-header">解：</div>
                        <p>计算导数：</p>
                        <ul>
                            <li>$x'(t) = a(1 - \cos t)$, $x''(t) = a\sin t$</li>
                            <li>$y'(t) = a\sin t$, $y''(t) = a\cos t$</li>
                        </ul>
                        <p>应用曲率中心公式：</p>
                        <p>分母：$x'y'' - y'x'' = a(1-\cos t) \cdot a\cos t - a\sin t \cdot a\sin t = a^2(\cos t - \cos^2 t - \sin^2 t) = a^2(\cos t - 1) = -a^2(1-\cos t)$</p>
                        
                        <p>重新仔细计算：</p>
                        <p>曲率中心公式：$\xi = x - \frac{y'[(x')^2 + (y')^2]}{x'y'' - y'x''}$，$\eta = y + \frac{x'[(x')^2 + (y')^2]}{x'y'' - y'x''}$</p>
                        
                        <p>已知：$(x')^2 + (y')^2 = 2a^2(1-\cos t)$，$x'y'' - y'x'' = -a^2(1-\cos t)$</p>
                        
                        <p>因此：</p>
                        $$\xi = a(t - \sin t) - \frac{a\sin t \cdot 2a^2(1-\cos t)}{-a^2(1-\cos t)} = a(t - \sin t) + 2a\sin t = a(t + \sin t)$$
                        
                        $$\eta = a(1 - \cos t) + \frac{a(1-\cos t) \cdot 2a^2(1-\cos t)}{-a^2(1-\cos t)} = a(1 - \cos t) - 2a(1-\cos t) = -a(1 - \cos t)$$
                        
                        <p>摆线的渐屈线方程为：$\begin{cases} \xi = a(t + \sin t) \\ \eta = -a(1 - \cos t) \end{cases}$</p>
                        
                        <p><strong>几何意义：</strong>这是一条全等的摆线，相对于原摆线的变换为：</p>
                        <ul>
                            <li>在y方向上反射（$y \to -y$）</li>
                            <li>在x方向上相位偏移（$t \to t$ 变为 $t + \sin t$）</li>
                        </ul>
                        
                        <p><strong>验证：</strong>当 $t = 0$ 时，原摆线在 $(0, 0)$，渐屈线在 $(0, 0)$；当 $t = \pi$ 时，原摆线在 $(a\pi, 2a)$，渐屈线在 $(a\pi, 0)$。</p>
                    </div>
                </div>
                
                <div class="interactive-demo">
                    <div class="controls">
                        <div class="control-group">
                            <label for="evolute-curve-type">选择曲线类型：</label>
                            <select id="evolute-curve-type">
                                <option value="cycloid">摆线</option>
                                <option value="astroid">星形线</option>
                                <option value="ellipse">椭圆</option>
                                <option value="parabola">抛物线</option>
                            </select>
                        </div>
                        <div class="control-group">
                            <label for="show-evolute">显示渐屈线：</label>
                            <input type="checkbox" id="show-evolute" checked>
                        </div>
                        <div class="control-group">
                            <label for="show-centers">显示曲率中心：</label>
                            <input type="checkbox" id="show-centers" checked>
                        </div>
                        <div class="control-group">
                            <label for="animation-speed">动画速度：</label>
                            <input type="range" id="animation-speed" min="0.1" max="2" value="1" step="0.1">
                        </div>
                    </div>
                    
                    <div class="curvature-demo" id="evolute-demo-plot"></div>
                </div>
            </div>
        </div>
        
        <!-- 习题部分 -->
        <div class="content-section">
            <div class="section-header">
                <h2>综合习题</h2>
            </div>
            <div class="section-content">
                <div class="practice-problem">
                    <h4>习题1 <span class="difficulty medium">中等难度</span></h4>
                    <p>求曲线 $y = \ln x$ 在点 $(1, 0)$ 处的曲率和曲率半径。</p>
                    
                    <div class="solution">
                        <div class="solution-header">解：</div>
                        <p>对于 $y = \ln x$：</p>
                        <ul>
                            <li>$y' = \frac{1}{x}$</li>
                            <li>$y'' = -\frac{1}{x^2}$</li>
                        </ul>
                        <p>在点 $(1, 0)$ 处：</p>
                        <ul>
                            <li>$y'(1) = 1$</li>
                            <li>$y''(1) = -1$</li>
                        </ul>
                        <p>曲率：</p>
                        $$\kappa = \frac{|y''|}{(1 + (y')^2)^{3/2}} = \frac{|-1|}{(1 + 1^2)^{3/2}} = \frac{1}{2^{3/2}} = \frac{\sqrt{2}}{4}$$
                        <p>曲率半径：</p>
                        $$R = \frac{1}{\kappa} = \frac{4}{\sqrt{2}} = 2\sqrt{2}$$
                    </div>
                </div>
                
                <div class="practice-problem">
                    <h4>习题2 <span class="difficulty hard">较难</span></h4>
                    <p>证明：半径为 $R$ 的圆的曲率处处为 $\frac{1}{R}$。</p>
                    
                    <div class="solution">
                        <div class="solution-header">解：</div>
                        <p>设圆的参数方程为：$\begin{cases} x = R\cos t \\ y = R\sin t \end{cases}$</p>
                        <p>计算导数：</p>
                        <ul>
                            <li>$x'(t) = -R\sin t$, $x''(t) = -R\cos t$</li>
                            <li>$y'(t) = R\cos t$, $y''(t) = -R\sin t$</li>
                        </ul>
                        <p>应用参数曲线的曲率公式：</p>
                        $$\kappa = \frac{|x'y'' - y'x''|}{[(x')^2 + (y')^2]^{3/2}}$$
                        $$= \frac{|(-R\sin t)(-R\sin t) - (R\cos t)(-R\cos t)|}{[R^2\sin^2 t + R^2\cos^2 t]^{3/2}}$$
                        $$= \frac{R^2(\sin^2 t + \cos^2 t)}{R^3} = \frac{R^2}{R^3} = \frac{1}{R}$$
                        <p>因此，半径为 $R$ 的圆的曲率处处为 $\frac{1}{R}$。</p>
                    </div>
                </div>
                
                <div class="practice-problem">
                    <h4>习题3 <span class="difficulty very-hard">很难</span></h4>
                    <p>求星形线 $\begin{cases} x = a\cos^3 t \\ y = a\sin^3 t \end{cases}$ 的渐屈线方程。</p>
                    
                    <div class="solution">
                        <div class="solution-header">解：</div>
                        <p>计算导数：</p>
                        <ul>
                            <li>$x'(t) = -3a\cos^2 t \sin t$</li>
                            <li>$x''(t) = -3a(2\cos t \sin t \cdot (-\sin t) + \cos^2 t \cdot \cos t)$</li>
                            <li>$\phantom{x''(t)} = 6a\cos t \sin^2 t - 3a\cos^3 t = 3a\cos t(2\sin^2 t - \cos^2 t)$</li>
                            <li>$y'(t) = 3a\sin^2 t \cos t$</li>
                            <li>$y''(t) = 3a(\sin^2 t \cdot (-\sin t) + 2\sin t \cos t \cdot \cos t)$</li>
                            <li>$\phantom{y''(t)} = -3a\sin^3 t + 6a\sin t \cos^2 t = 3a\sin t(2\cos^2 t - \sin^2 t)$</li>
                        </ul>
                        
                        <p>应用曲率中心公式，重新仔细计算：</p>
                        
                        <p>对于曲率中心公式：</p>
                        $$\xi = x - \frac{y'[(x')^2 + (y')^2]}{x'y'' - y'x''}$$
                        $$\eta = y + \frac{x'[(x')^2 + (y')^2]}{x'y'' - y'x''}$$
                        
                        <p>已知：</p>
                        <ul>
                            <li>$(x')^2 + (y')^2 = 9a^2\cos^4 t \sin^2 t + 9a^2\sin^4 t \cos^2 t = 9a^2\cos^2 t \sin^2 t$</li>
                            <li>$x'y'' - y'x'' = (-3a\cos^2 t \sin t)(3a\sin t(2\cos^2 t - \sin^2 t)) - (3a\sin^2 t \cos t)(3a\cos t(2\sin^2 t - \cos^2 t))$</li>
                            <li>$= -9a^2\cos^2 t \sin^2 t(2\cos^2 t - \sin^2 t) - 9a^2\sin^2 t \cos^2 t(2\sin^2 t - \cos^2 t)$</li>
                            <li>$= -9a^2\cos^2 t \sin^2 t[(2\cos^2 t - \sin^2 t) + (2\sin^2 t - \cos^2 t)] = -9a^2\cos^2 t \sin^2 t(\cos^2 t + \sin^2 t) = -9a^2\cos^2 t \sin^2 t$</li>
                        </ul>
                        
                        <p>代入公式得：</p>
                        $$\xi = a\cos^3 t - \frac{3a\sin^2 t \cos t \cdot 9a^2\cos^2 t \sin^2 t}{-9a^2\cos^2 t \sin^2 t} = a\cos^3 t + 3a\sin^2 t \cos t = a\cos t(\cos^2 t + 3\sin^2 t)$$
                        
                        <p>使用恒等式 $\cos^2 t + 3\sin^2 t = \cos^2 t + 3(1-\cos^2 t) = 3 - 2\cos^2 t$：</p>
                        $$\xi = a\cos t(3 - 2\cos^2 t) = 3a\cos t - 2a\cos^3 t$$
                        
                        <p>类似地：</p>
                        $$\eta = a\sin t(\sin^2 t + 3\cos^2 t) = a\sin t(3 - 2\sin^2 t) = 3a\sin t - 2a\sin^3 t$$
                        
                        <p>因此，星形线的渐屈线参数方程为：</p>
                        $$\begin{cases}
                        \xi = 3a\cos t - 2a\cos^3 t \\
                        \eta = 3a\sin t - 2a\sin^3 t
                        \end{cases}$$
                        
                        <p>这可以重写为：</p>
                        $$\begin{cases}
                        \xi = a\cos t(3 - 2\cos^2 t) \\
                        \eta = a\sin t(3 - 2\sin^2 t)
                        \end{cases}$$
                        
                        <p><strong>几何意义：</strong></p>
                        <ul>
                            <li>渐屈线是一个<strong>放大了2倍、并旋转了45°</strong>的星形线</li>
                            <li><a href="https://demo2.yunser.com/math/fooplot/#W3sidHlwZSI6MiwiZXF4IjoiY29zKHMpKiozIiwiZXF5Ijoic2luKHMpKiozIiwiY29sb3IiOiIjMDBGRjAwIiwic21pbiI6IjAiLCJzbWF4IjoiMnBpIiwic3N0ZXAiOiIuMDEifSx7InR5cGUiOjIsImVxeCI6IjNjb3MocyktMmNvcyhzKSoqMyIsImVxeSI6IjNzaW4ocyktMnNpbihzKSoqMyIsImNvbG9yIjoiI2ZmMDAwMCIsInNtaW4iOiIwIiwic21heCI6IjJwaSIsInNzdGVwIjoiLjAxIn0seyJ0eXBlIjoxMDAwfV0-" target="_blank">图形示意</a> </li>
                        </ul>
                    </div>
                </div>
            </div>
        </div>
        
        <div class="nav-buttons">
            <a href="3.6.html" class="btn prev">上一节：3.6 函数图形的描绘</a>
            <a href="3.8.html" class="btn next">下一节：3.8 方程的近似解</a>
        </div>
        
        <footer>
            <p>&copy; 2025 高等数学复习系统 - 曲率</p>
        </footer>
    </div>

    <script>
        // 弧长演示
        function createArcLengthDemo() {
            const plotDiv = document.getElementById('arc-length-plot');
            
            const x = [];
            const y = [];
            const x_points = [];
            const y_points = [];
            
            // 生成抛物线数据
            for (let i = -2; i <= 2; i += 0.1) {
                x.push(i);
                y.push(i * i);
            }
            
            // 标记一些特殊点
            for (let i = -2; i <= 2; i += 0.5) {
                x_points.push(i);
                y_points.push(i * i);
            }
            
            const traces = [
                {
                    x: x,
                    y: y,
                    type: 'scatter',
                    mode: 'lines',
                    name: 'y = x²',
                    line: { color: '#9b59b6', width: 3 }
                },
                {
                    x: x_points,
                    y: y_points,
                    type: 'scatter',
                    mode: 'markers',
                    name: '弧长计算点',
                    marker: { color: '#e74c3c', size: 8 }
                }
            ];
            
            const layout = {
                title: '弧长演示：抛物线 y = x²',
                xaxis: {
                    title: 'x',
                    range: [-2.5, 2.5],
                    zeroline: true
                },
                yaxis: {
                    title: 'y',
                    range: [-0.5, 4.5],
                    zeroline: true
                },
                showlegend: true,
                plot_bgcolor: 'rgba(0,0,0,0)',
                paper_bgcolor: 'rgba(0,0,0,0)',
                font: { family: 'Microsoft YaHei', size: 12 }
            };
            
            Plotly.newPlot(plotDiv, traces, layout, {responsive: true});
        }
        
        // 曲率演示
        function createCurvatureDemo() {
            const plotDiv = document.getElementById('curvature-demo-plot');
            const curveTypeSelect = document.getElementById('curve-type');
            const pointXInput = document.getElementById('point-x');
            
            function updatePlot() {
                const curveType = curveTypeSelect.value;
                const pointX = parseFloat(pointXInput.value);
                
                let x = [], y = [], title = '', curveFunc, derivFunc, deriv2Func;
                let xRange = [-3, 3];
                
                switch(curveType) {
                    case 'parabola':
                        title = '抛物线 y = x² 的曲率';
                        curveFunc = t => t * t;
                        derivFunc = t => 2 * t;
                        deriv2Func = t => 2;
                        break;
                        
                    case 'sine':
                        title = '正弦函数 y = sin(x) 的曲率';
                        curveFunc = t => Math.sin(t);
                        derivFunc = t => Math.cos(t);
                        deriv2Func = t => -Math.sin(t);
                        xRange = [-Math.PI, Math.PI];
                        break;
                        
                    case 'circle':
                        title = '圆 x² + y² = 4 的曲率';
                        curveFunc = t => Math.sqrt(4 - t * t);
                        derivFunc = t => -t / Math.sqrt(4 - t * t);
                        deriv2Func = t => -4 / Math.pow(4 - t * t, 1.5);
                        xRange = [-2, 2];
                        break;
                        
                    case 'cubic':
                        title = '三次函数 y = x³ - 3x 的曲率';
                        curveFunc = t => t * t * t - 3 * t;
                        derivFunc = t => 3 * t * t - 3;
                        deriv2Func = t => 6 * t;
                        break;
                }
                
                // 生成曲线数据
                for (let i = xRange[0]; i <= xRange[1]; i += 0.05) {
                    if (curveType === 'circle' && Math.abs(i) >= 2) continue;
                    x.push(i);
                    y.push(curveFunc(i));
                }
                
                // 计算指定点的曲率
                const y1 = derivFunc(pointX);
                const y2 = deriv2Func(pointX);
                const curvature = Math.abs(y2) / Math.pow(1 + y1 * y1, 1.5);
                const radius = 1 / curvature;
                
                // 计算曲率圆圆心
                const centerX = pointX - (y1 * (1 + y1 * y1)) / y2;
                const centerY = curveFunc(pointX) + (1 + y1 * y1) / y2;
                
                // 生成曲率圆数据
                const circleX = [], circleY = [];
                for (let t = 0; t <= 2 * Math.PI; t += 0.1) {
                    circleX.push(centerX + radius * Math.cos(t));
                    circleY.push(centerY + radius * Math.sin(t));
                }
                
                const traces = [
                    {
                        x: x,
                        y: y,
                        type: 'scatter',
                        mode: 'lines',
                        name: '原曲线',
                        line: { color: '#9b59b6', width: 3 }
                    },
                    {
                        x: [pointX],
                        y: [curveFunc(pointX)],
                        type: 'scatter',
                        mode: 'markers',
                        name: `计算点 (${pointX.toFixed(2)}, ${curveFunc(pointX).toFixed(2)})`,
                        marker: { color: '#e74c3c', size: 10 }
                    },
                    {
                        x: circleX,
                        y: circleY,
                        type: 'scatter',
                        mode: 'lines',
                        name: `曲率圆 (κ = ${curvature.toFixed(4)})`,
                        line: { color: '#27ae60', width: 2, dash: 'dash' }
                    },
                    {
                        x: [centerX],
                        y: [centerY],
                        type: 'scatter',
                        mode: 'markers',
                        name: '曲率中心',
                        marker: { color: '#f39c12', size: 8, symbol: 'x' }
                    }
                ];
                
                const layout = {
                    title: `${title}<br>曲率: κ = ${curvature.toFixed(4)}, 曲率半径: R = ${radius.toFixed(4)}`,
                    xaxis: {
                        title: 'x',
                        zeroline: true
                    },
                    yaxis: {
                        title: 'y',
                        zeroline: true,
                        scaleanchor: 'x',
                        scaleratio: 1
                    },
                    showlegend: true,
                    plot_bgcolor: 'rgba(0,0,0,0)',
                    paper_bgcolor: 'rgba(0,0,0,0)',
                    font: { family: 'Microsoft YaHei', size: 12 }
                };
                
                Plotly.newPlot(plotDiv, traces, layout, {responsive: true});
            }
            
            // 事件监听器
            curveTypeSelect.addEventListener('change', updatePlot);
            pointXInput.addEventListener('input', updatePlot);
            
            // 初始化
            updatePlot();
        }
        
        // 渐屈线演示
        function createEvoluteDemo() {
            const plotDiv = document.getElementById('evolute-demo-plot');
            const curveTypeSelect = document.getElementById('evolute-curve-type');
            const showEvoluteCheckbox = document.getElementById('show-evolute');
            const showCentersCheckbox = document.getElementById('show-centers');
            const animationSpeedSlider = document.getElementById('animation-speed');
            
            let animationFrame;
            let t = 0;
            
            function updatePlot() {
                const curveType = curveTypeSelect.value;
                const showEvolute = showEvoluteCheckbox.checked;
                const showCenters = showCentersCheckbox.checked;
                
                let originalX = [], originalY = [], evoluteX = [], evoluteY = [];
                let centersX = [], centersY = [];
                let title = '', description = '';
                
                // 计算曲率中心的通用函数
                function calculateCurvatureCenter(x, y, xp, yp, xpp, ypp) {
                    const denominator = xp * ypp - yp * xpp;
                    if (Math.abs(denominator) < 1e-10) return null; // 避免除零
                    
                    const numerator = xp * xp + yp * yp;
                    const xi = x - (yp * numerator) / denominator;
                    const eta = y + (xp * numerator) / denominator;
                    return { x: xi, y: eta };
                }
                
                switch(curveType) {
                    case 'cycloid':
                        title = '摆线及其渐屈线';
                        description = '摆线的渐屈线是平移后的摆线';
                        const a = 2;
                        
                        for (let i = 0; i <= 4 * Math.PI; i += 0.1) {
                            // 原摆线
                            const x = a * (i - Math.sin(i));
                            const y = a * (1 - Math.cos(i));
                            originalX.push(x);
                            originalY.push(y);
                            
                            if (showEvolute && i > 0.1 && i < 4 * Math.PI - 0.1) {
                                // 计算导数
                                const xp = a * (1 - Math.cos(i));
                                const yp = a * Math.sin(i);
                                const xpp = a * Math.sin(i);
                                const ypp = a * Math.cos(i);
                                
                                const center = calculateCurvatureCenter(x, y, xp, yp, xpp, ypp);
                                if (center) {
                                    evoluteX.push(center.x);
                                    evoluteY.push(center.y);
                                }
                            }
                        }
                        
                        if (showCenters) {
                            for (let i = 0.5; i <= 4 * Math.PI; i += Math.PI / 4) {
                                const x = a * (i - Math.sin(i));
                                const y = a * (1 - Math.cos(i));
                                const xp = a * (1 - Math.cos(i));
                                const yp = a * Math.sin(i);
                                const xpp = a * Math.sin(i);
                                const ypp = a * Math.cos(i);
                                
                                const center = calculateCurvatureCenter(x, y, xp, yp, xpp, ypp);
                                if (center) {
                                    centersX.push(center.x);
                                    centersY.push(center.y);
                                }
                            }
                        }
                        break;
                        
                    case 'astroid':
                        title = '星形线及其渐屈线';
                        description = '星形线的渐屈线是放大并旋转了45°的星形线';
                        const b = 3;
                        
                        for (let i = 0; i <= 2 * Math.PI; i += 0.05) {
                            // 原星形线
                            const x = b * Math.pow(Math.cos(i), 3);
                            const y = b * Math.pow(Math.sin(i), 3);
                            originalX.push(x);
                            originalY.push(y);
                            
                            if (showEvolute && Math.sin(i) !== 0 && Math.cos(i) !== 0) {
                                // 计算导数
                                const xp = -3 * b * Math.pow(Math.cos(i), 2) * Math.sin(i);
                                const yp = 3 * b * Math.pow(Math.sin(i), 2) * Math.cos(i);
                                const xpp = -3 * b * (2 * Math.cos(i) * (-Math.sin(i)) * Math.sin(i) + Math.pow(Math.cos(i), 2) * Math.cos(i));
                                const ypp = 3 * b * (2 * Math.sin(i) * Math.cos(i) * Math.cos(i) + Math.pow(Math.sin(i), 2) * (-Math.sin(i)));
                                
                                const center = calculateCurvatureCenter(x, y, xp, yp, xpp, ypp);
                                if (center) {
                                    evoluteX.push(center.x);
                                    evoluteY.push(center.y);
                                }
                            }
                        }
                        
                        if (showCenters) {
                            for (let i = 0.1; i <= 2 * Math.PI; i += Math.PI / 8) {
                                if (Math.sin(i) !== 0 && Math.cos(i) !== 0) {
                                    const x = b * Math.pow(Math.cos(i), 3);
                                    const y = b * Math.pow(Math.sin(i), 3);
                                    const xp = -3 * b * Math.pow(Math.cos(i), 2) * Math.sin(i);
                                    const yp = 3 * b * Math.pow(Math.sin(i), 2) * Math.cos(i);
                                    const xpp = -3 * b * (2 * Math.cos(i) * (-Math.sin(i)) * Math.sin(i) + Math.pow(Math.cos(i), 2) * Math.cos(i));
                                    const ypp = 3 * b * (2 * Math.sin(i) * Math.cos(i) * Math.cos(i) + Math.pow(Math.sin(i), 2) * (-Math.sin(i)));
                                    
                                    const center = calculateCurvatureCenter(x, y, xp, yp, xpp, ypp);
                                    if (center) {
                                        centersX.push(center.x);
                                        centersY.push(center.y);
                                    }
                                }
                            }
                        }
                        break;
                        
                    case 'ellipse':
                        title = '椭圆及其渐屈线';
                        description = '椭圆的渐屈线是一个拉伸的星形线，有时被称为拉梅曲线';
                        const c = 4, d = 2;
                        
                        for (let i = 0; i <= 2 * Math.PI; i += 0.05) {
                            // 原椭圆
                            const x = c * Math.cos(i);
                            const y = d * Math.sin(i);
                            originalX.push(x);
                            originalY.push(y);
                            
                            if (showEvolute) {
                                // 计算导数
                                const xp = -c * Math.sin(i);
                                const yp = d * Math.cos(i);
                                const xpp = -c * Math.cos(i);
                                const ypp = -d * Math.sin(i);
                                
                                const center = calculateCurvatureCenter(x, y, xp, yp, xpp, ypp);
                                if (center) {
                                    evoluteX.push(center.x);
                                    evoluteY.push(center.y);
                                }
                            }
                        }
                        
                        if (showCenters) {
                            for (let i = 0; i <= 2 * Math.PI; i += Math.PI / 8) {
                                const x = c * Math.cos(i);
                                const y = d * Math.sin(i);
                                const xp = -c * Math.sin(i);
                                const yp = d * Math.cos(i);
                                const xpp = -c * Math.cos(i);
                                const ypp = -d * Math.sin(i);
                                
                                const center = calculateCurvatureCenter(x, y, xp, yp, xpp, ypp);
                                if (center) {
                                    centersX.push(center.x);
                                    centersY.push(center.y);
                                }
                            }
                        }
                        break;
                        
                    case 'parabola':
                        title = '抛物线及其渐屈线';
                        description = '抛物线的渐屈线是半立方抛物线';
                        
                        for (let i = -3; i <= 3; i += 0.1) {
                            // 原抛物线 y = x²/2
                            const x = i;
                            const y = i * i / 2;
                            originalX.push(x);
                            originalY.push(y);
                            
                            if (showEvolute) {
                                // 对于 y = x²/2，导数为
                                const xp = 1;  // dx/dt = 1 (参数t=x)
                                const yp = i;  // dy/dt = x
                                const xpp = 0; // d²x/dt² = 0
                                const ypp = 1; // d²y/dt² = 1
                                
                                const center = calculateCurvatureCenter(x, y, xp, yp, xpp, ypp);
                                if (center) {
                                    evoluteX.push(center.x);
                                    evoluteY.push(center.y);
                                }
                            }
                        }
                        
                        if (showCenters) {
                            for (let i = -2; i <= 2; i += 0.5) {
                                const x = i;
                                const y = i * i / 2;
                                const xp = 1;
                                const yp = i;
                                const xpp = 0;
                                const ypp = 1;
                                
                                const center = calculateCurvatureCenter(x, y, xp, yp, xpp, ypp);
                                if (center) {
                                    centersX.push(center.x);
                                    centersY.push(center.y);
                                }
                            }
                        }
                        break;
                }
                
                const traces = [
                    {
                        x: originalX,
                        y: originalY,
                        type: 'scatter',
                        mode: 'lines',
                        name: '原曲线',
                        line: { color: '#9b59b6', width: 3 }
                    }
                ];
                
                if (showEvolute && evoluteX.length > 0) {
                    traces.push({
                        x: evoluteX,
                        y: evoluteY,
                        type: 'scatter',
                        mode: 'lines',
                        name: '渐屈线',
                        line: { color: '#e74c3c', width: 2, dash: 'dash' }
                    });
                }
                
                if (showCenters && centersX.length > 0) {
                    traces.push({
                        x: centersX,
                        y: centersY,
                        type: 'scatter',
                        mode: 'markers',
                        name: '曲率中心',
                        marker: { color: '#f39c12', size: 6, symbol: 'circle' }
                    });
                }
                
                // 添加动画点
                if (curveType === 'cycloid' && t > 0) {
                    const currentT = (t % (4 * Math.PI));
                    const pointX = 2 * (currentT - Math.sin(currentT));
                    const pointY = 2 * (1 - Math.cos(currentT));
                    
                    // 计算曲率中心
                    const xp = 2 * (1 - Math.cos(currentT));
                    const yp = 2 * Math.sin(currentT);
                    const xpp = 2 * Math.sin(currentT);
                    const ypp = 2 * Math.cos(currentT);
                    
                    const denominator = xp * ypp - yp * xpp;
                    const numerator = xp * xp + yp * yp;
                    const centerX = pointX - (yp * numerator) / denominator;
                    const centerY = pointY + (xp * numerator) / denominator;
                    
                    traces.push({
                        x: [pointX],
                        y: [pointY],
                        type: 'scatter',
                        mode: 'markers',
                        name: '当前点',
                        marker: { color: '#27ae60', size: 12 }
                    });
                    
                    if (showCenters && Math.abs(denominator) > 1e-10) {
                        traces.push({
                            x: [centerX],
                            y: [centerY],
                            type: 'scatter',
                            mode: 'markers',
                            name: '对应曲率中心',
                            marker: { color: '#e67e22', size: 12 }
                        });
                        
                        // 连接线
                        traces.push({
                            x: [pointX, centerX],
                            y: [pointY, centerY],
                            type: 'scatter',
                            mode: 'lines',
                            name: '法线',
                            line: { color: '#95a5a6', width: 1 },
                            showlegend: false
                        });
                    }
                } else if (curveType === 'astroid' && t > 0) {
                    const currentT = (t % (2 * Math.PI));
                    const pointX = 3 * Math.pow(Math.cos(currentT), 3);
                    const pointY = 3 * Math.pow(Math.sin(currentT), 3);
                    
                    // 计算曲率中心
                    const xp = -3 * 3 * Math.pow(Math.cos(currentT), 2) * Math.sin(currentT);
                    const yp = 3 * 3 * Math.pow(Math.sin(currentT), 2) * Math.cos(currentT);
                    const xpp = -3 * 3 * (2 * Math.cos(currentT) * (-Math.sin(currentT)) * Math.sin(currentT) + Math.pow(Math.cos(currentT), 2) * Math.cos(currentT));
                    const ypp = 3 * 3 * (2 * Math.sin(currentT) * Math.cos(currentT) * Math.cos(currentT) + Math.pow(Math.sin(currentT), 2) * (-Math.sin(currentT)));
                    
                    const denominator = xp * ypp - yp * xpp;
                    const numerator = xp * xp + yp * yp;
                    
                    if (Math.abs(denominator) > 1e-10) {
                        const centerX = pointX - (yp * numerator) / denominator;
                        const centerY = pointY + (xp * numerator) / denominator;
                        
                        traces.push({
                            x: [pointX],
                            y: [pointY],
                            type: 'scatter',
                            mode: 'markers',
                            name: '当前点',
                            marker: { color: '#27ae60', size: 12 }
                        });
                        
                        if (showCenters) {
                            traces.push({
                                x: [centerX],
                                y: [centerY],
                                type: 'scatter',
                                mode: 'markers',
                                name: '对应曲率中心',
                                marker: { color: '#e67e22', size: 12 }
                            });
                            
                            // 连接线（法线）
                            traces.push({
                                x: [pointX, centerX],
                                y: [pointY, centerY],
                                type: 'scatter',
                                mode: 'lines',
                                name: '法线',
                                line: { color: '#95a5a6', width: 1 },
                                showlegend: false
                            });
                        }
                    }
                }
                
                const layout = {
                    title: `${title}<br><sub>${description}</sub>`,
                    xaxis: {
                        title: 'x',
                        zeroline: true,
                        scaleanchor: 'y',
                        scaleratio: 1
                    },
                    yaxis: {
                        title: 'y',
                        zeroline: true
                    },
                    showlegend: true,
                    plot_bgcolor: 'rgba(0,0,0,0)',
                    paper_bgcolor: 'rgba(0,0,0,0)',
                    font: { family: 'Microsoft YaHei', size: 12 },
                    margin: { t: 80 }
                };
                
                Plotly.newPlot(plotDiv, traces, layout, {responsive: true});
            }
            
            function animate() {
                const speed = parseFloat(animationSpeedSlider.value);
                t += 0.05 * speed;
                updatePlot();
                animationFrame = requestAnimationFrame(animate);
            }
            
            function startAnimation() {
                if (animationFrame) {
                    cancelAnimationFrame(animationFrame);
                }
                animate();
            }
            
            // 事件监听器
            curveTypeSelect.addEventListener('change', () => {
                t = 0;
                updatePlot();
            });
            showEvoluteCheckbox.addEventListener('change', updatePlot);
            showCentersCheckbox.addEventListener('change', updatePlot);
            animationSpeedSlider.addEventListener('input', updatePlot);
            
            // 初始化
            updatePlot();
            startAnimation();
            
            // 清理函数
            return function cleanup() {
                if (animationFrame) {
                    cancelAnimationFrame(animationFrame);
                }
            };
        }
        
        // 页面加载动画
        function initializeAnimations() {
            const contentSections = document.querySelectorAll('.content-section');
            if (contentSections.length > 0 && typeof gsap !== 'undefined') {
                gsap.from('.content-section', {
                    duration: 0.8,
                    y: 30,
                    opacity: 0,
                    stagger: 0.2,
                    ease: "power2.out"
                });
            }
            
            const formulaCards = document.querySelectorAll('.formula-card');
            if (formulaCards.length > 0 && typeof gsap !== 'undefined') {
                gsap.from('.formula-card', {
                    duration: 0.6,
                    scale: 0.8,
                    opacity: 0,
                    stagger: 0.1,
                    delay: 1,
                    ease: "back.out(1.7)"
                });
            }
        }
        
        // 滚动触发动画
        function setupScrollAnimations() {
            const observer = new IntersectionObserver((entries) => {
                entries.forEach(entry => {
                    if (entry.isIntersecting && typeof gsap !== 'undefined') {
                        gsap.from(entry.target.querySelectorAll('.definition, .theorem, .example'), {
                            duration: 0.6,
                            y: 20,
                            opacity: 0,
                            stagger: 0.1,
                            ease: "power2.out"
                        });
                    }
                });
            }, { threshold: 0.2 });
            
            document.querySelectorAll('.content-section').forEach(section => {
                observer.observe(section);
            });
        }
        
        // 页面加载时初始化
        let evoluteCleanup;
        
        document.addEventListener('DOMContentLoaded', function() {
            // 延迟执行以确保DOM完全加载
            setTimeout(() => {
                createArcLengthDemo();
                createCurvatureDemo();
                evoluteCleanup = createEvoluteDemo();
                initializeAnimations();
                setupScrollAnimations();
            }, 500);
            
            // MathJax 加载完成后的回调
            if (typeof MathJax !== 'undefined') {
                MathJax.startup.promise.then(() => {
                    console.log('MathJax loaded successfully');
                });
            }
        });
        
        // 页面卸载时清理动画
        window.addEventListener('beforeunload', function() {
            if (evoluteCleanup) {
                evoluteCleanup();
            }
        });
    </script>
</body>
</html>
