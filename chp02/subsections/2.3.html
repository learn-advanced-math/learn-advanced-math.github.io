<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="alternate icon" href="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAzMiAzMiI+PGNpcmNsZSBjeD0iMTYiIGN5PSIxNiIgcj0iMTUiIGZpbGw9IiMzNDk4ZGIiIHN0cm9rZT0iIzJjM2U1MCIgc3Ryb2tlLXdpZHRoPSIyIi8+PGcgZmlsbD0id2hpdGUiIGZvbnQtZmFtaWx5PSJUaW1lcyxzZXJpZiIgZm9udC13ZWlnaHQ9ImJvbGQiPjx0ZXh0IHg9IjE2IiB5PSIxMyIgdGV4dC1hbmNob3I9Im1pZGRsZSIgZm9udC1zaXplPSIxMiI+ZDwvdGV4dD48bGluZSB4MT0iOCIgeTE9IjE2IiB4Mj0iMjQiIHkyPSIxNiIgc3Ryb2tlPSJ3aGl0ZSIgc3Ryb2tlLXdpZHRoPSIxLjUiLz48dGV4dCB4PSIxNiIgeT0iMjUiIHRleHQtYW5jaG9yPSJtaWRkbGUiIGZvbnQtc2l6ZT0iMTAiPmR4PC90ZXh0PjwvZz48L3N2Zz4=">
    <title>2.3 高阶导数 - 高等数学复习</title>
    <script>
        window.MathJax = {
            tex: {
                inlineMath: [['$', '$']],
                displayMath: [['$$', '$$']]
            },
            chtml: {
                fontURL: 'https://cdn.jsdelivr.net/npm/mathjax@3/es5/output/chtml/fonts/woff-v2'
            }
        };
    </script>
    <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    <script src="https://cdn.plot.ly/plotly-2.26.0.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/gsap@3.12.2/dist/gsap.min.js"></script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Microsoft YaHei', 'Segoe UI', Arial, sans-serif;
            line-height: 1.6;
            color: #333;
            background: linear-gradient(135deg, #e74c3c 0%, #c0392b 50%, #a93226 100%);
            min-height: 100vh;
        }
        
        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }
        
        .back-link {
            display: inline-flex;
            align-items: center;
            margin-bottom: 20px;
            color: #3498db;
            text-decoration: none;
            font-weight: 500;
            transition: all 0.3s ease;
            background: rgba(255, 255, 255, 0.9);
            padding: 10px 15px;
            border-radius: 25px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }
        
        .back-link:hover {
            color: #2980b9;
            transform: translateX(-5px);
            box-shadow: 0 4px 15px rgba(0,0,0,0.15);
        }
        
        .back-link::before {
            content: '←';
            margin-right: 8px;
            font-size: 1.2em;
        }
        
        header {
            background: linear-gradient(135deg, #c0392b 0%, #a93226 100%);
            color: white;
            padding: 40px 0;
            text-align: center;
            border-radius: 15px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.2);
            margin-bottom: 30px;
        }
        
        h1 {
            font-size: 2.5em;
            margin: 0;
            text-shadow: 0 2px 4px rgba(0,0,0,0.3);
            font-weight: 300;
        }
        
        .subtitle {
            font-size: 1.1em;
            margin-top: 10px;
            opacity: 0.9;
        }
        
        .content-section {
            background: white;
            margin: 25px 0;
            border-radius: 15px;
            overflow: hidden;
            box-shadow: 0 5px 20px rgba(0,0,0,0.1);
            transition: transform 0.3s ease, box-shadow 0.3s ease;
        }
        
        .content-section:hover {
            transform: translateY(-3px);
            box-shadow: 0 8px 25px rgba(0,0,0,0.15);
        }
        
        .section-header {
            padding: 20px 30px;
            background: linear-gradient(45deg, #c0392b, #a93226);
            color: white;
        }
        
        .section-header h2 {
            margin: 0;
            font-size: 1.6em;
            font-weight: 400;
        }
        
        .section-content {
            padding: 30px;
        }
        
        .definition {
            background: linear-gradient(135deg, #fadbd8, #f5b7b1);
            border-left: 5px solid #e74c3c;
            padding: 25px;
            margin: 20px 0;
            border-radius: 0 10px 10px 0;
            box-shadow: 0 3px 15px rgba(231, 76, 60, 0.1);
            /* 确保内容始终可见 */
            opacity: 1 !important;
            visibility: visible !important;
        }
        
        .definition h4 {
            margin: 0 0 15px 0;
            color: #c0392b;
            font-size: 1.3em;
            font-weight: 600;
        }
        
        .theorem {
            background: linear-gradient(135deg, #d5f4e6, #82e0aa);
            border-left: 5px solid #27ae60;
            padding: 25px;
            margin: 20px 0;
            border-radius: 0 10px 10px 0;
            box-shadow: 0 3px 15px rgba(39, 174, 96, 0.1);
            /* 确保内容始终可见 */
            opacity: 1 !important;
            visibility: visible !important;
        }
        
        .theorem h4 {
            margin: 0 0 15px 0;
            color: #1e8449;
            font-size: 1.3em;
            font-weight: 600;
        }
        
        .example {
            background: linear-gradient(135deg, #e8f5e8, #c8e6c9);
            border-left: 5px solid #2ecc71;
            padding: 25px;
            margin: 20px 0;
            border-radius: 0 10px 10px 0;
            box-shadow: 0 3px 15px rgba(46, 204, 113, 0.1);
            /* 确保内容始终可见 */
            opacity: 1 !important;
            visibility: visible !important;
            transform: none !important;
        }
        
        .example h4 {
            margin: 0 0 15px 0;
            color: #27ae60;
            font-size: 1.3em;
            font-weight: 600;
        }
        
        .practice-problem {
            background: linear-gradient(135deg, #fdeaa7, #f7dc6f);
            border-left: 5px solid #f1c40f;
            padding: 25px;
            margin: 20px 0;
            border-radius: 0 10px 10px 0;
            box-shadow: 0 3px 15px rgba(241, 196, 15, 0.1);
            /* 确保内容始终可见 */
            opacity: 1 !important;
            visibility: visible !important;
            transform: none !important;
        }
        
        .practice-problem h4 {
            margin: 0 0 15px 0;
            color: #d68910;
            font-size: 1.3em;
            font-weight: 600;
        }
        
        .difficulty {
            display: inline-block;
            padding: 3px 10px;
            border-radius: 15px;
            font-size: 0.85em;
            font-weight: 500;
            margin-left: 10px;
        }
        
        .difficulty.medium {
            background: #f39c12;
            color: white;
        }
        
        .difficulty.hard {
            background: #e74c3c;
            color: white;
        }
        
        .difficulty.very-hard {
            background: #8e44ad;
            color: white;
        }
        
        .solution {
            margin-top: 20px;
            padding-top: 20px;
            border-top: 2px dashed #bdc3c7;
        }
        
        .solution-header {
            font-weight: 600;
            color: #2c3e50;
            margin-bottom: 15px;
            font-size: 1.1em;
        }
        
        .viz-container {
            width: 100%;
            height: 400px;
            margin: 25px 0;
            background: white;
            border-radius: 10px;
            box-shadow: 0 3px 15px rgba(0,0,0,0.1);
            overflow: hidden;
        }
        
        .nav-buttons {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-top: 40px;
            padding: 20px 0;
        }
        
        .btn {
            display: inline-flex;
            align-items: center;
            padding: 12px 25px;
            background: linear-gradient(45deg, #c0392b, #a93226);
            color: white;
            text-decoration: none;
            border-radius: 25px;
            font-weight: 500;
            transition: all 0.3s ease;
            box-shadow: 0 3px 15px rgba(192, 57, 43, 0.3);
        }
        
        .btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 20px rgba(192, 57, 43, 0.4);
        }
        
        .btn.prev::before {
            content: '←';
            margin-right: 8px;
            font-size: 1.1em;
        }
        
        .btn.next::after {
            content: '→';
            margin-left: 8px;
            font-size: 1.1em;
        }
        
        footer {
            text-align: center;
            color: white;
            padding: 30px 0;
            opacity: 0.9;
            margin-top: 50px;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 15px;
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.1);
        }
        
        footer p {
            text-align: center;
            margin: 0;
        }
        
        .math-expression {
            text-align: center;
            margin: 15px 0;
            font-size: 1.1em;
        }
        
        ul, ol {
            margin-left: 20px;
            margin-bottom: 15px;
        }
        
        li {
            margin-bottom: 8px;
        }
        
        p {
            margin-bottom: 15px;
            text-align: justify;
        }
        
        .highlight {
            background: linear-gradient(135deg, #fadbd8, #f5b7b1);
            padding: 15px;
            border-left: 4px solid #e74c3c;
            border-radius: 0 8px 8px 0;
            margin: 15px 0;
        }
        
        .properties-cards {
            display: flex !important;
            visibility: visible !important;
            opacity: 1 !important;
            flex-wrap: wrap;
            gap: 10px;
            margin: 15px 0;
            justify-content: center;
        }
        
        .property-card {
            display: inline-block !important;
            visibility: visible !important;
            opacity: 1 !important;
            background: #fadbd8;
            padding: 12px 18px;
            margin: 5px;
            border-radius: 20px;
            border: 2px solid #e74c3c;
            transition: all 0.3s ease;
            cursor: pointer;
            font-size: 0.95em;
            font-weight: 500;
            transform: scale(1) !important;
        }
        
        .property-card:hover {
            background: #e74c3c;
            color: white;
            transform: scale(1.05) !important;
            box-shadow: 0 5px 15px rgba(231, 76, 60, 0.3);
        }
        
        .formula-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 15px;
            margin: 20px 0;
        }
        
        .formula-card {
            background: #f8f9fa;
            border: 2px solid #dee2e6;
            border-radius: 10px;
            padding: 20px;
            text-align: center;
            transition: all 0.3s ease;
            /* 确保内容始终可见 */
            opacity: 1 !important;
            visibility: visible !important;
        }
        
        .formula-card:hover {
            border-color: #c0392b;
            box-shadow: 0 4px 12px rgba(192, 57, 43, 0.1);
        }
        
        .formula-card h5 {
            margin-bottom: 10px;
            color: #c0392b;
            font-size: 1.1em;
        }
        
        .demo-container {
            width: 100%;
            margin: 25px 0;
            background: #f8f9fa;
            border-radius: 10px;
            box-shadow: 0 3px 15px rgba(0,0,0,0.1);
            overflow: hidden;
        }
        
        .demo-controls {
            background: white;
            padding: 20px;
            border-bottom: 2px solid #e9ecef;
        }
        
        .control-row {
            display: flex;
            gap: 30px;
            margin-bottom: 20px;
            align-items: center;
            flex-wrap: wrap;
        }
        
        .control-group {
            display: flex;
            flex-direction: column;
            gap: 8px;
            min-width: 200px;
        }
        
        .control-group label {
            font-weight: 600;
            color: #2c3e50;
            font-size: 0.95em;
        }
        
        .control-group select {
            padding: 8px 12px;
            border: 2px solid #dee2e6;
            border-radius: 8px;
            background: white;
            font-size: 0.95em;
            transition: border-color 0.3s ease;
        }
        
        .control-group select:focus {
            outline: none;
            border-color: #c0392b;
            box-shadow: 0 0 0 3px rgba(192, 57, 43, 0.1);
        }
        
        .slider-container {
            display: flex;
            align-items: center;
            gap: 12px;
        }
        
        .slider-container input[type="range"] {
            flex: 1;
            height: 6px;
            border-radius: 3px;
            background: #dee2e6;
            outline: none;
            appearance: none;
        }
        
        .slider-container input[type="range"]::-webkit-slider-thumb {
            appearance: none;
            width: 18px;
            height: 18px;
            border-radius: 50%;
            background: #c0392b;
            cursor: pointer;
            transition: all 0.3s ease;
        }
        
        .slider-container input[type="range"]::-webkit-slider-thumb:hover {
            background: #a93226;
            transform: scale(1.1);
        }
        
        .slider-value {
            background: #c0392b;
            color: white;
            padding: 4px 10px;
            border-radius: 15px;
            font-size: 0.9em;
            font-weight: 600;
            min-width: 25px;
            text-align: center;
        }
        
        .checkbox-group {
            display: flex;
            gap: 15px;
            flex-wrap: wrap;
            justify-content: center;
        }
        
        .checkbox-label {
            display: flex;
            align-items: center;
            cursor: pointer;
            padding: 8px 15px;
            border: 2px solid #dee2e6;
            border-radius: 25px;
            background: white;
            transition: all 0.3s ease;
            user-select: none;
        }
        
        .checkbox-label:hover {
            border-color: #c0392b;
            box-shadow: 0 2px 8px rgba(192, 57, 43, 0.1);
        }
        
        .checkbox-label input[type="checkbox"] {
            display: none;
        }
        
        .checkmark {
            width: 16px;
            height: 16px;
            border: 2px solid #dee2e6;
            border-radius: 4px;
            margin-right: 8px;
            position: relative;
            transition: all 0.3s ease;
        }
        
        .checkbox-label input[type="checkbox"]:checked + .checkmark {
            background: #c0392b;
            border-color: #c0392b;
        }
        
        .checkbox-label input[type="checkbox"]:checked + .checkmark::after {
            content: '✓';
            position: absolute;
            top: -2px;
            left: 1px;
            color: white;
            font-size: 12px;
            font-weight: bold;
        }
        
        .checkbox-text {
            font-size: 0.95em;
            font-weight: 500;
            color: #2c3e50;
        }
        
        .checkbox-label input[type="checkbox"]:checked ~ .checkbox-text {
            color: #c0392b;
            font-weight: 600;
        }

        /* AI提示方块样式 */
        .ai-warning {
            position: fixed;
            top: 20px;
            left: 20px;
            width: 40px;
            height: 40px;
            background: white;
            border-radius: 8px;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            z-index: 1000;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.2);
            transition: all 0.3s ease;
            border: 2px solid #e0e0e0;
        }
        
        .ai-warning:hover {
            transform: scale(1.1);
            box-shadow: 0 6px 20px rgba(0, 0, 0, 0.3);
            border-color: #ff4444;
        }
        
        .ai-warning::before {
            content: '!';
            color: #e74c3c;
            font-size: 20px;
            font-weight: bold;
            font-family: Arial, sans-serif;
        }
        
        .ai-warning-tooltip {
            position: absolute;
            top: 50px;
            left: 0;
            background: rgba(0, 0, 0, 0.9);
            color: white;
            padding: 16px 20px;
            border-radius: 8px;
            font-size: 14px;
            line-height: 1.5;
            opacity: 0;
            visibility: hidden;
            transform: translateY(-10px);
            transition: all 0.3s ease;
            z-index: 1001;
            width: 250px;
            box-shadow: 0 4px 20px rgba(0, 0, 0, 0.3);
        }
        
        .ai-warning-tooltip::before {
            content: '';
            position: absolute;
            top: -8px;
            left: 20px;
            width: 0;
            height: 0;
            border-left: 8px solid transparent;
            border-right: 8px solid transparent;
            border-bottom: 8px solid rgba(0, 0, 0, 0.9);
        }
        
        .ai-warning:hover .ai-warning-tooltip {
            opacity: 1;
            visibility: visible;
            transform: translateY(0);
        }
        
        @media (max-width: 768px) {
            .container {
                padding: 10px;
            }
            
            h1 {
                font-size: 2em;
            }
            
            .control-row {
                flex-direction: column;
                gap: 15px;
                align-items: stretch;
            }
            
            .control-group {
                min-width: auto;
            }
            
            .checkbox-group {
                flex-direction: column;
                gap: 10px;
            }
            
            .checkbox-label {
                justify-content: center;
            }
            
            .nav-buttons {
                flex-direction: column;
                gap: 15px;
                text-align: center;
            }
            
            .formula-grid {
                grid-template-columns: 1fr;
            }

            .ai-warning {
                width: 35px;
                height: 35px;
                top: 15px;
                left: 15px;
            }
            
            .ai-warning::before {
                font-size: 18px;
            }
            
            .ai-warning-tooltip {
                width: 280px;
                font-size: 13px;
                padding: 14px 18px;
            }
        }
    </style>
</head>
<body>
    <!-- AI内容提示 -->
    <div class="ai-warning">
        <div class="ai-warning-tooltip">
            页面内容由AI生成，请谨慎对待。<br>如发现错误，欢迎反馈。
        </div>
    </div>
    
    <div class="container">
        <a href="../index.html" class="back-link">返回章节概览</a>
        
        <header>
            <h1>2.3 高阶导数</h1>
            <div class="subtitle">Higher-Order Derivatives: Definitions, Formulas and Applications</div>
        </header>
        
        <!-- 2.3.1 二阶导数、三阶导数、高阶导数 -->
        <div class="content-section">
            <div class="section-header">
                <h2>2.3.1 二阶导数、三阶导数、高阶导数</h2>
            </div>
            <div class="section-content">
                <div class="definition">
                    <h4>高阶导数的定义</h4>
                    <p>设函数 $y = f(x)$ 在区间 $I$ 上可导，则其导数 $f'(x)$ 也是 $x$ 的函数。</p>
                    
                    <p><strong>二阶导数：</strong>如果 $f'(x)$ 在区间 $I$ 上也可导，则称 $f'(x)$ 的导数为 $f(x)$ 的<strong>二阶导数</strong>，记作：</p>
                    <div class="math-expression">
                        $$f''(x) = \frac{d}{dx}[f'(x)] = \frac{d^2y}{dx^2} = \frac{d^2f(x)}{dx^2}$$
                    </div>
                    
                    <p><strong>三阶导数：</strong>类似地，如果 $f''(x)$ 可导，则称其导数为 $f(x)$ 的<strong>三阶导数</strong>，记作：</p>
                    <div class="math-expression">
                        $$f'''(x) = \frac{d}{dx}[f''(x)] = \frac{d^3y}{dx^3} = \frac{d^3f(x)}{dx^3}$$
                    </div>
                    
                    <p><strong>$n$ 阶导数：</strong>一般地，$f(x)$ 的 $n$ 阶导数定义为：</p>
                    <div class="math-expression">
                        $$f^{(n)}(x) = \frac{d}{dx}[f^{(n-1)}(x)] = \frac{d^ny}{dx^n} = \frac{d^nf(x)}{dx^n}$$
                    </div>
                </div>

                <div class="theorem">
                    <h4>高阶导数的记号</h4>
                    <p>对于函数 $y = f(x)$ 的 $n$ 阶导数，常用记号有：</p>
                    <div class="formula-grid">
                        <div class="formula-card">
                            <h5>莱布尼茨记号</h5>
                            <div class="math-expression">$$\frac{d^ny}{dx^n}$$</div>
                        </div>
                        <div class="formula-card">
                            <h5>拉格朗日记号</h5>
                            <div class="math-expression">$$f^{(n)}(x)$$</div>
                        </div>
                        <div class="formula-card">
                            <h5>牛顿记号（时间导数）</h5>
                            <div class="math-expression">$$\ddot{y}, \dddot{y}, \ldots$$</div>
                        </div>
                    </div>
                </div>

                <div class="properties-cards">
                    <div class="property-card">高阶导数是逐阶求导的结果</div>
                    <div class="property-card">$n$ 阶导数存在需要前 $n-1$ 阶都存在</div>
                    <div class="property-card">高阶导数有特定的运算法则</div>
                    <div class="property-card">某些函数有通用的高阶导数公式</div>
                </div>
            </div>
        </div>

        <!-- 常见函数的高阶导数 -->
        <div class="content-section">
            <div class="section-header">
                <h2>常见函数的高阶导数公式</h2>
            </div>
            <div class="section-content">
                <div class="theorem">
                    <h4>基本函数的高阶导数</h4>
                    
                    <div class="formula-grid">
                        <div class="formula-card">
                            <h5>幂函数</h5>
                            <div class="math-expression" style="font-size: 0.85em; word-wrap: break-word; overflow-wrap: break-word;">$(x^m)^{(n)} = m(m-1)\cdots(m-n+1)x^{m-n}$</div>
                            <p style="font-size: 0.9em; margin-top: 8px;">当$m < n$且$m$为非负整数时，$(x^m)^{(n)} = 0$</p>
                        </div>
                        <div class="formula-card">
                            <h5>指数函数</h5>
                            <div class="math-expression">$(e^x)^{(n)} = e^x$</div>
                            <div class="math-expression">$(a^x)^{(n)} = a^x(\ln a)^n$</div>
                        </div>
                        <div class="formula-card">
                            <h5>对数函数</h5>
                            <div class="math-expression">$(\ln x)^{(n)} = \frac{(-1)^{n-1}(n-1)!}{x^n}$</div>
                        </div>
                        <div class="formula-card">
                            <h5>正弦函数</h5>
                            <div class="math-expression">$(\sin x)^{(n)} = \sin(x + \frac{n\pi}{2})$</div>
                        </div>
                        <div class="formula-card">
                            <h5>余弦函数</h5>
                            <div class="math-expression">$(\cos x)^{(n)} = \cos(x + \frac{n\pi}{2})$</div>
                        </div>
                        <div class="formula-card">
                            <h5>一般形式</h5>
                            <div class="math-expression">$\left(\frac{1}{x}\right)^{(n)} = \frac{(-1)^n n!}{x^{n+1}}$</div>
                        </div>
                    </div>
                </div>

                <div class="highlight">
                    <p><strong>记忆技巧：</strong></p>
                    <ul>
                        <li>指数函数 $e^x$ 的各阶导数都等于自身</li>
                        <li>三角函数的高阶导数具有周期性，周期为 $4$</li>
                        <li>幂函数 $x^m$ 求导 $m$ 次后若 $m$ 为正整数，则得到常数 $m!$</li>
                        <li>$\ln x$ 的 $n$ 阶导数中有 $(-1)^{n-1}$ 的符号规律</li>
                    </ul>
                </div>
            </div>
        </div>

        <!-- 高阶导数的运算法则 -->
        <div class="content-section">
            <div class="section-header">
                <h2>高阶导数的运算法则</h2>
            </div>
            <div class="section-content">
                <div class="theorem">
                    <h4>莱布尼茨公式（乘积的高阶导数）</h4>
                    <p>设函数 $u(x)$ 和 $v(x)$ 都有 $n$ 阶导数，则：</p>
                    <div class="math-expression">
                        $$(uv)^{(n)} = \sum_{k=0}^{n} C_n^k u^{(k)}v^{(n-k)}$$
                    </div>
                    <p>其中 $C_n^k = \binom{n}{k} = \frac{n!}{k!(n-k)!}$ 是二项式系数。</p>
                    
                    <p><strong>展开式：</strong></p>
                    <div class="math-expression">
                        $$(uv)^{(n)} = u^{(n)}v + nu^{(n-1)}v' + \frac{n(n-1)}{2!}u^{(n-2)}v'' + \cdots + uv^{(n)}$$
                    </div>
                </div>

                <div class="theorem">
                    <h4>线性运算法则</h4>
                    <p>设 $u(x)$ 和 $v(x)$ 都有 $n$ 阶导数，$c_1, c_2$ 为常数，则：</p>
                    <div class="math-expression">
                        $$[c_1u(x) + c_2v(x)]^{(n)} = c_1u^{(n)}(x) + c_2v^{(n)}(x)$$
                    </div>
                </div>

                <!-- 高阶导数可视化演示 -->
                <div class="demo-container">
                    <div class="demo-controls">
                        <div class="control-row">
                            <div class="control-group">
                                <label>选择函数:</label>
                                <select id="higher-function-select">
                                    <option value="sin">sin(x)</option>
                                    <option value="cos">cos(x)</option>
                                    <option value="exp">e^x</option>
                                    <option value="power">x^3</option>
                                    <option value="ln">ln(x)</option>
                                </select>
                            </div>
                            
                            <div class="control-group">
                                <label>最高显示阶数:</label>
                                <div class="slider-container">
                                    <input type="range" id="order-slider" min="0" max="4" value="2" step="1">
                                    <span id="order-value" class="slider-value">2</span>
                                </div>
                            </div>
                        </div>
                        
                        <div class="checkbox-group">
                            <label class="checkbox-label">
                                <input type="checkbox" id="show-original" checked>
                                <span class="checkmark"></span>
                                <span class="checkbox-text">原函数</span>
                            </label>
                            <label class="checkbox-label">
                                <input type="checkbox" id="show-first" checked>
                                <span class="checkmark"></span>
                                <span class="checkbox-text">一阶导数</span>
                            </label>
                            <label class="checkbox-label">
                                <input type="checkbox" id="show-second" checked>
                                <span class="checkmark"></span>
                                <span class="checkbox-text">二阶导数</span>
                            </label>
                            <label class="checkbox-label">
                                <input type="checkbox" id="show-third">
                                <span class="checkmark"></span>
                                <span class="checkbox-text">三阶导数</span>
                            </label>
                            <label class="checkbox-label">
                                <input type="checkbox" id="show-fourth">
                                <span class="checkmark"></span>
                                <span class="checkbox-text">四阶导数</span>
                            </label>
                        </div>
                    </div>
                    
                    <div id="higher-derivative-plot" class="viz-container"></div>
                </div>
            </div>
        </div>

        <!-- 典型例题 -->
        <div class="content-section">
            <div class="section-header">
                <h2>典型例题</h2>
            </div>
            <div class="section-content">
                <div class="example">
                    <h4>例1：基本函数的高阶导数</h4>
                    <p>求 $y = x^5$ 的各阶导数。</p>
                    
                    <div class="solution">
                        <div class="solution-header">解：</div>
                        <p>逐步求导：</p>
                        <ul>
                            <li>$y' = 5x^4$</li>
                            <li>$y'' = 20x^3$</li>
                            <li>$y''' = 60x^2$</li>
                            <li>$y^{(4)} = 120x$</li>
                            <li>$y^{(5)} = 120$</li>
                            <li>$y^{(n)} = 0$ （当 $n > 5$ 时）</li>
                        </ul>
                        
                        <p><strong>一般公式验证：</strong></p>
                        <p>使用 $(x^m)^{(n)} = m(m-1)\cdots(m-n+1)x^{m-n}$</p>
                        <div class="math-expression">
                            $y^{(5)} = 5 \cdot 4 \cdot 3 \cdot 2 \cdot 1 \cdot x^{5-5} = 5! = 120$
                        </div>
                    </div>
                </div>

                <div class="example">
                    <h4>例2：三角函数的高阶导数</h4>
                    <p>求 $y = \sin 2x$ 的 $n$ 阶导数。</p>
                    
                    <div class="solution">
                        <div class="solution-header">解：</div>
                        <p>逐步求导找规律：</p>
                        <ul>
                            <li>$y' = 2\cos 2x = 2\sin(2x + \frac{\pi}{2})$</li>
                            <li>$y'' = -4\sin 2x = 2^2\sin(2x + 2 \cdot \frac{\pi}{2})$</li>
                            <li>$y''' = -8\cos 2x = 2^3\sin(2x + 3 \cdot \frac{\pi}{2})$</li>
                            <li>$y^{(4)} = 16\sin 2x = 2^4\sin(2x + 4 \cdot \frac{\pi}{2})$</li>
                        </ul>
                        
                        <p><strong>一般公式：</strong></p>
                        <div class="math-expression">
                            $y^{(n)} = 2^n\sin(2x + \frac{n\pi}{2})$
                        </div>
                    </div>
                </div>

                <div class="example">
                    <h4>例3：使用莱布尼茨公式</h4>
                    <p>求 $y = x^2 e^x$ 的三阶导数。</p>
                    
                    <div class="solution">
                        <div class="solution-header">解：</div>
                        <p>设 $u = x^2$，$v = e^x$，使用莱布尼茨公式：</p>
                        <div class="math-expression">
                            $(uv)^{(3)} = u^{(3)}v + 3u^{(2)}v^{(1)} + 3u^{(1)}v^{(2)} + uv^{(3)}$
                        </div>
                        
                        <p>计算各项导数：</p>
                        <ul>
                            <li>$u = x^2$，$u' = 2x$，$u'' = 2$，$u''' = 0$</li>
                            <li>$v = e^x$，$v' = e^x$，$v'' = e^x$，$v''' = e^x$</li>
                        </ul>
                        
                        <p>代入公式：</p>
                        <div class="math-expression">
                            $y''' = 0 \cdot e^x + 3 \cdot 2 \cdot e^x + 3 \cdot 2x \cdot e^x + x^2 \cdot e^x$
                        </div>
                        <div class="math-expression">
                            $= 6e^x + 6xe^x + x^2e^x = e^x(x^2 + 6x + 6)$
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- 习题 -->
        <div class="content-section">
            <div class="section-header">
                <h2>课后习题</h2>
            </div>
            <div class="section-content">
                <div class="practice-problem">
                    <h4>习题1 <span class="difficulty medium">中等</span></h4>
                    <p>求下列函数的指定阶导数：</p>
                    <p>(1) $y = \cos 3x$，求 $y^{(n)}$</p>
                    <p>(2) $y = \frac{1}{x^2}$，求 $y'''$</p>
                    
                    <div class="solution">
                        <div class="solution-header">解：</div>
                        <p><strong>(1)</strong> 对于 $y = \cos 3x$：</p>
                        <ul>
                            <li>$y' = -3\sin 3x$</li>
                            <li>$y'' = -9\cos 3x$</li>
                            <li>$y''' = 27\sin 3x$</li>
                            <li>$y^{(4)} = 81\cos 3x$</li>
                        </ul>
                        <p>观察规律，$y^{(n)} = 3^n\cos(3x + \frac{n\pi}{2})$</p>
                        
                        <p><strong>(2)</strong> 对于 $y = \frac{1}{x^2} = x^{-2}$：</p>
                        <ul>
                            <li>$y' = -2x^{-3}$</li>
                            <li>$y'' = 6x^{-4}$</li>
                            <li>$y''' = -24x^{-5} = -\frac{24}{x^5}$</li>
                        </ul>
                    </div>
                </div>

                <div class="practice-problem">
                    <h4>习题2 <span class="difficulty hard">较难</span></h4>
                    <p>设 $y = x^n \ln x$（$n$ 为正整数），求 $y^{(n+1)}$。</p>
                    
                    <div class="solution">
                        <div class="solution-header">解：</div>
                        <p>使用莱布尼茨公式，设 $u = x^n$，$v = \ln x$：</p>
                        <div class="math-expression">
                            $y^{(n+1)} = \sum_{k=0}^{n+1} C_{n+1}^k u^{(k)} v^{(n+1-k)}$
                        </div>
                        
                        <p>分析各项：</p>
                        <ul>
                            <li>$u^{(k)} = \begin{cases} n(n-1)\cdots(n-k+1)x^{n-k}, & k \leq n \\ 0, & k > n \end{cases}$</li>
                            <li>$v^{(n+1-k)} = (\ln x)^{(n+1-k)} = \frac{(-1)^{n-k}(n-k)!}{x^{n+1-k}}$</li>
                        </ul>
                        
                        <p>当 $k = n$ 时：</p>
                        <div class="math-expression">
                            $u^{(n)} = n!$，$v^{(1)} = \frac{1}{x}$
                        </div>
                        
                        <p>当 $k = n+1$ 时：</p>
                        <div class="math-expression">
                            $u^{(n+1)} = 0$
                        </div>
                        
                        <p>因此主要项为：</p>
                        <div class="math-expression">
                            $y^{(n+1)} = C_{n+1}^n \cdot n! \cdot \frac{1}{x} = (n+1) \cdot \frac{n!}{x} = \frac{(n+1)!}{x}$
                        </div>
                    </div>
                </div>

                <div class="practice-problem">
                    <h4>习题3 <span class="difficulty very-hard">很难</span></h4>
                    <p>证明：如果 $f(x)$ 有 $n$ 阶导数，且 $f^{(n)}(x_0) \neq 0$，而 $f(x_0) = f'(x_0) = \cdots = f^{(n-1)}(x_0) = 0$，则：</p>
                    <p>(1) 当 $n$ 为奇数时，$x_0$ 不是 $f(x)$ 的极值点</p>
                    <p>(2) 当 $n$ 为偶数时，$x_0$ 是 $f(x)$ 的极值点</p>
                    
                    <div class="solution">
                        <div class="solution-header">证明：</div>
                        <p>由泰勒公式，在 $x_0$ 的邻域内：</p>
                        <div class="math-expression">
                            $f(x) = f(x_0) + f'(x_0)(x-x_0) + \cdots + \frac{f^{(n-1)}(x_0)}{(n-1)!}(x-x_0)^{n-1} + \frac{f^{(n)}(x_0)}{n!}(x-x_0)^n + o((x-x_0)^n)$
                        </div>
                        
                        <p>由题设条件：</p>
                        <div class="math-expression">
                            $f(x) = \frac{f^{(n)}(x_0)}{n!}(x-x_0)^n + o((x-x_0)^n)$
                        </div>
                        
                        <p>当 $x$ 充分接近 $x_0$ 时，主导项为 $\frac{f^{(n)}(x_0)}{n!}(x-x_0)^n$。</p>
                        
                        <p><strong>(1) $n$ 为奇数时：</strong></p>
                        <p>$(x-x_0)^n$ 在 $x_0$ 左右变号，所以 $f(x)$ 在 $x_0$ 左右变号，因此 $x_0$ 不是极值点。</p>
                        
                        <p><strong>(2) $n$ 为偶数时：</strong></p>
                        <p>$(x-x_0)^n \geq 0$，且仅在 $x = x_0$ 时等于 $0$。</p>
                        <ul>
                            <li>若 $f^{(n)}(x_0) > 0$，则 $f(x) \geq f(x_0)$，$x_0$ 是极小值点</li>
                            <li>若 $f^{(n)}(x_0) < 0$，则 $f(x) \leq f(x_0)$，$x_0$ 是极大值点</li>
                        </ul>
                        
                        <p>因此当 $n$ 为偶数时，$x_0$ 是极值点。$\square$</p>
                    </div>
                </div>
            </div>
        </div>
        
        <div class="nav-buttons">
            <a href="2.2.html" class="btn prev">上一节：2.2 函数的求导法则</a>
            <a href="2.4.html" class="btn next">下一节：2.4 隐函数及参数方程求导</a>
        </div>
        
        <footer>
            <p>&copy; 2025 高等数学复习系统 - 高阶导数</p>
        </footer>
    </div>

    <script>
        // 高阶导数可视化演示
        function createHigherDerivativeDemo() {
            const plotDiv = document.getElementById('higher-derivative-plot');
            const functionSelect = document.getElementById('higher-function-select');
            const orderSlider = document.getElementById('order-slider');
            const orderValue = document.getElementById('order-value');
            const checkboxes = {
                original: document.getElementById('show-original'),
                first: document.getElementById('show-first'),
                second: document.getElementById('show-second'),
                third: document.getElementById('show-third'),
                fourth: document.getElementById('show-fourth')
            };

            function getFunctionAndDerivatives(funcType) {
                const funcs = [];
                const names = [];
                const colors = ['#e74c3c', '#3498db', '#27ae60', '#f39c12', '#8e44ad'];
                
                switch(funcType) {
                    case 'sin':
                        funcs.push(
                            x => Math.sin(x),
                            x => Math.cos(x),
                            x => -Math.sin(x),
                            x => -Math.cos(x),
                            x => Math.sin(x)
                        );
                        names.push('sin(x)', "sin'(x) = cos(x)", "sin''(x) = -sin(x)", "sin'''(x) = -cos(x)", "sin''''(x) = sin(x)");
                        break;
                    case 'cos':
                        funcs.push(
                            x => Math.cos(x),
                            x => -Math.sin(x),
                            x => -Math.cos(x),
                            x => Math.sin(x),
                            x => Math.cos(x)
                        );
                        names.push('cos(x)', "cos'(x) = -sin(x)", "cos''(x) = -cos(x)", "cos'''(x) = sin(x)", "cos''''(x) = cos(x)");
                        break;
                    case 'exp':
                        const expFunc = x => Math.exp(x);
                        funcs.push(expFunc, expFunc, expFunc, expFunc, expFunc);
                        names.push('e^x', "(e^x)' = e^x", "(e^x)'' = e^x", "(e^x)''' = e^x", "(e^x)'''' = e^x");
                        break;
                    case 'power':
                        funcs.push(
                            x => x * x * x,
                            x => 3 * x * x,
                            x => 6 * x,
                            x => 6,
                            x => 0
                        );
                        names.push('x³', "(x³)' = 3x²", "(x³)'' = 6x", "(x³)''' = 6", "(x³)'''' = 0");
                        break;
                    case 'ln':
                        funcs.push(
                            x => x > 0 ? Math.log(x) : NaN,
                            x => x > 0 ? 1/x : NaN,
                            x => x > 0 ? -1/(x*x) : NaN,
                            x => x > 0 ? 2/(x*x*x) : NaN,
                            x => x > 0 ? -6/(x*x*x*x) : NaN
                        );
                        names.push('ln(x)', "(ln x)' = 1/x", "(ln x)'' = -1/x²", "(ln x)''' = 2/x³", "(ln x)'''' = -6/x⁴");
                        break;
                }
                
                return { funcs, names, colors };
            }

            function updatePlot() {
                const funcType = functionSelect.value;
                const maxOrder = parseInt(orderSlider.value);
                orderValue.textContent = maxOrder;
                
                const { funcs, names, colors } = getFunctionAndDerivatives(funcType);
                
                const traces = [];
                const checkboxOrder = ['original', 'first', 'second', 'third', 'fourth'];
                
                // 生成 x 数据
                const xMin = funcType === 'ln' ? 0.1 : -2 * Math.PI;
                const xMax = funcType === 'ln' ? 3 : 2 * Math.PI;
                const x = [];
                for(let xi = xMin; xi <= xMax; xi += 0.1) {
                    x.push(xi);
                }
                
                for(let order = 0; order <= Math.min(maxOrder, 4); order++) {
                    const checkbox = checkboxes[checkboxOrder[order]];
                    if(checkbox && checkbox.checked) {
                        const y = x.map(xi => funcs[order](xi));
                        
                        traces.push({
                            x: x,
                            y: y,
                            type: 'scatter',
                            mode: 'lines',
                            name: names[order],
                            line: { color: colors[order], width: 2 }
                        });
                    }
                }
                
                const layout = {
                    title: `${funcType === 'sin' ? 'sin(x)' : 
                            funcType === 'cos' ? 'cos(x)' : 
                            funcType === 'exp' ? 'e^x' : 
                            funcType === 'power' ? 'x³' : 'ln(x)'} 及其高阶导数`,
                    xaxis: { 
                        title: 'x',
                        gridcolor: '#e8e8e8'
                    },
                    yaxis: { 
                        title: 'y',
                        gridcolor: '#e8e8e8'
                    },
                    plot_bgcolor: '#fafafa',
                    paper_bgcolor: '#ffffff',
                    legend: {
                        x: 1,
                        y: 1,
                        bgcolor: 'rgba(255,255,255,0.8)'
                    },
                    font: { family: 'Microsoft YaHei, Arial, sans-serif' }
                };
                
                if (plotDiv) {
                    Plotly.newPlot(plotDiv, traces, layout, {responsive: true});
                }
            }
            
            // 事件监听器
            if (functionSelect) functionSelect.addEventListener('change', updatePlot);
            if (orderSlider) orderSlider.addEventListener('input', updatePlot);
            
            Object.values(checkboxes).forEach(checkbox => {
                if (checkbox) checkbox.addEventListener('change', updatePlot);
            });
            
            // 初始化
            updatePlot();
        }
        
        // 页面加载动画
        function initializeAnimations() {
            const contentSections = document.querySelectorAll('.content-section');
            if (contentSections.length > 0 && typeof gsap !== 'undefined') {
                gsap.from('.content-section', {
                    duration: 0.8,
                    y: 50,
                    opacity: 0,
                    stagger: 0.2,
                    ease: "power2.out"
                });
            }
            
            // 确保所有卡片元素都可见且不被动画影响
            const allCards = document.querySelectorAll('.property-card, .formula-card, .example, .practice-problem');
            allCards.forEach(card => {
                card.style.display = card.classList.contains('property-card') ? 'inline-block' : 'block';
                card.style.visibility = 'visible';
                card.style.opacity = '1';
                card.style.transform = 'scale(1)';
            });
            
            // 只对属性卡片应用初始动画
            const propertyCards = document.querySelectorAll('.property-card');
            if (propertyCards.length > 0 && typeof gsap !== 'undefined') {
                try {
                    gsap.from('.property-card', {
                        duration: 0.6,
                        scale: 0.8,
                        opacity: 0,
                        stagger: 0.1,
                        ease: "back.out(1.7)",
                        delay: 0.5 // 增加延迟确保内容已渲染
                    });
                } catch (error) {
                    console.warn('GSAP animation failed:', error);
                }
            }
        }
        
        // 交互效果设置
        function setupCardInteractions() {
            const propertyCards = document.querySelectorAll('.property-card');
            propertyCards.forEach((card) => {
                card.addEventListener('mouseenter', function() {
                    if (typeof gsap !== 'undefined') {
                        gsap.to(this, {duration: 0.3, scale: 1.05});
                    }
                });
                
                card.addEventListener('mouseleave', function() {
                    if (typeof gsap !== 'undefined') {
                        gsap.to(this, {duration: 0.3, scale: 1});
                    }
                });
            });
            
            const formulaCards = document.querySelectorAll('.formula-card');
            formulaCards.forEach((card) => {
                card.addEventListener('mouseenter', function() {
                    if (typeof gsap !== 'undefined') {
                        gsap.to(this, {duration: 0.3, scale: 1.02});
                    }
                });
                
                card.addEventListener('mouseleave', function() {
                    if (typeof gsap !== 'undefined') {
                        gsap.to(this, {duration: 0.3, scale: 1});
                    }
                });
            });
        }
        
        // 滚动触发动画 - 禁用可能导致遮盖的动画
        function setupScrollAnimations() {
            // 移除可能造成内容遮盖的滚动动画
            // 只保留简单的观察器来确保内容可见性
            const observer = new IntersectionObserver((entries) => {
                entries.forEach(entry => {
                    if (entry.isIntersecting) {
                        // 确保元素完全可见，不应用动画
                        entry.target.style.opacity = '1';
                        entry.target.style.visibility = 'visible';
                        entry.target.style.transform = 'none';
                    }
                });
            }, { threshold: 0.1 });
            
            // 只观察可能出现问题的元素
            document.querySelectorAll('.example, .practice-problem').forEach(element => {
                observer.observe(element);
            });
        }

        // 页面加载时初始化
        document.addEventListener('DOMContentLoaded', function() {
            // 立即强制显示所有内容元素，防止被动画遮盖
            const allImportantElements = document.querySelectorAll('.properties-cards, .property-card, .formula-card, .example, .practice-problem, .definition, .theorem');
            allImportantElements.forEach(element => {
                if (element.classList.contains('properties-cards')) {
                    element.style.display = 'flex';
                } else if (element.classList.contains('property-card')) {
                    element.style.display = 'inline-block';
                } else {
                    element.style.display = 'block';
                }
                element.style.visibility = 'visible';
                element.style.opacity = '1';
                element.style.transform = 'none';
            });
            
            // 先初始化图表功能
            createHigherDerivativeDemo();
            
            // 设置交互效果（不影响可见性）
            setupCardInteractions();
            
            // 检查MathJax是否可用
            if (typeof MathJax !== 'undefined') {
                // 等待MathJax完全加载和渲染完成
                MathJax.startup.promise.then(() => {
                    // MathJax渲染完成后再等待一点时间
                    setTimeout(() => {
                        console.log('MathJax渲染完成，开始初始化动画');
                        initializeAnimations();
                        setupScrollAnimations();
                    }, 1000); // 增加延迟确保渲染完成
                }).catch((err) => {
                    console.warn('MathJax加载失败:', err);
                    // 即使MathJax失败也要初始化基本功能
                    setTimeout(() => {
                        setupScrollAnimations();
                    }, 1000);
                });
            } else {
                // 如果MathJax不可用，等待更长时间后初始化
                setTimeout(() => {
                    console.log('MathJax不可用，直接初始化');
                    initializeAnimations();
                    setupScrollAnimations();
                }, 1500);
            }
        });
    </script>
</body>
</html>
