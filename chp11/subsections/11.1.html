<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="alternate icon" href="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAzMiAzMiI+PGNpcmNsZSBjeD0iMTYiIGN5PSIxNiIgcj0iMTUiIGZpbGw9IiMzNDk4ZGIiIHN0cm9rZT0iIzJjM2U1MCIgc3Ryb2tlLXdpZHRoPSIyIi8+PGcgZmlsbD0id2hpdGUiIGZvbnQtZmFtaWx5PSJUaW1lcyxzZXJpZiIgZm9udC13ZWlnaHQ9ImJvbGQiPjx0ZXh0IHg9IjE2IiB5PSIxMyIgdGV4dC1hbmNob3I9Im1pZGRsZSIgZm9udC1zaXplPSIxMiI+ZDwvdGV4dD48bGluZSB4MT0iOCIgeTE9IjE2IiB4Mj0iMjQiIHkyPSIxNiIgc3Ryb2tlPSJ3aGl0ZSIgc3Ryb2tlLXdpZHRoPSIxLjUiLz48dGV4dCB4PSIxNiIgeT0iMjUiIHRleHQtYW5jaG9yPSJtaWRkbGUiIGZvbnQtc2l6ZT0iMTAiPmR4PC90ZXh0PjwvZz48L3N2Zz4=">
    <title>11.1 对弧长的曲线积分 - 高等数学复习</title>
    <script>
        window.MathJax = {
            tex: {
                inlineMath: [['$', '$']],
                displayMath: [['$$', '$$']]
            },
            chtml: {
                fontURL: 'https://cdn.jsdelivr.net/npm/mathjax@3/es5/output/chtml/fonts/woff-v2'
            }
        };
    </script>
    <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/gsap@3.12.2/dist/gsap.min.js"></script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Microsoft YaHei', 'Segoe UI', Arial, sans-serif;
            line-height: 1.6;
            color: #333;
            background: linear-gradient(135deg, #2ecc71 0%, #27ae60 100%);
            min-height: 100vh;
        }
        
        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }
        
        .back-link {
            display: inline-flex;
            align-items: center;
            margin-bottom: 20px;
            color: #2ecc71;
            text-decoration: none;
            font-weight: 500;
            transition: all 0.3s ease;
            background: rgba(255, 255, 255, 0.9);
            padding: 10px 15px;
            border-radius: 25px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }
        
        .back-link:hover {
            color: #27ae60;
            transform: translateX(-5px);
            box-shadow: 0 4px 15px rgba(0,0,0,0.15);
        }
        
        .back-link::before {
            content: '←';
            margin-right: 8px;
            font-size: 1.2em;
        }
        
        header {
            background: linear-gradient(135deg, #27ae60 0%, #2ecc71 100%);
            color: white;
            padding: 40px 0;
            text-align: center;
            border-radius: 15px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.2);
            margin-bottom: 30px;
        }
        
        h1 {
            font-size: 2.5em;
            margin: 0;
            text-shadow: 0 2px 4px rgba(0,0,0,0.3);
            font-weight: 300;
        }
        
        .subtitle {
            font-size: 1.1em;
            margin-top: 10px;
            opacity: 0.9;
        }
        
        .content-section {
            background: white;
            margin: 25px 0;
            border-radius: 15px;
            overflow: hidden;
            box-shadow: 0 5px 20px rgba(0,0,0,0.1);
            transition: transform 0.3s ease, box-shadow 0.3s ease;
        }
        
        .content-section:hover {
            transform: translateY(-3px);
            box-shadow: 0 8px 25px rgba(0,0,0,0.15);
        }
        
        .section-header {
            padding: 20px 30px;
            background: linear-gradient(45deg, #27ae60, #2ecc71);
            color: white;
        }
        
        .section-header h2 {
            margin: 0;
            font-size: 1.6em;
            font-weight: 400;
        }
        
        .section-content {
            padding: 30px;
        }
        
        .definition {
            background: linear-gradient(135deg, #e8f5e8, #d4edda);
            border-left: 5px solid #27ae60;
            padding: 25px;
            margin: 20px 0;
            border-radius: 0 10px 10px 0;
            box-shadow: 0 3px 15px rgba(39, 174, 96, 0.1);
        }
        
        .definition h4 {
            margin: 0 0 15px 0;
            color: #27ae60;
            font-size: 1.3em;
            font-weight: 600;
        }
        
        .theorem {
            background: linear-gradient(135deg, #fff3e0, #ffe0b2);
            border-left: 5px solid #ff9800;
            padding: 25px;
            margin: 20px 0;
            border-radius: 0 10px 10px 0;
            box-shadow: 0 3px 15px rgba(255, 152, 0, 0.1);
        }
        
        .theorem h4 {
            margin: 0 0 15px 0;
            color: #ff9800;
            font-size: 1.3em;
            font-weight: 600;
        }
        
        .example {
            background: linear-gradient(135deg, #e3f2fd, #bbdefb);
            border-left: 5px solid #2196f3;
            padding: 25px;
            margin: 20px 0;
            border-radius: 0 10px 10px 0;
            box-shadow: 0 3px 15px rgba(33, 150, 243, 0.1);
        }
        
        .example h4 {
            margin: 0 0 15px 0;
            color: #2196f3;
            font-size: 1.3em;
            font-weight: 600;
        }
        
        .nav-buttons {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-top: 40px;
            padding: 20px 0;
        }
        
        .btn {
            display: inline-flex;
            align-items: center;
            padding: 12px 25px;
            background: linear-gradient(45deg, #27ae60, #2ecc71);
            color: white;
            text-decoration: none;
            border-radius: 25px;
            font-weight: 500;
            transition: all 0.3s ease;
            box-shadow: 0 3px 15px rgba(39, 174, 96, 0.3);
        }
        
        .btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 20px rgba(39, 174, 96, 0.4);
        }
        
        .btn.prev::before {
            content: '←';
            margin-right: 8px;
            font-size: 1.1em;
        }
        
        .btn.next::after {
            content: '→';
            margin-left: 8px;
            font-size: 1.1em;
        }
        
        footer {
            text-align: center;
            color: white;
            padding: 30px 0;
            opacity: 0.9;
            margin-top: 50px;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 15px;
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.1);
        }
        
        footer p {
            text-align: center;
            margin: 0;
        }
        
        .math-expression {
            text-align: center;
            margin: 15px 0;
            font-size: 1.1em;
        }
        
        ul, ol {
            margin-left: 20px;
            margin-bottom: 15px;
        }
        
        li {
            margin-bottom: 8px;
        }
        
        p {
            margin-bottom: 15px;
            text-align: justify;
        }
        
        .highlight {
            background: linear-gradient(135deg, #fff3cd, #fce4a0);
            padding: 15px;
            border-left: 4px solid #ffc107;
            border-radius: 0 8px 8px 0;
            margin: 15px 0;
        }
        
        .application-box {
            background: linear-gradient(135deg, #f3e5f5, #e1bee7);
            border-left: 5px solid #9c27b0;
            padding: 20px;
            margin: 20px 0;
            border-radius: 0 10px 10px 0;
            box-shadow: 0 3px 15px rgba(156, 39, 176, 0.1);
        }
        
        .application-box h4 {
            margin: 0 0 15px 0;
            color: #9c27b0;
            font-size: 1.2em;
            font-weight: 600;
        }
        
        .formula-card {
            background: white;
            border: 2px solid #27ae60;
            border-radius: 10px;
            padding: 20px;
            margin: 15px 0;
            box-shadow: 0 3px 15px rgba(39, 174, 96, 0.1);
        }
        
        .formula-card h5 {
            color: #27ae60;
            margin: 0 0 10px 0;
            font-size: 1.1em;
        }
        
        .visualization-container {
            background: white;
            border-radius: 10px;
            box-shadow: 0 3px 15px rgba(0,0,0,0.1);
            overflow: hidden;
            margin: 20px 0;
        }
        
        .viz-header {
            background: linear-gradient(45deg, #27ae60, #2ecc71);
            color: white;
            padding: 15px 20px;
            text-align: center;
        }
        
        .viz-header h4 {
            margin: 0;
            font-size: 1.2em;
            font-weight: 400;
        }
        
        .viz-controls {
            padding: 15px 20px;
            background: #f8f9fa;
            border-bottom: 1px solid #dee2e6;
        }
        
        .viz-control-group {
            display: flex;
            align-items: center;
            gap: 15px;
            flex-wrap: wrap;
        }
        
        .viz-control-group label {
            font-weight: 500;
            color: #2c3e50;
            min-width: 80px;
        }
        
        .viz-control-group input[type="range"] {
            flex: 1;
            min-width: 150px;
        }
        
        .viz-control-group span {
            font-weight: bold;
            color: #27ae60;
            min-width: 30px;
        }
        
        #arc-canvas {
            display: block;
            width: 100%;
            height: 300px;
            background: white;
        }

        /* AI提示方块样式 */
        .ai-warning {
            position: fixed;
            top: 20px;
            left: 20px;
            width: 40px;
            height: 40px;
            background: white;
            border-radius: 8px;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            z-index: 1000;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.2);
            transition: all 0.3s ease;
            border: 2px solid #e0e0e0;
        }
        
        .ai-warning:hover {
            transform: scale(1.1);
            box-shadow: 0 6px 20px rgba(0, 0, 0, 0.3);
            border-color: #ff4444;
        }
        
        .ai-warning::before {
            content: '!';
            color: #e74c3c;
            font-size: 20px;
            font-weight: bold;
            font-family: Arial, sans-serif;
        }
        
        .ai-warning-tooltip {
            position: absolute;
            top: 50px;
            left: 0;
            background: rgba(0, 0, 0, 0.9);
            color: white;
            padding: 16px 20px;
            border-radius: 8px;
            font-size: 14px;
            line-height: 1.5;
            opacity: 0;
            visibility: hidden;
            transform: translateY(-10px);
            transition: all 0.3s ease;
            z-index: 1001;
            width: 250px;
            box-shadow: 0 4px 20px rgba(0, 0, 0, 0.3);
        }
        
        .ai-warning-tooltip::before {
            content: '';
            position: absolute;
            top: -8px;
            left: 20px;
            width: 0;
            height: 0;
            border-left: 8px solid transparent;
            border-right: 8px solid transparent;
            border-bottom: 8px solid rgba(0, 0, 0, 0.9);
        }
        
        .ai-warning:hover .ai-warning-tooltip {
            opacity: 1;
            visibility: visible;
            transform: translateY(0);
        }
        
        @media (max-width: 768px) {
            .container {
                padding: 10px;
            }
            
            h1 {
                font-size: 2em;
            }
            
            .section-content {
                padding: 20px;
            }
            
            .definition, .theorem, .example {
                padding: 20px;
            }
            
            .nav-buttons {
                flex-direction: column;
                gap: 15px;
            }

            .ai-warning {
                width: 35px;
                height: 35px;
                top: 15px;
                left: 15px;
            }
            
            .ai-warning::before {
                font-size: 18px;
            }
            
            .ai-warning-tooltip {
                width: 280px;
                font-size: 13px;
                padding: 14px 18px;
            }
        }
    </style>
</head>
<body>
    <!-- AI内容提示 -->
    <div class="ai-warning">
        <div class="ai-warning-tooltip">
            页面内容由AI生成，请谨慎对待。<br>如发现错误，欢迎反馈。
        </div>
    </div>
    
    <div class="container">
        <a href="../index.html" class="back-link">返回章节概览</a>
        
        <header>
            <h1>11.1 对弧长的曲线积分</h1>
            <div class="subtitle">Line Integrals with Respect to Arc Length</div>
        </header>
        
        <!-- 11.1.1 对弧长的积分的概念与性质 -->
        <div class="content-section">
            <div class="section-header">
                <h2>11.1.1 对弧长的曲线积分的概念与性质</h2>
            </div>
            <div class="section-content">
                <div class="application-box">
                    <h4>引例：曲线形构件的质量</h4>
                    <p>设有一细长构件，其形状为一条平面曲线弧 $L$，构件上各点的线密度（单位长度的质量）为 $\rho(x,y)$，求这个构件的质量。</p>
                    
                    <p><strong>分析过程：</strong></p>
                    <ol>
                        <li>将曲线弧 $L$ 任意分割成 $n$ 小段，每小段的弧长为 $\Delta s_i$</li>
                        <li>在第 $i$ 小段上任取一点 $(\xi_i, \eta_i)$，其线密度为 $\rho(\xi_i, \eta_i)$</li>
                        <li>第 $i$ 小段的质量近似为 $\rho(\xi_i, \eta_i) \cdot \Delta s_i$</li>
                        <li>整个构件的质量近似为 $\sum_{i=1}^{n} \rho(\xi_i, \eta_i) \cdot \Delta s_i$</li>
                        <li>当分割越来越细时，这个和式的极限就是构件的精确质量</li>
                    </ol>
                </div>
                
                <div class="definition">
                    <h4>第一类曲线积分（对弧长的曲线积分）的定义</h4>
                    <p>设 $L$ 为 $xOy$ 平面内的一条光滑曲线弧，函数 $f(x,y)$ 在 $L$ 上有界。把 $L$ 分成 $n$ 小段，设第 $i$ 小段的弧长为 $\Delta s_i$，又 $(\xi_i, \eta_i)$ 为第 $i$ 小段上任意取定的一点，作乘积 $f(\xi_i, \eta_i) \Delta s_i$，并作和式</p>
                    $$\sum_{i=1}^{n} f(\xi_i, \eta_i) \Delta s_i$$
                    
                    <p>如果当各小弧段的长度的最大值 $\lambda \to 0$ 时，这和式的极限存在，且与曲线弧 $L$ 的分法及点 $(\xi_i, \eta_i)$ 的取法无关，则称此极限为函数 $f(x,y)$ 在曲线弧 $L$ 上<strong>对弧长的曲线积分</strong>或<strong>第一类曲线积分</strong>，记作：</p>
                    
                    <div class="math-expression">
                        $$\int_L f(x,y) \, ds = \lim_{\lambda \to 0} \sum_{i=1}^{n} f(\xi_i, \eta_i) \Delta s_i$$
                    </div>
                    
                    <p>其中 $f(x,y)$ 叫做被积函数，$L$ 叫做积分弧段。</p>
                </div>
                
                <div class="theorem">
                    <h4>第一类曲线积分的性质</h4>
                    <ol>
                        <li><strong>线性性：</strong>$\int_L [af(x,y) + bg(x,y)] \, ds = a\int_L f(x,y) \, ds + b\int_L g(x,y) \, ds$</li>
                        <li><strong>可加性：</strong>若曲线弧 $L$ 由 $L_1$ 与 $L_2$ 连接而成，则 $\int_L f(x,y) \, ds = \int_{L_1} f(x,y) \, ds + \int_{L_2} f(x,y) \, ds$</li>
                        <li><strong>与方向无关：</strong>对弧长的曲线积分与积分路径的方向无关</li>
                        <li><strong>估值不等式：</strong>设在 $L$ 上 $m \leq f(x,y) \leq M$，$L$ 的弧长为 $s$，则 $ms \leq \int_L f(x,y) \, ds \leq Ms$</li>
                    </ol>
                </div>
                
                <div class="highlight">
                    <p><strong>几何意义：</strong>当 $f(x,y) = 1$ 时，$\int_L ds$ 表示曲线弧 $L$ 的长度。</p>
                    <p><strong>物理意义：</strong>当 $f(x,y)$ 表示线密度时，$\int_L f(x,y) \, ds$ 表示曲线形物体的质量。</p>
                </div>
                
                <div class="visualization-container">
                    <div class="viz-header">
                        <h4>弧长积分的分割逼近演示</h4>
                    </div>
                    <div class="viz-controls">
                        <div class="viz-control-group">
                            <label for="arc-segments">分割段数：</label>
                            <input type="range" id="arc-segments" min="2" max="20" value="5" step="1">
                            <span id="arc-segments-display">5</span>
                        </div>
                    </div>
                    <canvas id="arc-canvas"></canvas>
                </div>
                
                <div class="example">
                    <h4>例1：理解对弧长曲线积分的概念</h4>
                    <p>设 $L$ 为从点 $A(1,1)$ 到点 $B(2,4)$ 的直线段，求 $\int_L (x+y) \, ds$。</p>
                    
                    <p><strong>分析：</strong>这是一个概念理解题，我们先建立直线段的参数方程，再计算积分。</p>
                </div>
            </div>
        </div>
        
        <!-- 11.1.2 对弧长的曲线积分的计算方法 -->
        <div class="content-section">
            <div class="section-header">
                <h2>11.1.2 对弧长的曲线积分的计算方法</h2>
            </div>
            <div class="section-content">
                <div class="theorem">
                    <h4>计算方法</h4>
                    <p>设曲线弧 $L$ 的方程、被积函数及积分区间如下，则第一类曲线积分可按下列方法计算：</p>
                    
                    <div class="formula-card">
                        <h5>1. 参数方程形式</h5>
                        <p>设曲线 $L$：$\begin{cases} x = \varphi(t) \\ y = \psi(t) \end{cases}$，$t$ 从 $\alpha$ 到 $\beta$，且 $\varphi'(t)$、$\psi'(t)$ 连续，$[\varphi'(t)]^2 + [\psi'(t)]^2 \neq 0$，则</p>
                        <div class="math-expression">
                            $$\int_L f(x,y) \, ds = \int_{\alpha}^{\beta} f[\varphi(t), \psi(t)] \sqrt{[\varphi'(t)]^2 + [\psi'(t)]^2} \, dt$$
                        </div>
                    </div>
                    
                    <div class="formula-card">
                        <h5>2. 直角坐标方程形式</h5>
                        <p>设曲线 $L$：$y = \phi(x)$，$x$ 从 $a$ 到 $b$，且 $\phi'(x)$ 连续，则</p>
                        <div class="math-expression">
                            $$\int_L f(x,y) \, ds = \int_{a}^{b} f[x, \phi(x)] \sqrt{1 + [\phi'(x)]^2} \, dx$$
                        </div>
                        
                        <p>或者，设曲线 $L$：$x = \psi(y)$，$y$ 从 $c$ 到 $d$，且 $\psi'(y)$ 连续，则</p>
                        <div class="math-expression">
                            $$\int_L f(x,y) \, ds = \int_{c}^{d} f[\psi(y), y] \sqrt{[\psi'(y)]^2 + 1} \, dy$$
                        </div>
                    </div>
                    
                    <div class="formula-card">
                        <h5>3. 极坐标方程形式</h5>
                        <p>设曲线 $L$：$r = r(\theta)$，$\theta$ 从 $\alpha$ 到 $\beta$，且 $r'(\theta)$ 连续，则</p>
                        <div class="math-expression">
                            $$\int_L f(x,y) \, ds = \int_{\alpha}^{\beta} f[r(\theta)\cos\theta, r(\theta)\sin\theta] \sqrt{[r(\theta)]^2 + [r'(\theta)]^2} \, d\theta$$
                        </div>
                    </div>
                </div>
                
                <div class="example">
                    <h4>例2：直线段上的曲线积分</h4>
                    <p>计算 $\int_L (x^2 + y^2) \, ds$，其中 $L$ 是从原点 $O(0,0)$ 到点 $A(1,1)$ 的直线段。</p>
                    
                    <p><strong>解法一（参数方程）：</strong></p>
                    <p>直线段 $L$ 的参数方程为：$\begin{cases} x = t \\ y = t \end{cases}$，$t$ 从 $0$ 到 $1$</p>
                    <p>$\varphi'(t) = 1$，$\psi'(t) = 1$，所以 $ds = \sqrt{1^2 + 1^2} \, dt = \sqrt{2} \, dt$</p>
                    <p>因此：</p>
                    $$\int_L (x^2 + y^2) \, ds = \int_{0}^{1} (t^2 + t^2) \sqrt{2} \, dt = \sqrt{2} \int_{0}^{1} 2t^2 \, dt$$
                    $$= 2\sqrt{2} \int_{0}^{1} t^2 \, dt = 2\sqrt{2} \cdot \frac{t^3}{3} \Big|_{0}^{1} = \frac{2\sqrt{2}}{3}$$
                    
                    <p><strong>解法二（直角坐标）：</strong></p>
                    <p>直线段方程为 $y = x$，$x$ 从 $0$ 到 $1$</p>
                    <p>$y' = 1$，所以 $ds = \sqrt{1 + 1^2} \, dx = \sqrt{2} \, dx$</p>
                    <p>因此：</p>
                    $$\int_L (x^2 + y^2) \, ds = \int_{0}^{1} (x^2 + x^2) \sqrt{2} \, dx = \frac{2\sqrt{2}}{3}$$
                </div>
                
                <div class="example">
                    <h4>例3：圆弧上的曲线积分</h4>
                    <p>计算 $\int_L xy \, ds$，其中 $L$ 是圆周 $x^2 + y^2 = a^2$ 在第一象限的部分。</p>
                    
                    <p><strong>解：</strong></p>
                    <p>使用参数方程：$\begin{cases} x = a\cos t \\ y = a\sin t \end{cases}$，$t$ 从 $0$ 到 $\frac{\pi}{2}$</p>
                    <p>$x'(t) = -a\sin t$，$y'(t) = a\cos t$</p>
                    <p>$ds = \sqrt{(-a\sin t)^2 + (a\cos t)^2} \, dt = \sqrt{a^2(\sin^2 t + \cos^2 t)} \, dt = a \, dt$</p>
                    <p>因此：</p>
                    $$\int_L xy \, ds = \int_{0}^{\pi/2} (a\cos t)(a\sin t) \cdot a \, dt = a^3 \int_{0}^{\pi/2} \cos t \sin t \, dt$$
                    $$= a^3 \int_{0}^{\pi/2} \frac{1}{2}\sin 2t \, dt = \frac{a^3}{2} \cdot \left(-\frac{1}{2}\cos 2t\right) \Big|_{0}^{\pi/2}$$
                    $$= -\frac{a^3}{4}[\cos \pi - \cos 0] = -\frac{a^3}{4}[-1 - 1] = \frac{a^3}{2}$$
                </div>
            </div>
        </div>
        
        <div class="nav-buttons">
            <a href="../index.html" class="btn prev">返回章节概览</a>
            <a href="11.2.html" class="btn next">下一节：11.2 对坐标的曲线积分</a>
        </div>
        
        <footer>
            <p>&copy; 2025 高等数学复习系统 - 曲线积分与曲面积分</p>
        </footer>
    </div>

    <script>
        // 页面加载完成后的动画效果
        document.addEventListener('DOMContentLoaded', function() {
            // 为内容区块添加入场动画
            const sections = document.querySelectorAll('.content-section');
            sections.forEach((section, index) => {
                section.style.opacity = '0';
                section.style.transform = 'translateY(30px)';
                setTimeout(() => {
                    section.style.transition = 'all 0.8s ease';
                    section.style.opacity = '1';
                    section.style.transform = 'translateY(0)';
                }, index * 200);
            });
            
            // 为定义、定理、例子添加悬停效果
            const boxes = document.querySelectorAll('.definition, .theorem, .example, .application-box');
            boxes.forEach(box => {
                box.addEventListener('mouseenter', function() {
                    this.style.transform = 'translateX(5px)';
                });
                
                box.addEventListener('mouseleave', function() {
                    this.style.transform = 'translateX(0)';
                });
            });
            
            // 初始化弧长积分可视化
            initArcLengthVisualization();
        });
        
        // 弧长积分可视化
        function initArcLengthVisualization() {
            const canvas = document.getElementById('arc-canvas');
            const ctx = canvas.getContext('2d');
            
            // 获取设备像素比，解决高DPI屏幕模糊问题
            const dpr = window.devicePixelRatio || 1;
            const rect = canvas.getBoundingClientRect();
            
            // 设置canvas的实际大小（考虑设备像素比）
            canvas.width = rect.width * dpr;
            canvas.height = rect.height * dpr;
            
            // 缩放canvas绘图上下文以匹配设备像素比
            ctx.scale(dpr, dpr);
            
            // 设置canvas的CSS大小（显示大小）
            canvas.style.width = rect.width + 'px';
            canvas.style.height = rect.height + 'px';
            
            // 画布参数（基于CSS尺寸）
            const padding = 40;
            const plotWidth = rect.width - 2 * padding;
            const plotHeight = rect.height - 2 * padding;
            const xMin = 0, xMax = 2;
            const yMin = 0, yMax = 4;
            
            // 曲线函数
            function f(x) {
                return x * x;
            }
            
            // 坐标转换（基于CSS尺寸）
            function toCanvasX(x) {
                return padding + (x - xMin) / (xMax - xMin) * plotWidth;
            }
            
            function toCanvasY(y) {
                return rect.height - padding - (y - yMin) / (yMax - yMin) * plotHeight;
            }
            
            // 绘制坐标轴
            function drawAxes() {
                ctx.strokeStyle = '#666';
                ctx.lineWidth = 1;
                
                // X轴
                ctx.beginPath();
                ctx.moveTo(padding, rect.height - padding);
                ctx.lineTo(rect.width - padding, rect.height - padding);
                ctx.stroke();
                
                // Y轴
                ctx.beginPath();
                ctx.moveTo(padding, padding);
                ctx.lineTo(padding, rect.height - padding);
                ctx.stroke();
                
                // 标签
                ctx.fillStyle = '#666';
                ctx.font = '12px Arial';
                ctx.textAlign = 'center';
                ctx.fillText('x', rect.width - padding + 15, rect.height - padding + 4);
                ctx.textAlign = 'right';
                ctx.fillText('y', padding - 10, padding - 5);
                
                // 刻度
                ctx.textAlign = 'center';
                for (let x = 0; x <= 2; x += 0.5) {
                    const canvasX = toCanvasX(x);
                    ctx.beginPath();
                    ctx.moveTo(canvasX, rect.height - padding - 3);
                    ctx.lineTo(canvasX, rect.height - padding + 3);
                    ctx.stroke();
                    if (x > 0) ctx.fillText(x.toString(), canvasX, rect.height - padding + 15);
                }
                
                ctx.textAlign = 'right';
                for (let y = 1; y <= 4; y += 1) {
                    const canvasY = toCanvasY(y);
                    ctx.beginPath();
                    ctx.moveTo(padding - 3, canvasY);
                    ctx.lineTo(padding + 3, canvasY);
                    ctx.stroke();
                    ctx.fillText(y.toString(), padding - 8, canvasY + 3);
                }
            }
            
            // 绘制曲线
            function drawCurve() {
                ctx.strokeStyle = '#e74c3c';
                ctx.lineWidth = 2;
                ctx.beginPath();
                
                const steps = 100;
                for (let i = 0; i <= steps; i++) {
                    const x = xMin + (xMax - xMin) * i / steps;
                    const y = f(x);
                    const canvasX = toCanvasX(x);
                    const canvasY = toCanvasY(y);
                    
                    if (i === 0) {
                        ctx.moveTo(canvasX, canvasY);
                    } else {
                        ctx.lineTo(canvasX, canvasY);
                    }
                }
                ctx.stroke();
                
                // 曲线标签
                ctx.fillStyle = '#e74c3c';
                ctx.font = '14px Arial';
                ctx.textAlign = 'left';
                ctx.fillText('y = x²', toCanvasX(1.2), toCanvasY(1.44) - 10);
            }
            
            // 绘制分割线段
            function drawSegments(n) {
                ctx.strokeStyle = '#27ae60';
                ctx.fillStyle = '#27ae60';
                ctx.lineWidth = 2;
                
                for (let i = 0; i < n; i++) {
                    const x1 = xMin + (xMax - xMin) * i / n;
                    const x2 = xMin + (xMax - xMin) * (i + 1) / n;
                    const y1 = f(x1);
                    const y2 = f(x2);
                    
                    const canvasX1 = toCanvasX(x1);
                    const canvasY1 = toCanvasY(y1);
                    const canvasX2 = toCanvasX(x2);
                    const canvasY2 = toCanvasY(y2);
                    
                    // 绘制线段
                    ctx.beginPath();
                    ctx.moveTo(canvasX1, canvasY1);
                    ctx.lineTo(canvasX2, canvasY2);
                    ctx.stroke();
                    
                    // 绘制分割点
                    ctx.beginPath();
                    ctx.arc(canvasX1, canvasY1, 3, 0, 2 * Math.PI);
                    ctx.fill();
                }
                
                // 最后一个点
                const lastX = toCanvasX(xMax);
                const lastY = toCanvasY(f(xMax));
                ctx.beginPath();
                ctx.arc(lastX, lastY, 3, 0, 2 * Math.PI);
                ctx.fill();
            }
            
            // 重绘函数
            function redraw() {
                ctx.clearRect(0, 0, rect.width, rect.height);
                drawAxes();
                drawCurve();
                
                const n = parseInt(document.getElementById('arc-segments').value);
                drawSegments(n);
            }
            
            // 事件监听器
            document.getElementById('arc-segments').addEventListener('input', function() {
                const value = this.value;
                document.getElementById('arc-segments-display').textContent = value;
                redraw();
            });
            
            // 初始化
            redraw();
        }
    </script>
</body>
</html>
