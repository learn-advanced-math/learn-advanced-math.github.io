<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="alternate icon" href="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAzMiAzMiI+PGNpcmNsZSBjeD0iMTYiIGN5PSIxNiIgcj0iMTUiIGZpbGw9IiMzNDk4ZGIiIHN0cm9rZT0iIzJjM2U1MCIgc3Ryb2tlLXdpZHRoPSIyIi8+PGcgZmlsbD0id2hpdGUiIGZvbnQtZmFtaWx5PSJUaW1lcyxzZXJpZiIgZm9udC13ZWlnaHQ9ImJvbGQiPjx0ZXh0IHg9IjE2IiB5PSIxMyIgdGV4dC1hbmNob3I9Im1pZGRsZSIgZm9udC1zaXplPSIxMiI+ZDwvdGV4dD48bGluZSB4MT0iOCIgeTE9IjE2IiB4Mj0iMjQiIHkyPSIxNiIgc3Ryb2tlPSJ3aGl0ZSIgc3Ryb2tlLXdpZHRoPSIxLjUiLz48dGV4dCB4PSIxNiIgeT0iMjUiIHRleHQtYW5jaG9yPSJtaWRkbGUiIGZvbnQtc2l6ZT0iMTAiPmR4PC90ZXh0PjwvZz48L3N2Zz4=">
    <title>9.3 全微分 - 高等数学复习</title>
    <script>
        window.MathJax = {
            tex: {
                inlineMath: [['$', '$']],
                displayMath: [['$$', '$$']]
            },
            chtml: {
                fontURL: 'https://cdn.jsdelivr.net/npm/mathjax@3/es5/output/chtml/fonts/woff-v2'
            }
        };
    </script>
    <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/gsap@3.12.2/dist/gsap.min.js"></script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Microsoft YaHei', 'Segoe UI', Arial, sans-serif;
            line-height: 1.6;
            color: #333;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
        }
        
        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }
        
        .back-link {
            display: inline-flex;
            align-items: center;
            margin-bottom: 20px;
            color: #3498db;
            text-decoration: none;
            font-weight: 500;
            transition: all 0.3s ease;
            background: rgba(255, 255, 255, 0.9);
            padding: 10px 15px;
            border-radius: 25px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }
        
        .back-link:hover {
            color: #2980b9;
            transform: translateX(-5px);
            box-shadow: 0 4px 15px rgba(0,0,0,0.15);
        }
        
        .back-link::before {
            content: '←';
            margin-right: 8px;
            font-size: 1.2em;
        }
        
        header {
            background: linear-gradient(135deg, #e74c3c 0%, #c0392b 100%);
            color: white;
            padding: 40px 0;
            text-align: center;
            border-radius: 15px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.2);
            margin-bottom: 30px;
        }
        
        h1 {
            font-size: 2.5em;
            margin: 0;
            text-shadow: 0 2px 4px rgba(0,0,0,0.3);
            font-weight: 300;
        }
        
        .subtitle {
            font-size: 1.1em;
            margin-top: 10px;
            opacity: 0.9;
        }
        
        .content-section {
            background: white;
            margin: 25px 0;
            border-radius: 15px;
            overflow: hidden;
            box-shadow: 0 5px 20px rgba(0,0,0,0.1);
            transition: transform 0.3s ease, box-shadow 0.3s ease;
        }
        
        .content-section:hover {
            transform: translateY(-3px);
            box-shadow: 0 8px 25px rgba(0,0,0,0.15);
        }
        
        .section-header {
            padding: 20px 30px;
            background: linear-gradient(45deg, #e74c3c, #c0392b);
            color: white;
        }
        
        .section-header h2 {
            margin: 0;
            font-size: 1.6em;
            font-weight: 400;
        }
        
        .section-content {
            padding: 30px;
        }
        
        .definition {
            background: linear-gradient(135deg, #f4f0f8, #ece2f0);
            border-left: 5px solid #e74c3c;
            padding: 25px;
            margin: 20px 0;
            border-radius: 0 10px 10px 0;
            box-shadow: 0 3px 15px rgba(231, 76, 60, 0.1);
        }
        
        .definition h4 {
            margin: 0 0 15px 0;
            color: #e74c3c;
            font-size: 1.3em;
            font-weight: 600;
        }
        
        .theorem {
            background: linear-gradient(135deg, #fef9e7, #fcf4dd);
            border-left: 5px solid #f39c12;
            padding: 25px;
            margin: 20px 0;
            border-radius: 0 10px 10px 0;
            box-shadow: 0 3px 15px rgba(243, 156, 18, 0.1);
        }
        
        .theorem h4 {
            margin: 0 0 15px 0;
            color: #f39c12;
            font-size: 1.3em;
            font-weight: 600;
        }
        
        .example {
            background: linear-gradient(135deg, #ebf3fd, #d6e9f8);
            border-left: 5px solid #3498db;
            padding: 25px;
            margin: 20px 0;
            border-radius: 0 10px 10px 0;
            box-shadow: 0 3px 15px rgba(52, 152, 219, 0.1);
        }
        
        .example h4 {
            margin: 0 0 15px 0;
            color: #3498db;
            font-size: 1.3em;
            font-weight: 600;
        }
        
        .practice-problem {
            background: linear-gradient(135deg, #fdf2e9, #fbeee0);
            border-left: 5px solid #e67e22;
            padding: 25px;
            margin: 20px 0;
            border-radius: 0 10px 10px 0;
            box-shadow: 0 3px 15px rgba(230, 126, 34, 0.1);
        }
        
        .practice-problem h4 {
            margin: 0 0 15px 0;
            color: #e67e22;
            font-size: 1.3em;
            font-weight: 600;
        }
        
        .difficulty {
            display: inline-block;
            padding: 3px 10px;
            border-radius: 15px;
            font-size: 0.85em;
            font-weight: 500;
            margin-left: 10px;
        }
        
        .difficulty.medium {
            background: #f39c12;
            color: white;
        }
        
        .difficulty.hard {
            background: #e74c3c;
            color: white;
        }
        
        .difficulty.very-hard {
            background: #8e44ad;
            color: white;
        }
        
        .solution {
            margin-top: 20px;
            padding-top: 20px;
            border-top: 2px dashed #bdc3c7;
        }
        
        .solution-header {
            font-weight: 600;
            color: #2c3e50;
            margin-bottom: 15px;
            font-size: 1.1em;
        }
        
        .nav-buttons {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-top: 40px;
            padding: 20px 0;
        }
        
        .btn {
            display: inline-flex;
            align-items: center;
            padding: 12px 25px;
            background: linear-gradient(45deg, #e74c3c, #c0392b);
            color: white;
            text-decoration: none;
            border-radius: 25px;
            font-weight: 500;
            transition: all 0.3s ease;
            box-shadow: 0 3px 15px rgba(231, 76, 60, 0.3);
        }
        
        .btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 20px rgba(231, 76, 60, 0.4);
        }
        
        .btn.prev::before {
            content: '←';
            margin-right: 8px;
            font-size: 1.1em;
        }
        
        .btn.next::after {
            content: '→';
            margin-left: 8px;
            font-size: 1.1em;
        }
        
        footer {
            text-align: center;
            color: white;
            padding: 30px 0;
            opacity: 0.9;
            margin-top: 50px;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 15px;
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.1);
        }
        
        footer p {
            text-align: center;
            margin: 0;
        }
        
        .math-expression {
            text-align: center;
            margin: 15px 0;
            font-size: 1.1em;
        }
        
        ul, ol {
            margin-left: 20px;
            margin-bottom: 15px;
        }
        
        li {
            margin-bottom: 8px;
        }
        
        p {
            margin-bottom: 15px;
            text-align: justify;
        }
        
        .highlight {
            background: linear-gradient(135deg, #fff3cd, #fce4a0);
            padding: 15px;
            border-left: 4px solid #ffc107;
            border-radius: 0 8px 8px 0;
            margin: 15px 0;
        }
        
        .important-formula {
            background: linear-gradient(135deg, #e8f5e8, #d4e8d4);
            border-left: 5px solid #27ae60;
            padding: 20px;
            margin: 20px 0;
            border-radius: 0 10px 10px 0;
            box-shadow: 0 3px 15px rgba(39, 174, 96, 0.1);
        }
        
        .important-formula h5 {
            color: #27ae60;
            font-size: 1.2em;
            margin-bottom: 15px;
            font-weight: 600;
        }
        
        .application-example {
            background: linear-gradient(135deg, #f0f8ff, #e6f3ff);
            border-left: 5px solid #2980b9;
            padding: 25px;
            margin: 20px 0;
            border-radius: 0 10px 10px 0;
            box-shadow: 0 3px 15px rgba(41, 128, 185, 0.1);
        }
        
        .application-example h4 {
            margin: 0 0 15px 0;
            color: #2980b9;
            font-size: 1.3em;
            font-weight: 600;
        }
        
        .comparison-table {
            width: 100%;
            border-collapse: collapse;
            margin: 20px 0;
            background: white;
            border-radius: 10px;
            overflow: hidden;
            box-shadow: 0 3px 15px rgba(0,0,0,0.1);
        }
        
        .comparison-table th {
            background: linear-gradient(45deg, #3498db, #2980b9);
            color: white;
            padding: 15px;
            text-align: center;
            font-weight: 600;
        }
        
        .comparison-table td {
            padding: 12px 15px;
            text-align: center;
            border-bottom: 1px solid #ecf0f1;
        }
        
        .comparison-table tr:nth-child(even) {
            background: #f8f9fa;
        }

        /* AI提示方块样式 */
        .ai-warning {
            position: fixed;
            top: 20px;
            left: 20px;
            width: 40px;
            height: 40px;
            background: white;
            border-radius: 8px;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            z-index: 1000;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.2);
            transition: all 0.3s ease;
            border: 2px solid #e0e0e0;
        }
        
        .ai-warning:hover {
            transform: scale(1.1);
            box-shadow: 0 6px 20px rgba(0, 0, 0, 0.3);
            border-color: #ff4444;
        }
        
        .ai-warning::before {
            content: '!';
            color: #e74c3c;
            font-size: 20px;
            font-weight: bold;
            font-family: Arial, sans-serif;
        }
        
        .ai-warning-tooltip {
            position: absolute;
            top: 50px;
            left: 0;
            background: rgba(0, 0, 0, 0.9);
            color: white;
            padding: 16px 20px;
            border-radius: 8px;
            font-size: 14px;
            line-height: 1.5;
            opacity: 0;
            visibility: hidden;
            transform: translateY(-10px);
            transition: all 0.3s ease;
            z-index: 1001;
            width: 250px;
            box-shadow: 0 4px 20px rgba(0, 0, 0, 0.3);
        }
        
        .ai-warning-tooltip::before {
            content: '';
            position: absolute;
            top: -8px;
            left: 20px;
            width: 0;
            height: 0;
            border-left: 8px solid transparent;
            border-right: 8px solid transparent;
            border-bottom: 8px solid rgba(0, 0, 0, 0.9);
        }
        
        .ai-warning:hover .ai-warning-tooltip {
            opacity: 1;
            visibility: visible;
            transform: translateY(0);
        }
        
        @media (max-width: 768px) {
            .container {
                padding: 10px;
            }
            
            h1 {
                font-size: 2em;
            }
            
            .section-content {
                padding: 20px;
            }
            
            .definition, .theorem, .example, .practice-problem {
                padding: 20px;
            }
            
            .nav-buttons {
                flex-direction: column;
                gap: 15px;
            }

            .ai-warning {
                width: 35px;
                height: 35px;
                top: 15px;
                left: 15px;
            }
            
            .ai-warning::before {
                font-size: 18px;
            }
            
            .ai-warning-tooltip {
                width: 280px;
                font-size: 13px;
                padding: 14px 18px;
            }
        }
    </style>
</head>
<body>
    <!-- AI内容提示 -->
    <div class="ai-warning">
        <div class="ai-warning-tooltip">
            页面内容由AI生成，请谨慎对待。<br>如发现错误，欢迎反馈。
        </div>
    </div>
    
    <div class="container">
        <a href="../index.html" class="back-link">返回章节概览</a>
        
        <header>
            <h1>9.3 全微分</h1>
            <div class="subtitle">Total Differential</div>
        </header>
        
        <!-- 9.3.1 全微分的定义 -->
        <div class="content-section">
            <div class="section-header">
                <h2>9.3.1 全微分的定义</h2>
            </div>
            <div class="section-content">
                <div class="definition">
                    <h4>全微分的定义</h4>
                    <p>设函数 $z = f(x, y)$ 在点 $(x_0, y_0)$ 的某邻域内有定义，如果函数在点 $(x_0, y_0)$ 的全增量</p>
                    <div class="math-expression">
                        $$\Delta z = f(x_0 + \Delta x, y_0 + \Delta y) - f(x_0, y_0)$$
                    </div>
                    <p>可以表示为</p>
                    <div class="math-expression">
                        $$\Delta z = A\Delta x + B\Delta y + o(\rho)$$
                    </div>
                    <p>其中 $A$、$B$ 不依赖于 $\Delta x$、$\Delta y$ 而只与 $x_0$、$y_0$ 有关，$\rho = \sqrt{(\Delta x)^2 + (\Delta y)^2}$，$o(\rho)$ 是比 $\rho$ 高阶的无穷小，则称函数 $z = f(x, y)$ 在点 $(x_0, y_0)$ <strong>可微</strong>，并称 $A\Delta x + B\Delta y$ 为函数 $z = f(x, y)$ 在点 $(x_0, y_0)$ 的<strong>全微分</strong>，记作 $\mathrm{d}z$。</p>
                    
                    <div class="math-expression">
                        $$\mathrm{d}z = A\Delta x + B\Delta y$$
                    </div>
                </div>
                
                <div class="theorem">
                    <h4>全微分存在的充分条件</h4>
                    <p>如果函数 $z = f(x, y)$ 的偏导数 $\frac{\partial z}{\partial x}$、$\frac{\partial z}{\partial y}$ 在点 $(x_0, y_0)$ 连续，那么函数在该点可微。</p>
                    
                    <div class="highlight">
                        <p><strong>当函数可微时：</strong></p>
                        <ul>
                            <li>$A = \frac{\partial f}{\partial x}|_{(x_0, y_0)}$</li>
                            <li>$B = \frac{\partial f}{\partial y}|_{(x_0, y_0)}$</li>
                        </ul>
                    </div>
                </div>
                
                <div class="important-formula">
                    <h5>全微分的表达式</h5>
                    <p>如果函数 $z = f(x, y)$ 在点 $(x, y)$ 可微，则其全微分为：</p>
                    <div class="math-expression">
                        $$\mathrm{d}z = \frac{\partial z}{\partial x}\mathrm{d}x + \frac{\partial z}{\partial y}\mathrm{d}y$$
                    </div>
                    <p>对于多元函数 $u = f(x_1, x_2, \ldots, x_n)$：</p>
                    <div class="math-expression">
                        $$\mathrm{d}u = \frac{\partial u}{\partial x_1}\mathrm{d}x_1 + \frac{\partial u}{\partial x_2}\mathrm{d}x_2 + \cdots + \frac{\partial u}{\partial x_n}\mathrm{d}x_n$$
                    </div>
                </div>
                
                <div class="theorem">
                    <h4>可微、连续与偏导数存在的关系</h4>
                    <table class="comparison-table">
                        <thead>
                            <tr>
                                <th>条件</th>
                                <th>可微</th>
                                <th>连续</th>
                                <th>偏导数存在</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td>可微</td>
                                <td>✓</td>
                                <td>✓</td>
                                <td>✓</td>
                            </tr>
                            <tr>
                                <td>偏导数连续</td>
                                <td>✓</td>
                                <td>✓</td>
                                <td>✓</td>
                            </tr>
                            <tr>
                                <td>连续</td>
                                <td>不一定</td>
                                <td>✓</td>
                                <td>不一定</td>
                            </tr>
                            <tr>
                                <td>偏导数存在</td>
                                <td>不一定</td>
                                <td>不一定</td>
                                <td>✓</td>
                            </tr>
                        </tbody>
                    </table>
                </div>
                
                <div class="example">
                    <h4>例1：求全微分</h4>
                    <p>求函数 $z = x^2y + xy^2$ 的全微分。</p>
                    
                    <div class="solution">
                        <div class="solution-header">解：</div>
                        <p>首先求偏导数：</p>
                        $$\frac{\partial z}{\partial x} = 2xy + y^2$$
                        $$\frac{\partial z}{\partial y} = x^2 + 2xy$$
                        
                        <p>由于偏导数连续，所以函数可微，全微分为：</p>
                        $$\mathrm{d}z = (2xy + y^2)\mathrm{d}x + (x^2 + 2xy)\mathrm{d}y$$
                    </div>
                </div>
                
                <div class="example">
                    <h4>例2：验证可微性</h4>
                    <p>讨论函数 $f(x, y) = \begin{cases} 
                    \frac{xy}{\sqrt{x^2 + y^2}}, & (x, y) \neq (0, 0) \\
                    0, & (x, y) = (0, 0)
                    \end{cases}$ 在原点的可微性。</p>
                    
                    <div class="solution">
                        <div class="solution-header">解：</div>
                        <p><strong>步骤1：</strong>验证偏导数在原点是否存在</p>
                        $$f_x(0, 0) = \lim_{\Delta x \to 0} \frac{f(\Delta x, 0) - f(0, 0)}{\Delta x} = \lim_{\Delta x \to 0} \frac{0 - 0}{\Delta x} = 0$$
                        
                        $$f_y(0, 0) = \lim_{\Delta y \to 0} \frac{f(0, \Delta y) - f(0, 0)}{\Delta y} = \lim_{\Delta y \to 0} \frac{0 - 0}{\Delta y} = 0$$
                        
                        <p><strong>步骤2：</strong>验证可微性</p>
                        <p>计算极限：</p>
                        $$\lim_{(\Delta x, \Delta y) \to (0, 0)} \frac{\Delta z - f_x(0, 0)\Delta x - f_y(0, 0)\Delta y}{\sqrt{(\Delta x)^2 + (\Delta y)^2}}$$
                        
                        $$= \lim_{(\Delta x, \Delta y) \to (0, 0)} \frac{\frac{\Delta x \Delta y}{\sqrt{(\Delta x)^2 + (\Delta y)^2}}}{\sqrt{(\Delta x)^2 + (\Delta y)^2}}$$
                        
                        $$= \lim_{(\Delta x, \Delta y) \to (0, 0)} \frac{\Delta x \Delta y}{(\Delta x)^2 + (\Delta y)^2}$$
                        
                        <p>沿直线 $y = x$ 趋近：$\lim_{x \to 0} \frac{x \cdot x}{x^2 + x^2} = \frac{1}{2}$</p>
                        <p>沿直线 $y = -x$ 趋近：$\lim_{x \to 0} \frac{x \cdot (-x)}{x^2 + x^2} = -\frac{1}{2}$</p>
                        
                        <p>由于极限不存在，所以函数在原点不可微。</p>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- 9.3.2 全微分在近似计算中的应用 -->
        <div class="content-section">
            <div class="section-header">
                <h2>9.3.2 全微分在近似计算中的应用</h2>
            </div>
            <div class="section-content">
                <div class="theorem">
                    <h4>全微分的近似公式</h4>
                    <p>当 $|\Delta x|$ 和 $|\Delta y|$ 都较小时，有近似公式：</p>
                    <div class="math-expression">
                        $$\Delta z \approx \mathrm{d}z = \frac{\partial z}{\partial x}\Delta x + \frac{\partial z}{\partial y}\Delta y$$
                    </div>
                    <p>即：</p>
                    <div class="math-expression">
                        $$f(x_0 + \Delta x, y_0 + \Delta y) \approx f(x_0, y_0) + f_x(x_0, y_0)\Delta x + f_y(x_0, y_0)\Delta y$$
                    </div>
                </div>
                
                <div class="application-example">
                    <h4>误差估计</h4>
                    <p>在实际测量中，如果直接测量量 $x$、$y$ 的误差分别为 $\Delta x$、$\Delta y$，那么间接测量量 $z = f(x, y)$ 的<strong>绝对误差</strong>约为：</p>
                    <div class="math-expression">
                        $$|\Delta z| \approx \left|\frac{\partial z}{\partial x}\right||\Delta x| + \left|\frac{\partial z}{\partial y}\right||\Delta y|$$
                    </div>
                    
                    <p><strong>相对误差</strong>约为：</p>
                    <div class="math-expression">
                        $$\frac{|\Delta z|}{|z|} \approx \frac{1}{|z|}\left(\left|\frac{\partial z}{\partial x}\right||\Delta x| + \left|\frac{\partial z}{\partial y}\right||\Delta y|\right)$$
                    </div>
                </div>
                
                <div class="example">
                    <h4>例3：近似计算</h4>
                    <p>利用全微分计算 $(1.02)^{2.97}$ 的近似值。</p>
                    
                    <div class="solution">
                        <div class="solution-header">解：</div>
                        <p>设 $f(x, y) = x^y$，取 $x_0 = 1$，$y_0 = 3$，$\Delta x = 0.02$，$\Delta y = -0.03$</p>
                        
                        <p>计算偏导数：</p>
                        $$\frac{\partial f}{\partial x} = yx^{y-1}, \quad \frac{\partial f}{\partial y} = x^y \ln x$$
                        
                        <p>在点 $(1, 3)$ 处：</p>
                        $$f(1, 3) = 1^3 = 1$$
                        $$f_x(1, 3) = 3 \cdot 1^2 = 3$$
                        $$f_y(1, 3) = 1^3 \ln 1 = 0$$
                        
                        <p>因此：</p>
                        $$(1.02)^{2.97} \approx f(1, 3) + f_x(1, 3) \cdot 0.02 + f_y(1, 3) \cdot (-0.03)$$
                        $$= 1 + 3 \times 0.02 + 0 \times (-0.03) = 1 + 0.06 = 1.06$$
                    </div>
                </div>
                
                <div class="example">
                    <h4>例4：误差分析</h4>
                    <p>测量圆锥的底面半径 $r$ 和高 $h$，求其体积 $V = \frac{1}{3}\pi r^2 h$。已知 $r = 2\text{cm}$，$h = 6\text{cm}$，测量的相对误差都不超过 $2\%$，求体积的相对误差。</p>
                    
                    <div class="solution">
                        <div class="solution-header">解：</div>
                        <p>体积公式：$V = \frac{1}{3}\pi r^2 h$</p>
                        
                        <p>计算偏导数：</p>
                        $$\frac{\partial V}{\partial r} = \frac{2}{3}\pi r h, \quad \frac{\partial V}{\partial h} = \frac{1}{3}\pi r^2$$
                        
                        <p>绝对误差：</p>
                        $$|\Delta V| \approx \left|\frac{\partial V}{\partial r}\right||\Delta r| + \left|\frac{\partial V}{\partial h}\right||\Delta h|$$
                        $$= \frac{2}{3}\pi r h |\Delta r| + \frac{1}{3}\pi r^2 |\Delta h|$$
                        
                        <p>相对误差：</p>
                        $$\frac{|\Delta V|}{V} \approx \frac{1}{\frac{1}{3}\pi r^2 h}\left(\frac{2}{3}\pi r h |\Delta r| + \frac{1}{3}\pi r^2 |\Delta h|\right)$$
                        $$= \frac{2|\Delta r|}{r} + \frac{|\Delta h|}{h}$$
                        
                        <p>由于 $\frac{|\Delta r|}{r} \leq 0.02$，$\frac{|\Delta h|}{h} \leq 0.02$，所以：</p>
                        $$\frac{|\Delta V|}{V} \leq 2 \times 0.02 + 0.02 = 0.06 = 6\%$$
                        
                        <p>因此，体积的相对误差不超过 $6\%$。</p>
                    </div>
                </div>
                
                <div class="practice-problem">
                    <h4>习题1 <span class="difficulty medium">中等难度</span></h4>
                    <p>求函数 $z = e^{xy} \sin(x + y)$ 的全微分。</p>
                    
                    <div class="solution">
                        <div class="solution-header">解：</div>
                        <p>计算偏导数：</p>
                        $$\frac{\partial z}{\partial x} = ye^{xy}\sin(x + y) + e^{xy}\cos(x + y)$$
                        $$= e^{xy}[y\sin(x + y) + \cos(x + y)]$$
                        
                        $$\frac{\partial z}{\partial y} = xe^{xy}\sin(x + y) + e^{xy}\cos(x + y)$$
                        $$= e^{xy}[x\sin(x + y) + \cos(x + y)]$$
                        
                        <p>全微分为：</p>
                        $$\mathrm{d}z = e^{xy}[y\sin(x + y) + \cos(x + y)]\mathrm{d}x + e^{xy}[x\sin(x + y) + \cos(x + y)]\mathrm{d}y$$
                        $$= e^{xy}[(y\sin(x + y) + \cos(x + y))\mathrm{d}x + (x\sin(x + y) + \cos(x + y))\mathrm{d}y]$$
                    </div>
                </div>
                
                <div class="practice-problem">
                    <h4>习题2 <span class="difficulty hard">较难</span></h4>
                    <p>利用全微分计算 $\sqrt{(3.01)^2 + (3.99)^2}$ 的近似值。</p>
                    
                    <div class="solution">
                        <div class="solution-header">解：</div>
                        <p>设 $f(x, y) = \sqrt{x^2 + y^2}$，取 $x_0 = 3$，$y_0 = 4$，$\Delta x = 0.01$，$\Delta y = -0.01$</p>
                        
                        <p>计算偏导数：</p>
                        $$\frac{\partial f}{\partial x} = \frac{x}{\sqrt{x^2 + y^2}}, \quad \frac{\partial f}{\partial y} = \frac{y}{\sqrt{x^2 + y^2}}$$
                        
                        <p>在点 $(3, 4)$ 处：</p>
                        $$f(3, 4) = \sqrt{9 + 16} = 5$$
                        $$f_x(3, 4) = \frac{3}{5}, \quad f_y(3, 4) = \frac{4}{5}$$
                        
                        <p>近似值：</p>
                        $$\sqrt{(3.01)^2 + (3.99)^2} \approx f(3, 4) + f_x(3, 4) \cdot 0.01 + f_y(3, 4) \cdot (-0.01)$$
                        $$= 5 + \frac{3}{5} \times 0.01 + \frac{4}{5} \times (-0.01)$$
                        $$= 5 + 0.006 - 0.008 = 4.998$$
                    </div>
                </div>
                
                <div class="practice-problem">
                    <h4>习题3 <span class="difficulty very-hard">很难</span></h4>
                    <p>已知椭球的三个半轴长分别为 $a = 3$、$b = 4$、$c = 5$，测量误差分别为 $0.01$、$0.02$、$0.01$。求椭球体积 $V = \frac{4}{3}\pi abc$ 的最大绝对误差和相对误差。</p>
                    
                    <div class="solution">
                        <div class="solution-header">解：</div>
                        <p>椭球体积公式：$V = \frac{4}{3}\pi abc$</p>
                        
                        <p>计算偏导数：</p>
                        $$\frac{\partial V}{\partial a} = \frac{4}{3}\pi bc, \quad \frac{\partial V}{\partial b} = \frac{4}{3}\pi ac, \quad \frac{\partial V}{\partial c} = \frac{4}{3}\pi ab$$
                        
                        <p>在点 $(3, 4, 5)$ 处：</p>
                        $$\frac{\partial V}{\partial a} = \frac{4}{3}\pi \times 4 \times 5 = \frac{80\pi}{3}$$
                        $$\frac{\partial V}{\partial b} = \frac{4}{3}\pi \times 3 \times 5 = 20\pi$$
                        $$\frac{\partial V}{\partial c} = \frac{4}{3}\pi \times 3 \times 4 = 16\pi$$
                        
                        <p>最大绝对误差：</p>
                        $$|\Delta V| \approx \left|\frac{\partial V}{\partial a}\right||\Delta a| + \left|\frac{\partial V}{\partial b}\right||\Delta b| + \left|\frac{\partial V}{\partial c}\right||\Delta c|$$
                        $$= \frac{80\pi}{3} \times 0.01 + 20\pi \times 0.02 + 16\pi \times 0.01$$
                        $$= \frac{0.8\pi}{3} + 0.4\pi + 0.16\pi = \pi\left(\frac{0.8}{3} + 0.4 + 0.16\right)$$
                        $$= \pi\left(\frac{0.8 + 1.2 + 0.48}{3}\right) = \frac{2.48\pi}{3}$$
                        
                        <p>体积的准确值：$V = \frac{4}{3}\pi \times 3 \times 4 \times 5 = 80\pi$</p>
                        
                        <p>相对误差：</p>
                        $$\frac{|\Delta V|}{V} = \frac{\frac{2.48\pi}{3}}{80\pi} = \frac{2.48}{240} = \frac{31}{300} \approx 0.103 = 10.3\%$$
                    </div>
                </div>
            </div>
        </div>
        
        <div class="nav-buttons">
            <a href="9.2.html" class="btn prev">上一节：9.2 偏导数</a>
            <a href="9.4.html" class="btn next">下一节：9.4 多元复合函数的求导法</a>
        </div>
        
        <footer>
            <p>&copy; 2025 高等数学复习系统 - 全微分</p>
        </footer>
    </div>

    <script>
        // 页面加载动画
        function initializeAnimations() {
            const contentSections = document.querySelectorAll('.content-section');
            if (contentSections.length > 0 && typeof gsap !== 'undefined') {
                gsap.from('.content-section', {
                    duration: 0.8,
                    y: 30,
                    opacity: 0,
                    stagger: 0.2,
                    ease: "power2.out"
                });
            }
        }
        
        // 滚动触发动画
        function setupScrollAnimations() {
            const observer = new IntersectionObserver((entries) => {
                entries.forEach(entry => {
                    if (entry.isIntersecting && typeof gsap !== 'undefined') {
                        gsap.from(entry.target.querySelectorAll('.definition, .theorem, .example, .practice-problem, .application-example'), {
                            duration: 0.6,
                            y: 20,
                            opacity: 0,
                            stagger: 0.1,
                            ease: "power2.out"
                        });
                    }
                });
            }, { threshold: 0.2 });
            
            document.querySelectorAll('.content-section').forEach(section => {
                observer.observe(section);
            });
        }
        
        // 表格行高亮效果
        function setupTableEffects() {
            const tableRows = document.querySelectorAll('.comparison-table tr');
            tableRows.forEach(row => {
                row.addEventListener('mouseenter', function() {
                    if (typeof gsap !== 'undefined') {
                        gsap.to(this, {duration: 0.3, backgroundColor: '#e3f2fd', ease: "power2.out"});
                    }
                });
                row.addEventListener('mouseleave', function() {
                    if (typeof gsap !== 'undefined') {
                        gsap.to(this, {duration: 0.3, backgroundColor: '', ease: "power2.out"});
                    }
                });
            });
        }
        
        // 公式高亮效果
        function setupFormulaEffects() {
            const formulas = document.querySelectorAll('.math-expression');
            formulas.forEach(formula => {
                formula.addEventListener('mouseenter', function() {
                    if (typeof gsap !== 'undefined') {
                        gsap.to(this, {duration: 0.3, scale: 1.05, ease: "power2.out"});
                    }
                });
                formula.addEventListener('mouseleave', function() {
                    if (typeof gsap !== 'undefined') {
                        gsap.to(this, {duration: 0.3, scale: 1, ease: "power2.out"});
                    }
                });
            });
        }
        
        // 页面加载时初始化
        document.addEventListener('DOMContentLoaded', function() {
            // 延迟执行以确保DOM完全加载
            setTimeout(() => {
                initializeAnimations();
                setupScrollAnimations();
                setupTableEffects();
                setupFormulaEffects();
            }, 500);
            
            // MathJax 加载完成后的回调
            if (typeof MathJax !== 'undefined') {
                MathJax.startup.promise.then(() => {
                    console.log('MathJax loaded successfully');
                    // MathJax 渲染完成后再设置公式效果
                    setTimeout(setupFormulaEffects, 1000);
                });
            }
        });
    </script>
</body>
</html>
