<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="alternate icon" href="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAzMiAzMiI+PGNpcmNsZSBjeD0iMTYiIGN5PSIxNiIgcj0iMTUiIGZpbGw9IiMzNDk4ZGIiIHN0cm9rZT0iIzJjM2U1MCIgc3Ryb2tlLXdpZHRoPSIyIi8+PGcgZmlsbD0id2hpdGUiIGZvbnQtZmFtaWx5PSJUaW1lcyxzZXJpZiIgZm9udC13ZWlnaHQ9ImJvbGQiPjx0ZXh0IHg9IjE2IiB5PSIxMyIgdGV4dC1hbmNob3I9Im1pZGRsZSIgZm9udC1zaXplPSIxMiI+ZDwvdGV4dD48bGluZSB4MT0iOCIgeTE9IjE2IiB4Mj0iMjQiIHkyPSIxNiIgc3Ryb2tlPSJ3aGl0ZSIgc3Ryb2tlLXdpZHRoPSIxLjUiLz48dGV4dCB4PSIxNiIgeT0iMjUiIHRleHQtYW5jaG9yPSJtaWRkbGUiIGZvbnQtc2l6ZT0iMTAiPmR4PC90ZXh0PjwvZz48L3N2Zz4=">
    <title>8.1 向量及其线性运算 - 高等数学复习</title>
    <script>
        window.MathJax = {
            tex: {
                inlineMath: [['$', '$']],
                displayMath: [['$$', '$$']]
            },
            chtml: {
                fontURL: 'https://cdn.jsdelivr.net/npm/mathjax@3/es5/output/chtml/fonts/woff-v2'
            }
        };
    </script>
    <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    <script src="https://cdn.plot.ly/plotly-2.26.0.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/gsap@3.12.2/dist/gsap.min.js"></script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Microsoft YaHei', 'Segoe UI', Arial, sans-serif;
            line-height: 1.6;
            color: #333;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
        }
        
        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }
        
        .back-link {
            display: inline-flex;
            align-items: center;
            margin-bottom: 20px;
            color: #8e44ad;
            text-decoration: none;
            font-weight: 500;
            transition: all 0.3s ease;
            background: rgba(255, 255, 255, 0.9);
            padding: 10px 15px;
            border-radius: 25px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }
        
        .back-link:hover {
            color: #7d3c98;
            transform: translateX(-5px);
            box-shadow: 0 4px 15px rgba(0,0,0,0.15);
        }
        
        .back-link::before {
            content: '←';
            margin-right: 8px;
            font-size: 1.2em;
        }
        
        header {
            background: linear-gradient(135deg, #8e44ad 0%, #7d3c98 100%);
            color: white;
            padding: 40px 0;
            text-align: center;
            border-radius: 15px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.2);
            margin-bottom: 30px;
        }
        
        h1 {
            font-size: 2.5em;
            margin: 0;
            text-shadow: 0 2px 4px rgba(0,0,0,0.3);
            font-weight: 300;
        }
        
        .subtitle {
            font-size: 1.1em;
            margin-top: 10px;
            opacity: 0.9;
        }
        
        .content-section {
            background: white;
            margin: 25px 0;
            border-radius: 15px;
            overflow: hidden;
            box-shadow: 0 5px 20px rgba(0,0,0,0.1);
            transition: transform 0.3s ease, box-shadow 0.3s ease;
        }
        
        .content-section:hover {
            transform: translateY(-3px);
            box-shadow: 0 8px 25px rgba(0,0,0,0.15);
        }
        
        .section-header {
            padding: 20px 30px;
            background: linear-gradient(45deg, #8e44ad, #7d3c98);
            color: white;
        }
        
        .section-header h2 {
            margin: 0;
            font-size: 1.6em;
            font-weight: 400;
        }
        
        .section-content {
            padding: 30px;
        }
        
        .definition {
            background: linear-gradient(135deg, #f3e5f5, #e1bee7);
            border-left: 5px solid #8e44ad;
            padding: 25px;
            margin: 20px 0;
            border-radius: 0 10px 10px 0;
            box-shadow: 0 3px 15px rgba(142, 68, 173, 0.1);
        }
        
        .definition h4 {
            margin: 0 0 15px 0;
            color: #8e44ad;
            font-size: 1.3em;
            font-weight: 600;
        }
        
        .theorem {
            background: linear-gradient(135deg, #fef9e7, #fcf4dd);
            border-left: 5px solid #f39c12;
            padding: 25px;
            margin: 20px 0;
            border-radius: 0 10px 10px 0;
            box-shadow: 0 3px 15px rgba(243, 156, 18, 0.1);
        }
        
        .theorem h4 {
            margin: 0 0 15px 0;
            color: #f39c12;
            font-size: 1.3em;
            font-weight: 600;
        }
        
        .example {
            background: linear-gradient(135deg, #ebf3fd, #d6e9f8);
            border-left: 5px solid #3498db;
            padding: 25px;
            margin: 20px 0;
            border-radius: 0 10px 10px 0;
            box-shadow: 0 3px 15px rgba(52, 152, 219, 0.1);
        }
        
        .example h4 {
            margin: 0 0 15px 0;
            color: #3498db;
            font-size: 1.3em;
            font-weight: 600;
        }
        
        .practice-problem {
            background: linear-gradient(135deg, #fdf2e9, #fbeee0);
            border-left: 5px solid #e67e22;
            padding: 25px;
            margin: 20px 0;
            border-radius: 0 10px 10px 0;
            box-shadow: 0 3px 15px rgba(230, 126, 34, 0.1);
        }
        
        .practice-problem h4 {
            margin: 0 0 15px 0;
            color: #e67e22;
            font-size: 1.3em;
            font-weight: 600;
        }
        
        .difficulty {
            display: inline-block;
            padding: 3px 10px;
            border-radius: 15px;
            font-size: 0.85em;
            font-weight: 500;
            margin-left: 10px;
        }
        
        .difficulty.medium {
            background: #f39c12;
            color: white;
        }
        
        .difficulty.hard {
            background: #e74c3c;
            color: white;
        }
        
        .difficulty.very-hard {
            background: #8e44ad;
            color: white;
        }
        
        .solution {
            margin-top: 20px;
            padding-top: 20px;
            border-top: 2px dashed #bdc3c7;
        }
        
        .solution-header {
            font-weight: 600;
            color: #2c3e50;
            margin-bottom: 15px;
            font-size: 1.1em;
        }
        
        .viz-container {
            width: 100%;
            height: 400px;
            margin: 25px 0;
            background: white;
            border-radius: 10px;
            box-shadow: 0 3px 15px rgba(0,0,0,0.1);
            overflow: hidden;
        }
        
        .interactive-demo {
            width: 100%;
            height: auto;
            min-height: 480px;
            margin: 25px 0;
            background: #f8f9fa;
            border-radius: 10px;
            box-shadow: 0 3px 15px rgba(0,0,0,0.1);
            padding: 20px;
            position: relative;
        }
        
        .controls {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            grid-template-rows: repeat(2, auto);
            gap: 20px;
            margin-bottom: 20px;
            padding: 15px;
            background: white;
            border-radius: 8px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }
        
        .control-group {
            display: flex;
            flex-direction: column;
            gap: 10px;
        }
        
        .controls label {
            display: block;
            margin-bottom: 5px;
            font-weight: 500;
            color: #8e44ad;
        }
        
        .controls input, .controls select {
            width: 100%;
            padding: 8px;
            border: 1px solid #ddd;
            border-radius: 4px;
            font-size: 14px;
        }
        
        .nav-buttons {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-top: 40px;
            padding: 20px 0;
        }
        
        .btn {
            display: inline-flex;
            align-items: center;
            padding: 12px 25px;
            background: linear-gradient(45deg, #8e44ad, #7d3c98);
            color: white;
            text-decoration: none;
            border-radius: 25px;
            font-weight: 500;
            transition: all 0.3s ease;
            box-shadow: 0 3px 15px rgba(142, 68, 173, 0.3);
        }
        
        .btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 20px rgba(142, 68, 173, 0.4);
        }
        
        .btn.prev::before {
            content: '←';
            margin-right: 8px;
            font-size: 1.1em;
        }
        
        .btn.next::after {
            content: '→';
            margin-left: 8px;
            font-size: 1.1em;
        }
        
        footer {
            text-align: center;
            color: white;
            padding: 30px 0;
            opacity: 0.9;
            margin-top: 50px;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 15px;
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.1);
        }
        
        footer p {
            text-align: center;
            margin: 0;
        }
        
        .math-expression {
            text-align: center;
            margin: 15px 0;
            font-size: 1.1em;
        }
        
        ul, ol {
            margin-left: 20px;
            margin-bottom: 15px;
        }
        
        li {
            margin-bottom: 8px;
        }
        
        p {
            margin-bottom: 15px;
            text-align: justify;
        }
        
        .highlight {
            background: linear-gradient(135deg, #fff3cd, #fce4a0);
            padding: 15px;
            border-left: 4px solid #ffc107;
            border-radius: 0 8px 8px 0;
            margin: 15px 0;
        }
        
        .vector-visualization {
            width: 100%;
            height: 500px;
            margin: 25px 0;
            background: white;
            border-radius: 10px;
            box-shadow: 0 3px 15px rgba(0,0,0,0.1);
            position: relative;
            overflow: hidden;
        }
        
        #vector-basic-demo {
            min-height: 500px;
        }
        
        #vector-operations-plot {
            min-height: 400px;
        }
        
        .coordinate-system {
            width: 100%;
            height: 500px;
            margin: 25px 0;
            background: white;
            border-radius: 10px;
            box-shadow: 0 3px 15px rgba(0,0,0,0.1);
            overflow: hidden;
        }
        
        .vector-operations {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
            margin: 20px 0;
        }
        
        .operation-card {
            background: linear-gradient(135deg, #e8f5e8 0%, #d4f1d4 100%);
            padding: 20px;
            border-radius: 15px;
            box-shadow: 0 5px 15px rgba(76, 175, 80, 0.2);
            text-align: center;
        }
        
        .operation-card h5 {
            color: #2e7d32;
            font-size: 1.2em;
            margin-bottom: 15px;
        }
        
        .operation-card .formula {
            font-size: 1.1em;
            margin: 10px 0;
            color: #2c3e50;
        }

        /* AI提示方块样式 */
        .ai-warning {
            position: fixed;
            top: 20px;
            left: 20px;
            width: 40px;
            height: 40px;
            background: white;
            border-radius: 8px;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            z-index: 1000;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.2);
            transition: all 0.3s ease;
            border: 2px solid #e0e0e0;
        }
        
        .ai-warning:hover {
            transform: scale(1.1);
            box-shadow: 0 6px 20px rgba(0, 0, 0, 0.3);
            border-color: #ff4444;
        }
        
        .ai-warning::before {
            content: '!';
            color: #e74c3c;
            font-size: 20px;
            font-weight: bold;
            font-family: Arial, sans-serif;
        }
        
        .ai-warning-tooltip {
            position: absolute;
            top: 50px;
            left: 0;
            background: rgba(0, 0, 0, 0.9);
            color: white;
            padding: 16px 20px;
            border-radius: 8px;
            font-size: 14px;
            line-height: 1.5;
            opacity: 0;
            visibility: hidden;
            transform: translateY(-10px);
            transition: all 0.3s ease;
            z-index: 1001;
            width: 250px;
            box-shadow: 0 4px 20px rgba(0, 0, 0, 0.3);
        }
        
        .ai-warning-tooltip::before {
            content: '';
            position: absolute;
            top: -8px;
            left: 20px;
            width: 0;
            height: 0;
            border-left: 8px solid transparent;
            border-right: 8px solid transparent;
            border-bottom: 8px solid rgba(0, 0, 0, 0.9);
        }
        
        .ai-warning:hover .ai-warning-tooltip {
            opacity: 1;
            visibility: visible;
            transform: translateY(0);
        }
        
        @media (max-width: 1024px) and (min-width: 769px) {
            .controls {
                grid-template-columns: repeat(2, 1fr);
                grid-template-rows: repeat(3, auto);
            }
        }
        
        @media (max-width: 768px) {
            .container {
                padding: 10px;
            }
            
            h1 {
                font-size: 2em;
            }
            
            .section-content {
                padding: 20px;
            }
            
            .definition, .theorem, .example, .practice-problem {
                padding: 20px;
            }
            
            .nav-buttons {
                flex-direction: column;
                gap: 15px;
            }
            
            .controls {
                grid-template-columns: 1fr;
                grid-template-rows: auto;
                gap: 15px;
            }

            .ai-warning {
                width: 35px;
                height: 35px;
                top: 15px;
                left: 15px;
            }
            
            .ai-warning::before {
                font-size: 18px;
            }
            
            .ai-warning-tooltip {
                width: 280px;
                font-size: 13px;
                padding: 14px 18px;
            }
        }
    </style>
</head>
<body>
    <!-- AI内容提示 -->
    <div class="ai-warning">
        <div class="ai-warning-tooltip">
            页面内容由AI生成，请谨慎对待。<br>如发现错误，<a href="https://github.com/learn-advanced-math/learn-advanced-math.github.io/issues" target="_blank" style="color: #ff0000">欢迎反馈</a>。
        </div>
    </div>
    
    <div class="container">
        <a href="../index.html" class="back-link">返回章节概览</a>
        
        <header>
            <h1>8.1 向量及其线性运算</h1>
            <div class="subtitle">Vector and Linear Operations</div>
        </header>
        
        <!-- 8.1.1 向量的基本概念 -->
        <div class="content-section">
            <div class="section-header">
                <h2>8.1.1 向量的基本概念</h2>
            </div>
            <div class="section-content">
                <div class="definition">
                    <h4>向量的定义</h4>
                    <p><strong>向量</strong>：既有大小又有方向的量称为向量（矢量）。几何上，向量可以用有向线段来表示。</p>
                    <ul>
                        <li><strong>向量的表示</strong>：$\overrightarrow{AB}$ 或 $\vec{a}$ 或 $\boldsymbol{a}$</li>
                        <li><strong>向量的模</strong>：向量的大小称为向量的模，记作 $|\vec{a}|$ 或 $|\overrightarrow{AB}|$</li>
                        <li><strong>单位向量</strong>：模长为 $1$ 的向量，记作 $\vec{e}$</li>  
                        <li><strong>零向量</strong>：模长为 $0$ 的向量，记作 $\vec{0}$</li>
                    </ul>
                    
                    <div class="highlight">
                        <p><strong>重要性质：</strong></p>
                        <ul>
                            <li>零向量的方向是任意的</li>
                            <li>单位向量 $\vec{e}_a = \frac{\vec{a}}{|\vec{a}|}$（当 $\vec{a} \neq \vec{0}$ 时）</li>
                            <li>相等向量：大小相等且方向相同的向量</li>
                            <li>相反向量：大小相等但方向相反的向量</li>
                        </ul>
                    </div>
                </div>
                
                <div class="vector-visualization" id="vector-basic-demo">
                    <div style="display: flex; align-items: center; justify-content: center; height: 100%; color: #666; font-size: 16px;">
                        <div id="vector-basic-loading">正在加载3D向量演示...</div>
                    </div>
                </div>
                
                <div class="example">
                    <h4>例1：向量的基本概念</h4>
                    <p>在正方体 $ABCD-A_1B_1C_1D_1$ 中，设正方体的棱长为 $1$。</p>
                    <ol>
                        <li>求向量 $\overrightarrow{AC_1}$ 的模</li>
                        <li>写出与 $\overrightarrow{AC_1}$ 相等的向量</li>
                        <li>写出与 $\overrightarrow{AC_1}$ 相反的向量</li>
                    </ol>
                    
                    <div class="solution">
                        <div class="solution-header">解：</div>
                        <p><strong>1) 求 $|\overrightarrow{AC_1}|$：</strong></p>
                        <p>在正方体中，$\overrightarrow{AC_1}$ 是正方体的体对角线</p>
                        <p>$|\overrightarrow{AC_1}| = \sqrt{1^2 + 1^2 + 1^2} = \sqrt{3}$</p>
                        
                        <p><strong>2) 与 $\overrightarrow{AC_1}$ 相等的向量：</strong></p>
                        <p>$\overrightarrow{BD_1}$（两者大小相等，方向相同）</p>
                        
                        <p><strong>3) 与 $\overrightarrow{AC_1}$ 相反的向量：</strong></p>
                        <p>$\overrightarrow{C_1A}$，$\overrightarrow{D_1B}$</p>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- 8.1.2 向量的线性运算 -->
        <div class="content-section">
            <div class="section-header">
                <h2>8.1.2 向量的加减与数乘运算</h2>
            </div>
            <div class="section-content">
                <div class="theorem">
                    <h4>向量的线性运算</h4>
                    <p><strong>1. 向量加法（三角形法则或平行四边形法则）</strong></p>
                    <div class="math-expression">
                        $\vec{a} + \vec{b} = \vec{c}$
                    </div>
                    <p>几何意义：从 $\vec{a}$ 的终点作 $\vec{b}$ 的起点，连接 $\vec{a}$ 的起点到 $\vec{b}$ 的终点</p>
                    
                    <p><strong>2. 向量减法</strong></p>
                    <div class="math-expression">
                        $\vec{a} - \vec{b} = \vec{a} + (-\vec{b})$
                    </div>
                    
                    <p><strong>3. 数量乘法</strong></p>
                    <p>实数 $k$ 与向量 $\vec{a}$ 的数量乘积 $k\vec{a}$ 是一个向量：</p>
                    <ul>
                        <li>当 $k > 0$ 时，$k\vec{a}$ 与 $\vec{a}$ 方向相同</li>
                        <li>当 $k < 0$ 时，$k\vec{a}$ 与 $\vec{a}$ 方向相反</li>
                        <li>当 $k = 0$ 时，$k\vec{a} = \vec{0}$</li>
                        <li>$|k\vec{a}| = |k||\vec{a}|$</li>
                    </ul>
                </div>
                
                <div class="definition">
                    <h4>平行向量与垂直向量</h4>
                    <p><strong>平行向量（共线向量）</strong>：如果 $\vec{a} \parallel \vec{b}$，则存在实数 $k$ 使得 $\vec{a} = k\vec{b}$</p>
                    <p><strong>垂直向量</strong>：如果 $\vec{a} \perp \vec{b}$，则称 $\vec{a}$ 与 $\vec{b}$ 垂直</p>
                    
                    <div class="highlight">
                        <p><strong>向量运算法则：</strong></p>
                        <ul>
                            <li>交换律：$\vec{a} + \vec{b} = \vec{b} + \vec{a}$</li>
                            <li>结合律：$(\vec{a} + \vec{b}) + \vec{c} = \vec{a} + (\vec{b} + \vec{c})$</li>
                            <li>分配律：$k(\vec{a} + \vec{b}) = k\vec{a} + k\vec{b}$</li>
                            <li>$(k + l)\vec{a} = k\vec{a} + l\vec{a}$</li>
                        </ul>
                    </div>
                </div>
                
                <div class="interactive-demo">
                    <div class="controls">
                        <div class="control-group">
                            <label for="vector-a-x">向量 $\vec{a}$ 的 $x$ 分量：<span id="a-x-display">3</span></label>
                            <input type="range" id="vector-a-x" min="-5" max="5" value="3" step="0.5">
                        </div>
                        <div class="control-group">
                            <label for="vector-b-x">向量 $\vec{b}$ 的 $x$ 分量：<span id="b-x-display">1</span></label>
                            <input type="range" id="vector-b-x" min="-5" max="5" value="1" step="0.5">
                        </div>
                        <div class="control-group">
                            <label for="scalar-k">标量 $k$：<span id="k-display">1</span></label>
                            <input type="range" id="scalar-k" min="-3" max="3" value="1" step="0.1">
                        </div>
                        <div class="control-group">
                            <label for="vector-a-y">向量 $\vec{a}$ 的 $y$ 分量：<span id="a-y-display">2</span></label>
                            <input type="range" id="vector-a-y" min="-5" max="5" value="2" step="0.5">
                        </div>
                        <div class="control-group">
                            <label for="vector-b-y">向量 $\vec{b}$ 的 $y$ 分量：<span id="b-y-display">-2</span></label>
                            <input type="range" id="vector-b-y" min="-5" max="5" value="-2" step="0.5">
                        </div>
                        <div class="control-group">
                            <label for="operation-type">运算类型：</label>
                            <select id="operation-type">
                                <option value="add">向量加法</option>
                                <option value="subtract">向量减法</option>
                                <option value="scalar">数量乘法</option>
                            </select>
                        </div>
                    </div>
                    
                    <div class="vector-visualization" id="vector-operations-plot">
                        <div style="display: flex; align-items: center; justify-content: center; height: 100%; color: #666; font-size: 16px;">
                            <div id="vector-operations-loading">正在加载向量运算演示...</div>
                        </div>
                    </div>
                </div>
                
                <div class="example">
                    <h4>例2：向量的线性运算</h4>
                    <p>已知 $\vec{a} = (3, 2)$，$\vec{b} = (1, -4)$，求：</p>
                    <ol>
                        <li>$\vec{a} + \vec{b}$</li>
                        <li>$\vec{a} - \vec{b}$</li>
                        <li>$2\vec{a} - 3\vec{b}$</li>
                        <li>$|\vec{a} + \vec{b}|$</li>
                    </ol>
                    
                    <div class="solution">
                        <div class="solution-header">解：</div>
                        <p><strong>1) $\vec{a} + \vec{b} = (3, 2) + (1, -4) = (4, -2)$</strong></p>
                        
                        <p><strong>2) $\vec{a} - \vec{b} = (3, 2) - (1, -4) = (2, 6)$</strong></p>
                        
                        <p><strong>3) $2\vec{a} - 3\vec{b} = 2(3, 2) - 3(1, -4) = (6, 4) - (3, -12) = (3, 16)$</strong></p>
                        
                        <p><strong>4) $|\vec{a} + \vec{b}| = |(4, -2)| = \sqrt{4^2 + (-2)^2} = \sqrt{20} = 2\sqrt{5}$</strong></p>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- 8.1.3 空间直角坐标系 -->
        <div class="content-section">
            <div class="section-header">
                <h2>8.1.3 空间直角坐标系与向量的坐标表示</h2>
            </div>
            <div class="section-content">
                <div class="definition">
                    <h4>空间直角坐标系</h4>
                    <p>在空间中选择一点 $O$ 作为原点，过点 $O$ 作三条两两垂直的数轴 $x$、$y$、$z$，这样就建立了空间直角坐标系 $Oxyz$。</p>
                    
                    <ul>
                        <li><strong>坐标轴</strong>：$x$ 轴、$y$ 轴、$z$ 轴</li>
                        <li><strong>坐标面</strong>：$xOy$ 面、$yOz$ 面、$zOx$ 面</li>
                        <li><strong>卦限</strong>：三个坐标面将空间分成八个卦限</li>
                        <li><strong>基向量</strong>：$\vec{i}$、$\vec{j}$、$\vec{k}$ 分别为 $x$、$y$、$z$ 轴的单位向量</li>
                    </ul>
                    
                    <div class="math-expression">
                        任意向量：$\vec{a} = a_x\vec{i} + a_y\vec{j} + a_z\vec{k} = (a_x, a_y, a_z)$
                    </div>
                </div>
                
                <div class="theorem">
                    <h4>向量的坐标运算</h4>
                    <p>设 $\vec{a} = (a_x, a_y, a_z)$，$\vec{b} = (b_x, b_y, b_z)$，则：</p>
                    
                    <div class="vector-operations">
                        <div class="operation-card">
                            <h5>向量加减</h5>
                            <div class="formula">$\vec{a} \pm \vec{b} = (a_x \pm b_x, a_y \pm b_y, a_z \pm b_z)$</div>
                        </div>
                        
                        <div class="operation-card">
                            <h5>数量乘法</h5>
                            <div class="formula">$k\vec{a} = (ka_x, ka_y, ka_z)$</div>
                        </div>
                        <div class="operation-card">
                            <h5>向量的模</h5>
                            <div class="formula">$|\vec{a}| = \sqrt{a_x^2 + a_y^2 + a_z^2}$</div>
                        </div>
                    </div>
                </div>
                
                <div class="coordinate-system" id="coordinate-system-3d">
                    <div style="display: flex; align-items: center; justify-content: center; height: 100%; color: #666; font-size: 16px;">
                        <div id="coordinate-system-loading">正在加载3D坐标系演示...</div>
                    </div>
                </div>
                
                <div class="example">
                    <h4>例3：向量的坐标运算</h4>
                    <p>在空间直角坐标系中，已知点 $A(1, 2, 3)$，$B(4, -1, 2)$，$C(-2, 3, 5)$。</p>
                    <ol>
                        <li>求向量 $\overrightarrow{AB}$ 和 $\overrightarrow{AC}$ 的坐标</li>
                        <li>求 $|\overrightarrow{AB}|$ 和 $|\overrightarrow{AC}|$</li>
                        <li>求 $\overrightarrow{AB} + \overrightarrow{AC}$ 和 $2\overrightarrow{AB} - \overrightarrow{AC}$</li>
                    </ol>
                    
                    <div class="solution">
                        <div class="solution-header">解：</div>
                        <p><strong>1) 求向量坐标：</strong></p>
                        <p>$\overrightarrow{AB} = B - A = (4, -1, 2) - (1, 2, 3) = (3, -3, -1)$</p>
                        <p>$\overrightarrow{AC} = C - A = (-2, 3, 5) - (1, 2, 3) = (-3, 1, 2)$</p>
                        
                        <p><strong>2) 求向量的模：</strong></p>
                        <p>$|\overrightarrow{AB}| = \sqrt{3^2 + (-3)^2 + (-1)^2} = \sqrt{19}$</p>
                        <p>$|\overrightarrow{AC}| = \sqrt{(-3)^2 + 1^2 + 2^2} = \sqrt{14}$</p>
                        
                        <p><strong>3) 向量运算：</strong></p>
                        <p>$\overrightarrow{AB} + \overrightarrow{AC} = (3, -3, -1) + (-3, 1, 2) = (0, -2, 1)$</p>
                        <p>$2\overrightarrow{AB} - \overrightarrow{AC} = 2(3, -3, -1) - (-3, 1, 2) = (6, -6, -2) - (-3, 1, 2) = (9, -7, -4)$</p>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- 8.1.4 方向角与方向余弦 -->
        <div class="content-section">
            <div class="section-header">
                <h2>8.1.4 向量的方向角、方向余弦与投影</h2>
            </div>
            <div class="section-content">
                <div class="definition">
                    <h4>方向角与方向余弦</h4>
                    <p><strong>方向角</strong>：非零向量 $\vec{a}$ 与坐标轴正方向的夹角 $\alpha$、$\beta$、$\gamma$ 称为向量 $\vec{a}$ 的方向角。</p>
                    <p><strong>方向余弦</strong>：$\cos\alpha$、$\cos\beta$、$\cos\gamma$ 称为向量 $\vec{a}$ 的方向余弦。</p>
                    
                    <div class="math-expression">
                        设 $\vec{a} = (a_x, a_y, a_z)$，则：<br>
                        $\cos\alpha = \frac{a_x}{|\vec{a}|}$，$\cos\beta = \frac{a_y}{|\vec{a}|}$，$\cos\gamma = \frac{a_z}{|\vec{a}|}$
                    </div>
                    
                    <div class="highlight">
                        <p><strong>方向余弦的性质：</strong></p>
                        <ul>
                            <li>$\cos^2\alpha + \cos^2\beta + \cos^2\gamma = 1$</li>
                            <li>单位向量的坐标就是它的方向余弦：$\vec{e}_a = (\cos\alpha, \cos\beta, \cos\gamma)$</li>
                        </ul>
                    </div>
                </div>
                
                <div class="definition">
                    <h4>向量在轴上的投影</h4>
                    <p>向量 $\vec{a}$ 在轴 $l$ 上的投影定义为：</p>
                    <div class="math-expression">
                        $\text{proj}_l \vec{a} = |\vec{a}|\cos\theta$
                    </div>
                    <p>其中 $\theta$ 是向量 $\vec{a}$ 与轴 $l$ 的夹角。</p>
                    
                    <p><strong>投影的性质：</strong></p>
                    <ul>
                        <li>$\text{proj}_l(\vec{a} + \vec{b}) = \text{proj}_l\vec{a} + \text{proj}_l\vec{b}$</li>
                        <li>$\text{proj}_l(k\vec{a}) = k \cdot \text{proj}_l\vec{a}$</li>
                        <li>向量在坐标轴上的投影就是相应的坐标分量</li>
                    </ul>
                </div>
                
                <div class="example">
                    <h4>例4：方向角与方向余弦</h4>
                    <p>已知向量 $\vec{a} = (2, -3, 6)$，求：</p>
                    <ol>
                        <li>向量 $\vec{a}$ 的方向余弦</li>
                        <li>向量 $\vec{a}$ 的方向角</li>
                        <li>与 $\vec{a}$ 同方向的单位向量</li>
                    </ol>
                    
                    <div class="solution">
                        <div class="solution-header">解：</div>
                        <p><strong>1) 方向余弦：</strong></p>
                        <p>先求 $|\vec{a}| = \sqrt{2^2 + (-3)^2 + 6^2} = \sqrt{49} = 7$</p>
                        <p>$\cos\alpha = \frac{2}{7}$，$\cos\beta = \frac{-3}{7}$，$\cos\gamma = \frac{6}{7}$</p>
                        
                        <p><strong>2) 方向角：</strong></p>
                        <p>$\alpha = \arccos\frac{2}{7} \approx 73.4°$</p>
                        <p>$\beta = \arccos\frac{-3}{7} \approx 115.4°$</p>
                        <p>$\gamma = \arccos\frac{6}{7} \approx 31.0°$</p>
                        
                        <p><strong>3) 同方向的单位向量：</strong></p>
                        <p>$\vec{e}_a = \frac{\vec{a}}{|\vec{a}|} = \frac{1}{7}(2, -3, 6) = \left(\frac{2}{7}, -\frac{3}{7}, \frac{6}{7}\right)$</p>
                    </div>
                </div>
                
                <div class="practice-problem">
                    <h4>习题1 <span class="difficulty medium">中等难度</span></h4>
                    <p>在长方体 $ABCD-A_1B_1C_1D_1$ 中，$AB = 3$，$BC = 4$，$AA_1 = 5$。以 $A$ 为原点，$AB$、$AD$、$AA_1$ 分别为 $x$、$y$、$z$ 轴建立坐标系。求向量 $\overrightarrow{AC_1}$ 的方向余弦。</p>
                    
                    <div class="solution">
                        <div class="solution-header">解：</div>
                        <p>建立坐标系后，各顶点坐标为：</p>
                        <p>$A(0, 0, 0)$，$C(3, 4, 0)$，$C_1(3, 4, 5)$</p>
                        <p>$\overrightarrow{AC_1} = (3, 4, 5)$</p>
                        <p>$|\overrightarrow{AC_1}| = \sqrt{3^2 + 4^2 + 5^2} = \sqrt{50} = 5\sqrt{2}$</p>
                        <p>方向余弦为：</p>
                        <p>$\cos\alpha = \frac{3}{5\sqrt{2}} = \frac{3\sqrt{2}}{10}$</p>
                        <p>$\cos\beta = \frac{4}{5\sqrt{2}} = \frac{2\sqrt{2}}{5}$</p>
                        <p>$\cos\gamma = \frac{5}{5\sqrt{2}} = \frac{\sqrt{2}}{2}$</p>
                    </div>
                </div>
                
                <div class="practice-problem">
                    <h4>习题2 <span class="difficulty hard">较难</span></h4>
                    <p>已知向量 $\vec{a} = (1, 2, -2)$，$\vec{b} = (2, -1, 2)$。</p>
                    <ol>
                        <li>判断 $\vec{a}$ 与 $\vec{b}$ 是否垂直</li>
                        <li>求向量 $\vec{c} = 2\vec{a} + 3\vec{b}$ 在坐标轴上的投影</li>
                        <li>求 $\vec{c}$ 与各坐标轴的夹角</li>
                    </ol>
                    
                    <div class="solution">
                        <div class="solution-header">解：</div>
                        <p><strong>1) 由：</strong></p>
                        <p>$\vec{a} \cdot \vec{b} = 1 \times 2 + 2 \times (-1) + (-2) \times 2 = 2 - 2 - 4 = -4 \neq 0$</p>
                        <p>所以 $\vec{a}$ 与 $\vec{b}$ 不垂直。</p>
                        
                        <p><strong>2) 求 $\vec{c}$ 的坐标和投影：</strong></p>
                        <p>$\vec{c} = 2(1, 2, -2) + 3(2, -1, 2) = (2, 4, -4) + (6, -3, 6) = (8, 1, 2)$</p>
                        <p>在各坐标轴上的投影分别为：$8$，$1$，$2$</p>
                        
                        <p><strong>3) 求夹角：</strong></p>
                        <p>$|\vec{c}| = \sqrt{8^2 + 1^2 + 2^2} = \sqrt{69}$</p>
                        <p>与 $x$ 轴夹角：$\cos\alpha = \frac{8}{\sqrt{69}}$，$\alpha = \arccos\frac{8}{\sqrt{69}}$</p>
                        <p>与 $y$ 轴夹角：$\cos\beta = \frac{1}{\sqrt{69}}$，$\beta = \arccos\frac{1}{\sqrt{69}}$</p>
                        <p>与 $z$ 轴夹角：$\cos\gamma = \frac{2}{\sqrt{69}}$，$\gamma = \arccos\frac{2}{\sqrt{69}}$</p>
                    </div>
                </div>
                
                <div class="practice-problem">
                    <h4>习题3 <span class="difficulty very-hard">很难</span></h4>
                    <p>已知三个向量 $\vec{a} = (1, 2, 3)$，$\vec{b} = (2, -1, 1)$，$\vec{c} = (1, 1, -1)$。</p>
                    <ol>
                        <li>求向量 $\vec{a}$ 在由 $\vec{b}$ 和 $\vec{c}$ 确定的平面上的投影向量</li>
                        <li>判断能否用 $\vec{b}$ 和 $\vec{c}$ 线性表示 $\vec{a}$</li>
                        <li>如果可以，求出表示式；如果不可以，说明理由</li>
                    </ol>
                    
                    <div class="solution">
                        <div class="solution-header">解：</div>
                        <p><strong>1) 求投影向量（此题较复杂，需要用到向量的数量积等后续知识）</strong></p>
                        
                        <p><strong>2) 判断线性相关性：</strong></p>
                        <p>设 $\vec{a} = k_1\vec{b} + k_2\vec{c}$，即：</p>
                        <p>$(1, 2, 3) = k_1(2, -1, 1) + k_2(1, 1, -1)$</p>
                        <p>得到方程组：</p>
                        <ul>
                            <li>$2k_1 + k_2 = 1$</li>
                            <li>$-k_1 + k_2 = 2$</li>
                            <li>$k_1 - k_2 = 3$</li>
                        </ul>
                        
                        <p><strong>3) 解方程组：</strong></p>
                        <p>从前两个方程：$3k_1 = -1$，所以 $k_1 = -\frac{1}{3}$</p>
                        <p>$k_2 = 1 - 2k_1 = 1 + \frac{2}{3} = \frac{5}{3}$</p>
                        <p>验证第三个方程：$k_1 - k_2 = -\frac{1}{3} - \frac{5}{3} = -2 \neq 3$</p>
                        <p>因此，$\vec{a}$ 不能用 $\vec{b}$ 和 $\vec{c}$ 线性表示。</p>
                    </div>
                </div>
            </div>
        </div>
        
        <div class="nav-buttons">
            <a href="../index.html" class="btn prev">返回章节概览</a>
            <a href="8.2.html" class="btn next">下一节：8.2 向量的数量积、向量积、混合积</a>
        </div>
        
        <footer>
            <p>&copy; 2025 高等数学复习系统 - 向量及其线性运算</p>
        </footer>
    </div>

    <script>
        // 向量基本概念演示
        function createVectorBasicDemo() {
            const plotDiv = document.getElementById('vector-basic-demo');
            if (!plotDiv) {
                console.error('找不到vector-basic-demo元素');
                return;
            }
            
            if (typeof Plotly === 'undefined') {
                console.error('Plotly库未加载');
                return;
            }
            
            const traces = [
                // 原点到A的向量
                {
                    x: [0, 3],
                    y: [0, 2],
                    z: [0, 1],
                    type: 'scatter3d',
                    mode: 'lines+markers',
                    name: '向量 a',
                    line: { color: '#e74c3c', width: 6 },
                    marker: { 
                        size: [6, 12], 
                        color: ['#e74c3c', '#e74c3c'],
                        symbol: ['circle', 'diamond']
                    }
                },
                // 原点到B的向量（与a相等）
                {
                    x: [1, 4],
                    y: [1, 3], 
                    z: [1, 2],
                    type: 'scatter3d',
                    mode: 'lines+markers',
                    name: '向量 b（与a相等）',
                    line: { color: '#3498db', width: 6 },
                    marker: { 
                        size: [6, 12], 
                        color: ['#3498db', '#3498db'],
                        symbol: ['circle', 'diamond']
                    }
                },
                // 添加箭头（使用cone图形）
                {
                    type: 'cone',
                    x: [2.7], y: [1.8], z: [0.9],
                    u: [0.3], v: [0.2], w: [0.1],
                    colorscale: [[0, '#e74c3c'], [1, '#e74c3c']],
                    showscale: false,
                    sizemode: 'absolute',
                    sizeref: 0.3,
                    name: '向量a箭头',
                    showlegend: false
                },
                {
                    type: 'cone',
                    x: [3.7], y: [2.8], z: [1.9],
                    u: [0.3], v: [0.2], w: [0.1],
                    colorscale: [[0, '#3498db'], [1, '#3498db']],
                    showscale: false,
                    sizemode: 'absolute',
                    sizeref: 0.3,
                    name: '向量b箭头',
                    showlegend: false
                },
                // 零向量
                {
                    x: [0],
                    y: [0],
                    z: [0],
                    type: 'scatter3d',
                    mode: 'markers',
                    name: '零向量',
                    marker: { color: '#27ae60', size: 12 }
                }
            ];
            
            const layout = {
                title: '向量的基本概念演示',
                scene: {
                    xaxis: { title: 'X', range: [-1, 5] },
                    yaxis: { title: 'Y', range: [-1, 4] },
                    zaxis: { title: 'Z', range: [-1, 3] },
                    aspectmode: 'cube'
                },
                showlegend: true,
                font: { family: 'Microsoft YaHei', size: 12 },
                paper_bgcolor: 'rgba(0,0,0,0)',
                plot_bgcolor: 'rgba(0,0,0,0)'
            };
            
            const config = {responsive: true, displayModeBar: false};
            
            Plotly.newPlot(plotDiv, traces, layout, config).then(() => {
                console.log('向量基本概念演示加载成功');
                // 移除加载提示
                const loadingDiv = document.getElementById('vector-basic-loading');
                if (loadingDiv) loadingDiv.style.display = 'none';
            }).catch(error => {
                console.error('向量基本概念演示加载失败:', error);
                const loadingDiv = document.getElementById('vector-basic-loading');
                if (loadingDiv) loadingDiv.textContent = '加载失败，请刷新页面重试';
            });
        }
        
        // 向量运算可视化
        function createVectorOperationsDemo() {
            const plotDiv = document.getElementById('vector-operations-plot');
            if (!plotDiv) {
                console.error('找不到vector-operations-plot元素');
                return;
            }
            
            if (typeof Plotly === 'undefined') {
                console.error('Plotly库未加载');
                return;
            }
            
            const aXSlider = document.getElementById('vector-a-x');
            const aYSlider = document.getElementById('vector-a-y');
            const bXSlider = document.getElementById('vector-b-x');
            const bYSlider = document.getElementById('vector-b-y');
            const kSlider = document.getElementById('scalar-k');
            const operationSelect = document.getElementById('operation-type');
            
            const aXDisplay = document.getElementById('a-x-display');
            const aYDisplay = document.getElementById('a-y-display');
            const bXDisplay = document.getElementById('b-x-display');
            const bYDisplay = document.getElementById('b-y-display');
            const kDisplay = document.getElementById('k-display');
            
            if (!aXSlider || !aYSlider || !bXSlider || !bYSlider || !kSlider || !operationSelect) {
                console.error('控制元素未找到');
                return;
            }
            
            function updatePlot() {
                const ax = parseFloat(aXSlider.value);
                const ay = parseFloat(aYSlider.value);
                const bx = parseFloat(bXSlider.value);
                const by = parseFloat(bYSlider.value);
                const k = parseFloat(kSlider.value);
                const operation = operationSelect.value;
                
                // 更新显示值
                if (aXDisplay) aXDisplay.textContent = ax;
                if (aYDisplay) aYDisplay.textContent = ay;
                if (bXDisplay) bXDisplay.textContent = bx;
                if (bYDisplay) bYDisplay.textContent = by;
                if (kDisplay) kDisplay.textContent = k;
                
                let resultX, resultY, title;
                
                switch(operation) {
                    case 'add':
                        resultX = ax + bx;
                        resultY = ay + by;
                        title = `向量加法：a + b = (${resultX}, ${resultY})`;
                        break;
                    case 'subtract':
                        resultX = ax - bx;
                        resultY = ay - by;
                        title = `向量减法：a - b = (${resultX}, ${resultY})`;
                        break;
                    case 'scalar':
                        resultX = k * ax;
                        resultY = k * ay;
                        title = `数量乘法：${k}a = (${resultX.toFixed(1)}, ${resultY.toFixed(1)})`;
                        break;
                }
                
                const traces = [
                    // 向量a
                    {
                        x: [0, ax],
                        y: [0, ay],
                        type: 'scatter',
                        mode: 'lines+markers',
                        name: `向量a = (${ax}, ${ay})`,
                        line: { color: '#e74c3c', width: 4 },
                        marker: { 
                            size: [8, 12], 
                            color: ['#e74c3c', '#e74c3c'],
                            symbol: ['circle', 'circle']
                        }
                    }
                ];
                
                // 根据运算类型添加不同的向量
                if (operation === 'add' || operation === 'subtract') {
                    traces.push({
                        x: [0, bx],
                        y: [0, by],
                        type: 'scatter',
                        mode: 'lines+markers',
                        name: `向量b = (${bx}, ${by})`,
                        line: { color: '#3498db', width: 4 },
                        marker: { 
                            size: [8, 12], 
                            color: ['#3498db', '#3498db'],
                            symbol: ['circle', 'circle']
                        }
                    });
                }
                
                // 结果向量
                traces.push({
                    x: [0, resultX],
                    y: [0, resultY],
                    type: 'scatter',
                    mode: 'lines+markers',
                    name: '结果向量',
                    line: { color: '#27ae60', width: 5 },
                    marker: { 
                        size: [10, 15], 
                        color: ['#27ae60', '#27ae60'],
                        symbol: ['circle', 'circle']
                    }
                });
                
                // 如果是加法，显示平行四边形
                if (operation === 'add') {
                    traces.push({
                        x: [ax, ax + bx, bx],
                        y: [ay, ay + by, by],
                        type: 'scatter',
                        mode: 'lines',
                        name: '平行四边形',
                        line: { color: '#95a5a6', width: 1, dash: 'dash' },
                        showlegend: false
                    });
                }
                
                const layout = {
                    title: title,
                    xaxis: {
                        title: 'x',
                        range: [-6, 6],
                        zeroline: true,
                        zerolinecolor: '#bdc3c7'
                    },
                    yaxis: {
                        title: 'y',
                        range: [-6, 6],
                        zeroline: true,
                        zerolinecolor: '#bdc3c7'
                    },
                    showlegend: true,
                    plot_bgcolor: 'rgba(0,0,0,0)',
                    paper_bgcolor: 'rgba(0,0,0,0)',
                    font: { family: 'Microsoft YaHei', size: 12 }
                };
                
                const config = {responsive: true, displayModeBar: false};
                
                Plotly.newPlot(plotDiv, traces, layout, config).then(() => {
                    // 移除加载提示
                    const loadingDiv = document.getElementById('vector-operations-loading');
                    if (loadingDiv) loadingDiv.style.display = 'none';
                }).catch(error => {
                    console.error('向量运算图形更新失败:', error);
                    const loadingDiv = document.getElementById('vector-operations-loading');
                    if (loadingDiv) loadingDiv.textContent = '加载失败，请刷新页面重试';
                });
            }
            
            // 事件监听器
            [aXSlider, aYSlider, bXSlider, bYSlider, kSlider].forEach(slider => {
                slider.addEventListener('input', updatePlot);
            });
            operationSelect.addEventListener('change', updatePlot);
            
            // 初始化
            updatePlot();
            console.log('向量运算演示初始化完成');
        }
        
        // 3D坐标系演示
        function createCoordinateSystem3D() {
            const plotDiv = document.getElementById('coordinate-system-3d');
            if (!plotDiv) {
                console.error('找不到coordinate-system-3d元素');
                return;
            }
            
            if (typeof Plotly === 'undefined') {
                console.error('Plotly库未加载');
                return;
            }
            
            const traces = [
                // X轴
                {
                    x: [0, 5],
                    y: [0, 0],
                    z: [0, 0],
                    type: 'scatter3d',
                    mode: 'lines',
                    name: 'X轴',
                    line: { color: '#e74c3c', width: 8 }
                },
                // Y轴
                {
                    x: [0, 0],
                    y: [0, 5],
                    z: [0, 0],
                    type: 'scatter3d',
                    mode: 'lines',
                    name: 'Y轴',
                    line: { color: '#27ae60', width: 8 }
                },
                // Z轴
                {
                    x: [0, 0],
                    y: [0, 0],
                    z: [0, 5],
                    type: 'scatter3d',
                    mode: 'lines',
                    name: 'Z轴',
                    line: { color: '#3498db', width: 8 }
                },
                // 坐标轴箭头
                {
                    type: 'cone',
                    x: [5], y: [0], z: [0],
                    u: [0.5], v: [0], w: [0],
                    colorscale: [[0, '#e74c3c'], [1, '#e74c3c']],
                    showscale: false,
                    sizemode: 'absolute',
                    sizeref: 0.2,
                    name: 'X轴箭头',
                    showlegend: false
                },
                {
                    type: 'cone',
                    x: [0], y: [5], z: [0],
                    u: [0], v: [0.5], w: [0],
                    colorscale: [[0, '#27ae60'], [1, '#27ae60']],
                    showscale: false,
                    sizemode: 'absolute',
                    sizeref: 0.2,
                    name: 'Y轴箭头',
                    showlegend: false
                },
                {
                    type: 'cone',
                    x: [0], y: [0], z: [5],
                    u: [0], v: [0], w: [0.5],
                    colorscale: [[0, '#3498db'], [1, '#3498db']],
                    showscale: false,
                    sizemode: 'absolute',
                    sizeref: 0.2,
                    name: 'Z轴箭头',
                    showlegend: false
                },
                // 示例向量
                {
                    x: [0, 3],
                    y: [0, 2],
                    z: [0, 4],
                    type: 'scatter3d',
                    mode: 'lines+markers',
                    name: '向量 (3,2,4)',
                    line: { color: '#9b59b6', width: 6 },
                    marker: { 
                        size: [6, 12], 
                        color: ['#9b59b6', '#9b59b6'],
                        symbol: ['circle', 'diamond']
                    }
                },
                // 示例向量的箭头
                {
                    type: 'cone',
                    x: [2.7], y: [1.8], z: [3.6],
                    u: [0.3], v: [0.2], w: [0.4],
                    colorscale: [[0, '#9b59b6'], [1, '#9b59b6']],
                    showscale: false,
                    sizemode: 'absolute',
                    sizeref: 0.3,
                    name: '向量箭头',
                    showlegend: false
                },
                // 投影到各坐标面
                {
                    x: [0, 3, 3, 3],
                    y: [0, 0, 2, 2],
                    z: [0, 0, 0, 4],
                    type: 'scatter3d',
                    mode: 'lines',
                    name: '投影',
                    line: { color: '#95a5a6', width: 2, dash: 'dash' },
                    showlegend: false
                }
            ];
            
            const layout = {
                title: '空间直角坐标系与向量表示',
                scene: {
                    xaxis: { title: 'X', range: [0, 5] },
                    yaxis: { title: 'Y', range: [0, 5] },
                    zaxis: { title: 'Z', range: [0, 5] },
                    aspectmode: 'cube'
                },
                showlegend: true,
                font: { family: 'Microsoft YaHei', size: 12 },
                paper_bgcolor: 'rgba(0,0,0,0)',
                plot_bgcolor: 'rgba(0,0,0,0)'
            };
            
            const config = {responsive: true, displayModeBar: false};
            
            Plotly.newPlot(plotDiv, traces, layout, config).then(() => {
                console.log('3D坐标系演示加载成功');
                // 移除加载提示
                const loadingDiv = document.getElementById('coordinate-system-loading');
                if (loadingDiv) loadingDiv.style.display = 'none';
            }).catch(error => {
                console.error('3D坐标系演示加载失败:', error);
                const loadingDiv = document.getElementById('coordinate-system-loading');
                if (loadingDiv) loadingDiv.textContent = '加载失败，请刷新页面重试';
            });
        }
        
        // 页面加载动画
        function initializeAnimations() {
            const contentSections = document.querySelectorAll('.content-section');
            if (contentSections.length > 0 && typeof gsap !== 'undefined') {
                gsap.from('.content-section', {
                    duration: 0.8,
                    y: 30,
                    opacity: 0,
                    stagger: 0.2,
                    ease: "power2.out"
                });
            }
            
            const operationCards = document.querySelectorAll('.operation-card');
            if (operationCards.length > 0 && typeof gsap !== 'undefined') {
                gsap.from('.operation-card', {
                    duration: 0.6,
                    scale: 0.8,
                    opacity: 0,
                    stagger: 0.1,
                    delay: 1,
                    ease: "back.out(1.7)"
                });
            }
        }
        
        // 滚动触发动画
        function setupScrollAnimations() {
            const observer = new IntersectionObserver((entries) => {
                entries.forEach(entry => {
                    if (entry.isIntersecting && typeof gsap !== 'undefined') {
                        gsap.from(entry.target.querySelectorAll('.definition, .theorem, .example'), {
                            duration: 0.6,
                            y: 20,
                            opacity: 0,
                            stagger: 0.1,
                            ease: "power2.out"
                        });
                    }
                });
            }, { threshold: 0.2 });
            
            document.querySelectorAll('.content-section').forEach(section => {
                observer.observe(section);
            });
        }
        
        // 页面加载时初始化
        document.addEventListener('DOMContentLoaded', function() {
            console.log('页面DOM加载完成');
            
            // 检查必要的库是否加载
            if (typeof Plotly === 'undefined') {
                console.error('Plotly.js库未加载，请检查网络连接');
                return;
            }
            
            // 等待所有外部资源加载完成
            setTimeout(() => {
                console.log('开始初始化可视化组件...');
                
                try {
                    createVectorBasicDemo();
                    console.log('向量基本概念演示初始化完成');
                } catch (error) {
                    console.error('向量基本概念演示初始化失败:', error);
                }
                
                try {
                    createVectorOperationsDemo();
                    console.log('向量运算演示初始化完成');
                } catch (error) {
                    console.error('向量运算演示初始化失败:', error);
                }
                
                try {
                    createCoordinateSystem3D();
                    console.log('3D坐标系演示初始化完成');
                } catch (error) {
                    console.error('3D坐标系演示初始化失败:', error);
                }
                
                try {
                    initializeAnimations();
                    setupScrollAnimations();
                    console.log('动画效果初始化完成');
                } catch (error) {
                    console.error('动画效果初始化失败:', error);
                }
                
            }, 1000); // 增加延迟时间确保库完全加载
            
            // MathJax 加载完成后的回调
            if (typeof MathJax !== 'undefined') {
                MathJax.startup.promise.then(() => {
                    console.log('MathJax加载成功');
                }).catch(error => {
                    console.error('MathJax加载失败:', error);
                });
            } else {
                console.warn('MathJax未定义');
            }
        });
    </script>
</body>
</html>
